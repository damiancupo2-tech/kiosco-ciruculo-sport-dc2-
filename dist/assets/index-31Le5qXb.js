function rm(l,r){for(var s=0;s<r.length;s++){const o=r[s];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in l)){const c=Object.getOwnPropertyDescriptor(o,u);c&&Object.defineProperty(l,u,c.get?c:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(u){if(u.ep)return;u.ep=!0;const c=s(u);fetch(u.href,c)}})();function nm(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function sm(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var r=l.default;if(typeof r=="function"){var s=function o(){var u=!1;try{u=this instanceof o}catch{}return u?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};s.prototype=r.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(l).forEach(function(o){var u=Object.getOwnPropertyDescriptor(l,o);Object.defineProperty(s,o,u.get?u:{enumerable:!0,get:function(){return l[o]}})}),s}var Ma={exports:{}},cs={},za={exports:{}},ke={};var xd;function im(){if(xd)return ke;xd=1;var l=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),S=Symbol.iterator;function N(b){return b===null||typeof b!="object"?null:(b=S&&b[S]||b["@@iterator"],typeof b=="function"?b:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,O={};function E(b,P,re){this.props=b,this.context=P,this.refs=O,this.updater=re||j}E.prototype.isReactComponent={},E.prototype.setState=function(b,P){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,P,"setState")},E.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function H(){}H.prototype=E.prototype;function U(b,P,re){this.props=b,this.context=P,this.refs=O,this.updater=re||j}var L=U.prototype=new H;L.constructor=U,T(L,E.prototype),L.isPureReactComponent=!0;var J=Array.isArray,te=Object.prototype.hasOwnProperty,oe={current:null},he={key:!0,ref:!0,__self:!0,__source:!0};function F(b,P,re){var ce,we={},ve=null,M=null;if(P!=null)for(ce in P.ref!==void 0&&(M=P.ref),P.key!==void 0&&(ve=""+P.key),P)te.call(P,ce)&&!he.hasOwnProperty(ce)&&(we[ce]=P[ce]);var se=arguments.length-2;if(se===1)we.children=re;else if(1<se){for(var je=Array(se),ze=0;ze<se;ze++)je[ze]=arguments[ze+2];we.children=je}if(b&&b.defaultProps)for(ce in se=b.defaultProps,se)we[ce]===void 0&&(we[ce]=se[ce]);return{$$typeof:l,type:b,key:ve,ref:M,props:we,_owner:oe.current}}function fe(b,P){return{$$typeof:l,type:b.type,key:P,ref:b.ref,props:b.props,_owner:b._owner}}function be(b){return typeof b=="object"&&b!==null&&b.$$typeof===l}function z(b){var P={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(re){return P[re]})}var C=/\/+/g;function Q(b,P){return typeof b=="object"&&b!==null&&b.key!=null?z(""+b.key):P.toString(36)}function $(b,P,re,ce,we){var ve=typeof b;(ve==="undefined"||ve==="boolean")&&(b=null);var M=!1;if(b===null)M=!0;else switch(ve){case"string":case"number":M=!0;break;case"object":switch(b.$$typeof){case l:case r:M=!0}}if(M)return M=b,we=we(M),b=ce===""?"."+Q(M,0):ce,J(we)?(re="",b!=null&&(re=b.replace(C,"$&/")+"/"),$(we,P,re,"",function(ze){return ze})):we!=null&&(be(we)&&(we=fe(we,re+(!we.key||M&&M.key===we.key?"":(""+we.key).replace(C,"$&/")+"/")+b)),P.push(we)),1;if(M=0,ce=ce===""?".":ce+":",J(b))for(var se=0;se<b.length;se++){ve=b[se];var je=ce+Q(ve,se);M+=$(ve,P,re,je,we)}else if(je=N(b),typeof je=="function")for(b=je.call(b),se=0;!(ve=b.next()).done;)ve=ve.value,je=ce+Q(ve,se++),M+=$(ve,P,re,je,we);else if(ve==="object")throw P=String(b),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return M}function G(b,P,re){if(b==null)return b;var ce=[],we=0;return $(b,ce,"","",function(ve){return P.call(re,ve,we++)}),ce}function w(b){if(b._status===-1){var P=b._result;P=P(),P.then(function(re){(b._status===0||b._status===-1)&&(b._status=1,b._result=re)},function(re){(b._status===0||b._status===-1)&&(b._status=2,b._result=re)}),b._status===-1&&(b._status=0,b._result=P)}if(b._status===1)return b._result.default;throw b._result}var X={current:null},D={transition:null},Z={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:D,ReactCurrentOwner:oe};function W(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:G,forEach:function(b,P,re){G(b,function(){P.apply(this,arguments)},re)},count:function(b){var P=0;return G(b,function(){P++}),P},toArray:function(b){return G(b,function(P){return P})||[]},only:function(b){if(!be(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},ke.Component=E,ke.Fragment=s,ke.Profiler=u,ke.PureComponent=U,ke.StrictMode=o,ke.Suspense=m,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,ke.act=W,ke.cloneElement=function(b,P,re){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var ce=T({},b.props),we=b.key,ve=b.ref,M=b._owner;if(P!=null){if(P.ref!==void 0&&(ve=P.ref,M=oe.current),P.key!==void 0&&(we=""+P.key),b.type&&b.type.defaultProps)var se=b.type.defaultProps;for(je in P)te.call(P,je)&&!he.hasOwnProperty(je)&&(ce[je]=P[je]===void 0&&se!==void 0?se[je]:P[je])}var je=arguments.length-2;if(je===1)ce.children=re;else if(1<je){se=Array(je);for(var ze=0;ze<je;ze++)se[ze]=arguments[ze+2];ce.children=se}return{$$typeof:l,type:b.type,key:we,ref:ve,props:ce,_owner:M}},ke.createContext=function(b){return b={$$typeof:h,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:c,_context:b},b.Consumer=b},ke.createElement=F,ke.createFactory=function(b){var P=F.bind(null,b);return P.type=b,P},ke.createRef=function(){return{current:null}},ke.forwardRef=function(b){return{$$typeof:p,render:b}},ke.isValidElement=be,ke.lazy=function(b){return{$$typeof:y,_payload:{_status:-1,_result:b},_init:w}},ke.memo=function(b,P){return{$$typeof:v,type:b,compare:P===void 0?null:P}},ke.startTransition=function(b){var P=D.transition;D.transition={};try{b()}finally{D.transition=P}},ke.unstable_act=W,ke.useCallback=function(b,P){return X.current.useCallback(b,P)},ke.useContext=function(b){return X.current.useContext(b)},ke.useDebugValue=function(){},ke.useDeferredValue=function(b){return X.current.useDeferredValue(b)},ke.useEffect=function(b,P){return X.current.useEffect(b,P)},ke.useId=function(){return X.current.useId()},ke.useImperativeHandle=function(b,P,re){return X.current.useImperativeHandle(b,P,re)},ke.useInsertionEffect=function(b,P){return X.current.useInsertionEffect(b,P)},ke.useLayoutEffect=function(b,P){return X.current.useLayoutEffect(b,P)},ke.useMemo=function(b,P){return X.current.useMemo(b,P)},ke.useReducer=function(b,P,re){return X.current.useReducer(b,P,re)},ke.useRef=function(b){return X.current.useRef(b)},ke.useState=function(b){return X.current.useState(b)},ke.useSyncExternalStore=function(b,P,re){return X.current.useSyncExternalStore(b,P,re)},ke.useTransition=function(){return X.current.useTransition()},ke.version="18.3.1",ke}var wd;function fl(){return wd||(wd=1,za.exports=im()),za.exports}var _d;function om(){if(_d)return cs;_d=1;var l=fl(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,v){var y,S={},N=null,j=null;v!==void 0&&(N=""+v),m.key!==void 0&&(N=""+m.key),m.ref!==void 0&&(j=m.ref);for(y in m)o.call(m,y)&&!c.hasOwnProperty(y)&&(S[y]=m[y]);if(p&&p.defaultProps)for(y in m=p.defaultProps,m)S[y]===void 0&&(S[y]=m[y]);return{$$typeof:r,type:p,key:N,ref:j,props:S,_owner:u.current}}return cs.Fragment=s,cs.jsx=h,cs.jsxs=h,cs}var bd;function am(){return bd||(bd=1,Ma.exports=om()),Ma.exports}var a=am(),V=fl(),Ti={},Fa={exports:{}},dt={},Ba={exports:{}},qa={};var jd;function lm(){return jd||(jd=1,(function(l){function r(D,Z){var W=D.length;D.push(Z);e:for(;0<W;){var b=W-1>>>1,P=D[b];if(0<u(P,Z))D[b]=Z,D[W]=P,W=b;else break e}}function s(D){return D.length===0?null:D[0]}function o(D){if(D.length===0)return null;var Z=D[0],W=D.pop();if(W!==Z){D[0]=W;e:for(var b=0,P=D.length,re=P>>>1;b<re;){var ce=2*(b+1)-1,we=D[ce],ve=ce+1,M=D[ve];if(0>u(we,W))ve<P&&0>u(M,we)?(D[b]=M,D[ve]=W,b=ve):(D[b]=we,D[ce]=W,b=ce);else if(ve<P&&0>u(M,W))D[b]=M,D[ve]=W,b=ve;else break e}}return Z}function u(D,Z){var W=D.sortIndex-Z.sortIndex;return W!==0?W:D.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;l.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();l.unstable_now=function(){return h.now()-p}}var m=[],v=[],y=1,S=null,N=3,j=!1,T=!1,O=!1,E=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(D){for(var Z=s(v);Z!==null;){if(Z.callback===null)o(v);else if(Z.startTime<=D)o(v),Z.sortIndex=Z.expirationTime,r(m,Z);else break;Z=s(v)}}function J(D){if(O=!1,L(D),!T)if(s(m)!==null)T=!0,w(te);else{var Z=s(v);Z!==null&&X(J,Z.startTime-D)}}function te(D,Z){T=!1,O&&(O=!1,H(F),F=-1),j=!0;var W=N;try{for(L(Z),S=s(m);S!==null&&(!(S.expirationTime>Z)||D&&!z());){var b=S.callback;if(typeof b=="function"){S.callback=null,N=S.priorityLevel;var P=b(S.expirationTime<=Z);Z=l.unstable_now(),typeof P=="function"?S.callback=P:S===s(m)&&o(m),L(Z)}else o(m);S=s(m)}if(S!==null)var re=!0;else{var ce=s(v);ce!==null&&X(J,ce.startTime-Z),re=!1}return re}finally{S=null,N=W,j=!1}}var oe=!1,he=null,F=-1,fe=5,be=-1;function z(){return!(l.unstable_now()-be<fe)}function C(){if(he!==null){var D=l.unstable_now();be=D;var Z=!0;try{Z=he(!0,D)}finally{Z?Q():(oe=!1,he=null)}}else oe=!1}var Q;if(typeof U=="function")Q=function(){U(C)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,G=$.port2;$.port1.onmessage=C,Q=function(){G.postMessage(null)}}else Q=function(){E(C,0)};function w(D){he=D,oe||(oe=!0,Q())}function X(D,Z){F=E(function(){D(l.unstable_now())},Z)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(D){D.callback=null},l.unstable_continueExecution=function(){T||j||(T=!0,w(te))},l.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<D?Math.floor(1e3/D):5},l.unstable_getCurrentPriorityLevel=function(){return N},l.unstable_getFirstCallbackNode=function(){return s(m)},l.unstable_next=function(D){switch(N){case 1:case 2:case 3:var Z=3;break;default:Z=N}var W=N;N=Z;try{return D()}finally{N=W}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(D,Z){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=N;N=D;try{return Z()}finally{N=W}},l.unstable_scheduleCallback=function(D,Z,W){var b=l.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?b+W:b):W=b,D){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=W+P,D={id:y++,callback:Z,priorityLevel:D,startTime:W,expirationTime:P,sortIndex:-1},W>b?(D.sortIndex=W,r(v,D),s(m)===null&&D===s(v)&&(O?(H(F),F=-1):O=!0,X(J,W-b))):(D.sortIndex=P,r(m,D),T||j||(T=!0,w(te))),D},l.unstable_shouldYield=z,l.unstable_wrapCallback=function(D){var Z=N;return function(){var W=N;N=Z;try{return D.apply(this,arguments)}finally{N=W}}}})(qa)),qa}var kd;function um(){return kd||(kd=1,Ba.exports=lm()),Ba.exports}var Sd;function cm(){if(Sd)return dt;Sd=1;var l=fl(),r=um();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function c(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},S={};function N(e){return m.call(S,e)?!0:m.call(y,e)?!1:v.test(e)?S[e]=!0:(y[e]=!0,!1)}function j(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function T(e,t,n,i){if(t===null||typeof t>"u"||j(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function O(e,t,n,i,d,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=d,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){E[e]=new O(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];E[t]=new O(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){E[e]=new O(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){E[e]=new O(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){E[e]=new O(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){E[e]=new O(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){E[e]=new O(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){E[e]=new O(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){E[e]=new O(e,5,!1,e.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function U(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(H,U);E[t]=new O(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(H,U);E[t]=new O(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(H,U);E[t]=new O(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){E[e]=new O(e,1,!1,e.toLowerCase(),null,!1,!1)}),E.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){E[e]=new O(e,1,!1,e.toLowerCase(),null,!0,!0)});function L(e,t,n,i){var d=E.hasOwnProperty(t)?E[t]:null;(d!==null?d.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(T(t,n,d,i)&&(n=null),i||d===null?N(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):d.mustUseProperty?e[d.propertyName]=n===null?d.type===3?!1:"":n:(t=d.attributeName,i=d.attributeNamespace,n===null?e.removeAttribute(t):(d=d.type,n=d===3||d===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var J=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,te=Symbol.for("react.element"),oe=Symbol.for("react.portal"),he=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),be=Symbol.for("react.provider"),z=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),D=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var W=Object.assign,b;function P(e){if(b===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);b=t&&t[1]||""}return`
`+b+e}var re=!1;function ce(e,t){if(!e||re)return"";re=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(I){var i=I}Reflect.construct(e,[],t)}else{try{t.call()}catch(I){i=I}e.call(t.prototype)}else{try{throw Error()}catch(I){i=I}e()}}catch(I){if(I&&i&&typeof I.stack=="string"){for(var d=I.stack.split(`
`),f=i.stack.split(`
`),g=d.length-1,x=f.length-1;1<=g&&0<=x&&d[g]!==f[x];)x--;for(;1<=g&&0<=x;g--,x--)if(d[g]!==f[x]){if(g!==1||x!==1)do if(g--,x--,0>x||d[g]!==f[x]){var _=`
`+d[g].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=g&&0<=x);break}}}finally{re=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?P(e):""}function we(e){switch(e.tag){case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return e=ce(e.type,!1),e;case 11:return e=ce(e.type.render,!1),e;case 1:return e=ce(e.type,!0),e;default:return""}}function ve(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case he:return"Fragment";case oe:return"Portal";case fe:return"Profiler";case F:return"StrictMode";case Q:return"Suspense";case $:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case z:return(e.displayName||"Context")+".Consumer";case be:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G:return t=e.displayName||null,t!==null?t:ve(e.type)||"Memo";case w:t=e._payload,e=e._init;try{return ve(e(t))}catch{}}return null}function M(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(t);case 8:return t===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function se(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function je(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ze(e){var t=je(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var d=n.get,f=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(g){i=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $t(e){e._valueTracker||(e._valueTracker=ze(e))}function Bt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=je(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Dt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xs(e,t){var n=t.checked;return W({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ws(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=se(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _e(e,t){t=t.checked,t!=null&&L(e,"checked",t,!1)}function qe(e,t){_e(e,t);var n=se(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ki(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ki(e,t.type,se(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cl(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ki(e,t,n){(t!=="number"||Dt(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Sn=Array.isArray;function zr(e,t,n,i){if(e=e.options,t){t={};for(var d=0;d<n.length;d++)t["$"+n[d]]=!0;for(n=0;n<e.length;n++)d=t.hasOwnProperty("$"+e[n].value),e[n].selected!==d&&(e[n].selected=d),d&&i&&(e[n].defaultSelected=!0)}else{for(n=""+se(n),t=null,d=0;d<e.length;d++){if(e[d].value===n){e[d].selected=!0,i&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Gi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return W({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Tl(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(s(92));if(Sn(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:se(n)}}function Ol(e,t){var n=se(t.value),i=se(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Pl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Rl(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ji(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Rl(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _s,Al=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,d){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_s=_s||document.createElement("div"),_s.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_s.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Nn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var En={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},of=["Webkit","ms","Moz","O"];Object.keys(En).forEach(function(e){of.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),En[t]=En[e]})});function Il(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||En.hasOwnProperty(e)&&En[e]?(""+t).trim():t+"px"}function $l(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,d=Il(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,d):e[n]=d}}var af=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qi(e,t){if(t){if(af[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function Yi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xi=null;function Zi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var eo=null,Fr=null,Br=null;function Dl(e){if(e=Jn(e)){if(typeof eo!="function")throw Error(s(280));var t=e.stateNode;t&&(t=Vs(t),eo(e.stateNode,e.type,t))}}function Ll(e){Fr?Br?Br.push(e):Br=[e]:Fr=e}function Ul(){if(Fr){var e=Fr,t=Br;if(Br=Fr=null,Dl(e),t)for(e=0;e<t.length;e++)Dl(t[e])}}function Ml(e,t){return e(t)}function zl(){}var to=!1;function Fl(e,t,n){if(to)return e(t,n);to=!0;try{return Ml(e,t,n)}finally{to=!1,(Fr!==null||Br!==null)&&(zl(),Ul())}}function Cn(e,t){var n=e.stateNode;if(n===null)return null;var i=Vs(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var ro=!1;if(p)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){ro=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{ro=!1}function lf(e,t,n,i,d,f,g,x,_){var I=Array.prototype.slice.call(arguments,3);try{t.apply(n,I)}catch(q){this.onError(q)}}var On=!1,bs=null,js=!1,no=null,uf={onError:function(e){On=!0,bs=e}};function cf(e,t,n,i,d,f,g,x,_){On=!1,bs=null,lf.apply(uf,arguments)}function df(e,t,n,i,d,f,g,x,_){if(cf.apply(this,arguments),On){if(On){var I=bs;On=!1,bs=null}else throw Error(s(198));js||(js=!0,no=I)}}function wr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Bl(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ql(e){if(wr(e)!==e)throw Error(s(188))}function hf(e){var t=e.alternate;if(!t){if(t=wr(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var d=n.return;if(d===null)break;var f=d.alternate;if(f===null){if(i=d.return,i!==null){n=i;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===n)return ql(d),e;if(f===i)return ql(d),t;f=f.sibling}throw Error(s(188))}if(n.return!==i.return)n=d,i=f;else{for(var g=!1,x=d.child;x;){if(x===n){g=!0,n=d,i=f;break}if(x===i){g=!0,i=d,n=f;break}x=x.sibling}if(!g){for(x=f.child;x;){if(x===n){g=!0,n=f,i=d;break}if(x===i){g=!0,i=f,n=d;break}x=x.sibling}if(!g)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function Vl(e){return e=hf(e),e!==null?Hl(e):null}function Hl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Hl(e);if(t!==null)return t;e=e.sibling}return null}var Wl=r.unstable_scheduleCallback,Kl=r.unstable_cancelCallback,ff=r.unstable_shouldYield,pf=r.unstable_requestPaint,Ue=r.unstable_now,mf=r.unstable_getCurrentPriorityLevel,so=r.unstable_ImmediatePriority,Gl=r.unstable_UserBlockingPriority,ks=r.unstable_NormalPriority,gf=r.unstable_LowPriority,Jl=r.unstable_IdlePriority,Ss=null,Lt=null;function vf(e){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Ss,e,void 0,(e.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:wf,yf=Math.log,xf=Math.LN2;function wf(e){return e>>>=0,e===0?32:31-(yf(e)/xf|0)|0}var Ns=64,Es=4194304;function Pn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cs(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,d=e.suspendedLanes,f=e.pingedLanes,g=n&268435455;if(g!==0){var x=g&~d;x!==0?i=Pn(x):(f&=g,f!==0&&(i=Pn(f)))}else g=n&~d,g!==0?i=Pn(g):f!==0&&(i=Pn(f));if(i===0)return 0;if(t!==0&&t!==i&&(t&d)===0&&(d=i&-i,f=t&-t,d>=f||d===16&&(f&4194240)!==0))return t;if((i&4)!==0&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-St(t),d=1<<n,i|=e[n],t&=~d;return i}function _f(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bf(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-St(f),x=1<<g,_=d[g];_===-1?((x&n)===0||(x&i)!==0)&&(d[g]=_f(x,t)):_<=t&&(e.expiredLanes|=x),f&=~x}}function io(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ql(){var e=Ns;return Ns<<=1,(Ns&4194240)===0&&(Ns=64),e}function oo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Rn(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-St(t),e[t]=n}function jf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var d=31-St(n),f=1<<d;t[d]=0,i[d]=-1,e[d]=-1,n&=~f}}function ao(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-St(n),d=1<<i;d&t|e[i]&t&&(e[i]|=t),n&=~d}}var Ce=0;function Yl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Xl,lo,Zl,eu,tu,uo=!1,Ts=[],Xt=null,Zt=null,er=null,An=new Map,In=new Map,tr=[],kf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ru(e,t){switch(e){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":An.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":In.delete(t.pointerId)}}function $n(e,t,n,i,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:f,targetContainers:[d]},t!==null&&(t=Jn(t),t!==null&&lo(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Sf(e,t,n,i,d){switch(t){case"focusin":return Xt=$n(Xt,e,t,n,i,d),!0;case"dragenter":return Zt=$n(Zt,e,t,n,i,d),!0;case"mouseover":return er=$n(er,e,t,n,i,d),!0;case"pointerover":var f=d.pointerId;return An.set(f,$n(An.get(f)||null,e,t,n,i,d)),!0;case"gotpointercapture":return f=d.pointerId,In.set(f,$n(In.get(f)||null,e,t,n,i,d)),!0}return!1}function nu(e){var t=_r(e.target);if(t!==null){var n=wr(t);if(n!==null){if(t=n.tag,t===13){if(t=Bl(n),t!==null){e.blockedOn=t,tu(e.priority,function(){Zl(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Os(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ho(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Xi=i,n.target.dispatchEvent(i),Xi=null}else return t=Jn(n),t!==null&&lo(t),e.blockedOn=n,!1;t.shift()}return!0}function su(e,t,n){Os(e)&&n.delete(t)}function Nf(){uo=!1,Xt!==null&&Os(Xt)&&(Xt=null),Zt!==null&&Os(Zt)&&(Zt=null),er!==null&&Os(er)&&(er=null),An.forEach(su),In.forEach(su)}function Dn(e,t){e.blockedOn===t&&(e.blockedOn=null,uo||(uo=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Nf)))}function Ln(e){function t(d){return Dn(d,e)}if(0<Ts.length){Dn(Ts[0],e);for(var n=1;n<Ts.length;n++){var i=Ts[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Xt!==null&&Dn(Xt,e),Zt!==null&&Dn(Zt,e),er!==null&&Dn(er,e),An.forEach(t),In.forEach(t),n=0;n<tr.length;n++)i=tr[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<tr.length&&(n=tr[0],n.blockedOn===null);)nu(n),n.blockedOn===null&&tr.shift()}var qr=J.ReactCurrentBatchConfig,Ps=!0;function Ef(e,t,n,i){var d=Ce,f=qr.transition;qr.transition=null;try{Ce=1,co(e,t,n,i)}finally{Ce=d,qr.transition=f}}function Cf(e,t,n,i){var d=Ce,f=qr.transition;qr.transition=null;try{Ce=4,co(e,t,n,i)}finally{Ce=d,qr.transition=f}}function co(e,t,n,i){if(Ps){var d=ho(e,t,n,i);if(d===null)To(e,t,i,Rs,n),ru(e,i);else if(Sf(d,e,t,n,i))i.stopPropagation();else if(ru(e,i),t&4&&-1<kf.indexOf(e)){for(;d!==null;){var f=Jn(d);if(f!==null&&Xl(f),f=ho(e,t,n,i),f===null&&To(e,t,i,Rs,n),f===d)break;d=f}d!==null&&i.stopPropagation()}else To(e,t,i,null,n)}}var Rs=null;function ho(e,t,n,i){if(Rs=null,e=Zi(i),e=_r(e),e!==null)if(t=wr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Bl(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Rs=e,null}function iu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mf()){case so:return 1;case Gl:return 4;case ks:case gf:return 16;case Jl:return 536870912;default:return 16}default:return 16}}var rr=null,fo=null,As=null;function ou(){if(As)return As;var e,t=fo,n=t.length,i,d="value"in rr?rr.value:rr.textContent,f=d.length;for(e=0;e<n&&t[e]===d[e];e++);var g=n-e;for(i=1;i<=g&&t[n-i]===d[f-i];i++);return As=d.slice(e,1<i?1-i:void 0)}function Is(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $s(){return!0}function au(){return!1}function ht(e){function t(n,i,d,f,g){this._reactName=n,this._targetInst=d,this.type=i,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(n=e[x],this[x]=n?n(f):f[x]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?$s:au,this.isPropagationStopped=au,this}return W(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$s)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$s)},persist:function(){},isPersistent:$s}),t}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=ht(Vr),Un=W({},Vr,{view:0,detail:0}),Tf=ht(Un),mo,go,Mn,Ds=W({},Un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mn&&(Mn&&e.type==="mousemove"?(mo=e.screenX-Mn.screenX,go=e.screenY-Mn.screenY):go=mo=0,Mn=e),mo)},movementY:function(e){return"movementY"in e?e.movementY:go}}),lu=ht(Ds),Of=W({},Ds,{dataTransfer:0}),Pf=ht(Of),Rf=W({},Un,{relatedTarget:0}),vo=ht(Rf),Af=W({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),If=ht(Af),$f=W({},Vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Df=ht($f),Lf=W({},Vr,{data:0}),uu=ht(Lf),Uf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ff(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zf[e])?!!t[e]:!1}function yo(){return Ff}var Bf=W({},Un,{key:function(e){if(e.key){var t=Uf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Is(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(e){return e.type==="keypress"?Is(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Is(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qf=ht(Bf),Vf=W({},Ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cu=ht(Vf),Hf=W({},Un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),Wf=ht(Hf),Kf=W({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gf=ht(Kf),Jf=W({},Ds,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qf=ht(Jf),Yf=[9,13,27,32],xo=p&&"CompositionEvent"in window,zn=null;p&&"documentMode"in document&&(zn=document.documentMode);var Xf=p&&"TextEvent"in window&&!zn,du=p&&(!xo||zn&&8<zn&&11>=zn),hu=" ",fu=!1;function pu(e,t){switch(e){case"keyup":return Yf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hr=!1;function Zf(e,t){switch(e){case"compositionend":return mu(t);case"keypress":return t.which!==32?null:(fu=!0,hu);case"textInput":return e=t.data,e===hu&&fu?null:e;default:return null}}function ep(e,t){if(Hr)return e==="compositionend"||!xo&&pu(e,t)?(e=ou(),As=fo=rr=null,Hr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return du&&t.locale!=="ko"?null:t.data;default:return null}}var tp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tp[e.type]:t==="textarea"}function vu(e,t,n,i){Ll(i),t=Fs(t,"onChange"),0<t.length&&(n=new po("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Fn=null,Bn=null;function rp(e){$u(e,0)}function Ls(e){var t=Qr(e);if(Bt(t))return e}function np(e,t){if(e==="change")return t}var yu=!1;if(p){var wo;if(p){var _o="oninput"in document;if(!_o){var xu=document.createElement("div");xu.setAttribute("oninput","return;"),_o=typeof xu.oninput=="function"}wo=_o}else wo=!1;yu=wo&&(!document.documentMode||9<document.documentMode)}function wu(){Fn&&(Fn.detachEvent("onpropertychange",_u),Bn=Fn=null)}function _u(e){if(e.propertyName==="value"&&Ls(Bn)){var t=[];vu(t,Bn,e,Zi(e)),Fl(rp,t)}}function sp(e,t,n){e==="focusin"?(wu(),Fn=t,Bn=n,Fn.attachEvent("onpropertychange",_u)):e==="focusout"&&wu()}function ip(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ls(Bn)}function op(e,t){if(e==="click")return Ls(t)}function ap(e,t){if(e==="input"||e==="change")return Ls(t)}function lp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nt=typeof Object.is=="function"?Object.is:lp;function qn(e,t){if(Nt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var d=n[i];if(!m.call(t,d)||!Nt(e[d],t[d]))return!1}return!0}function bu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ju(e,t){var n=bu(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bu(n)}}function ku(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ku(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Su(){for(var e=window,t=Dt();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Dt(e.document)}return t}function bo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function up(e){var t=Su(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ku(n.ownerDocument.documentElement,n)){if(i!==null&&bo(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=n.textContent.length,f=Math.min(i.start,d);i=i.end===void 0?f:Math.min(i.end,d),!e.extend&&f>i&&(d=i,i=f,f=d),d=ju(n,f);var g=ju(n,i);d&&g&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),f>i?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cp=p&&"documentMode"in document&&11>=document.documentMode,Wr=null,jo=null,Vn=null,ko=!1;function Nu(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ko||Wr==null||Wr!==Dt(i)||(i=Wr,"selectionStart"in i&&bo(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Vn&&qn(Vn,i)||(Vn=i,i=Fs(jo,"onSelect"),0<i.length&&(t=new po("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Wr)))}function Us(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kr={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionend:Us("Transition","TransitionEnd")},So={},Eu={};p&&(Eu=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function Ms(e){if(So[e])return So[e];if(!Kr[e])return e;var t=Kr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Eu)return So[e]=t[n];return e}var Cu=Ms("animationend"),Tu=Ms("animationiteration"),Ou=Ms("animationstart"),Pu=Ms("transitionend"),Ru=new Map,Au="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nr(e,t){Ru.set(e,t),c(t,[e])}for(var No=0;No<Au.length;No++){var Eo=Au[No],dp=Eo.toLowerCase(),hp=Eo[0].toUpperCase()+Eo.slice(1);nr(dp,"on"+hp)}nr(Cu,"onAnimationEnd"),nr(Tu,"onAnimationIteration"),nr(Ou,"onAnimationStart"),nr("dblclick","onDoubleClick"),nr("focusin","onFocus"),nr("focusout","onBlur"),nr(Pu,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hn));function Iu(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,df(i,t,void 0,e),e.currentTarget=null}function $u(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],d=i.event;i=i.listeners;e:{var f=void 0;if(t)for(var g=i.length-1;0<=g;g--){var x=i[g],_=x.instance,I=x.currentTarget;if(x=x.listener,_!==f&&d.isPropagationStopped())break e;Iu(d,x,I),f=_}else for(g=0;g<i.length;g++){if(x=i[g],_=x.instance,I=x.currentTarget,x=x.listener,_!==f&&d.isPropagationStopped())break e;Iu(d,x,I),f=_}}}if(js)throw e=no,js=!1,no=null,e}function Pe(e,t){var n=t[$o];n===void 0&&(n=t[$o]=new Set);var i=e+"__bubble";n.has(i)||(Du(t,e,2,!1),n.add(i))}function Co(e,t,n){var i=0;t&&(i|=4),Du(n,e,i,t)}var zs="_reactListening"+Math.random().toString(36).slice(2);function Wn(e){if(!e[zs]){e[zs]=!0,o.forEach(function(n){n!=="selectionchange"&&(fp.has(n)||Co(n,!1,e),Co(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zs]||(t[zs]=!0,Co("selectionchange",!1,t))}}function Du(e,t,n,i){switch(iu(t)){case 1:var d=Ef;break;case 4:d=Cf;break;default:d=co}n=d.bind(null,t,n,e),d=void 0,!ro||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),i?d!==void 0?e.addEventListener(t,n,{capture:!0,passive:d}):e.addEventListener(t,n,!0):d!==void 0?e.addEventListener(t,n,{passive:d}):e.addEventListener(t,n,!1)}function To(e,t,n,i,d){var f=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var g=i.tag;if(g===3||g===4){var x=i.stateNode.containerInfo;if(x===d||x.nodeType===8&&x.parentNode===d)break;if(g===4)for(g=i.return;g!==null;){var _=g.tag;if((_===3||_===4)&&(_=g.stateNode.containerInfo,_===d||_.nodeType===8&&_.parentNode===d))return;g=g.return}for(;x!==null;){if(g=_r(x),g===null)return;if(_=g.tag,_===5||_===6){i=f=g;continue e}x=x.parentNode}}i=i.return}Fl(function(){var I=f,q=Zi(n),K=[];e:{var B=Ru.get(e);if(B!==void 0){var ee=po,ie=e;switch(e){case"keypress":if(Is(n)===0)break e;case"keydown":case"keyup":ee=qf;break;case"focusin":ie="focus",ee=vo;break;case"focusout":ie="blur",ee=vo;break;case"beforeblur":case"afterblur":ee=vo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Pf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Wf;break;case Cu:case Tu:case Ou:ee=If;break;case Pu:ee=Gf;break;case"scroll":ee=Tf;break;case"wheel":ee=Qf;break;case"copy":case"cut":case"paste":ee=Df;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=cu}var ae=(t&4)!==0,Me=!ae&&e==="scroll",R=ae?B!==null?B+"Capture":null:B;ae=[];for(var k=I,A;k!==null;){A=k;var Y=A.stateNode;if(A.tag===5&&Y!==null&&(A=Y,R!==null&&(Y=Cn(k,R),Y!=null&&ae.push(Kn(k,Y,A)))),Me)break;k=k.return}0<ae.length&&(B=new ee(B,ie,null,n,q),K.push({event:B,listeners:ae}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",ee=e==="mouseout"||e==="pointerout",B&&n!==Xi&&(ie=n.relatedTarget||n.fromElement)&&(_r(ie)||ie[qt]))break e;if((ee||B)&&(B=q.window===q?q:(B=q.ownerDocument)?B.defaultView||B.parentWindow:window,ee?(ie=n.relatedTarget||n.toElement,ee=I,ie=ie?_r(ie):null,ie!==null&&(Me=wr(ie),ie!==Me||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(ee=null,ie=I),ee!==ie)){if(ae=lu,Y="onMouseLeave",R="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(ae=cu,Y="onPointerLeave",R="onPointerEnter",k="pointer"),Me=ee==null?B:Qr(ee),A=ie==null?B:Qr(ie),B=new ae(Y,k+"leave",ee,n,q),B.target=Me,B.relatedTarget=A,Y=null,_r(q)===I&&(ae=new ae(R,k+"enter",ie,n,q),ae.target=A,ae.relatedTarget=Me,Y=ae),Me=Y,ee&&ie)t:{for(ae=ee,R=ie,k=0,A=ae;A;A=Gr(A))k++;for(A=0,Y=R;Y;Y=Gr(Y))A++;for(;0<k-A;)ae=Gr(ae),k--;for(;0<A-k;)R=Gr(R),A--;for(;k--;){if(ae===R||R!==null&&ae===R.alternate)break t;ae=Gr(ae),R=Gr(R)}ae=null}else ae=null;ee!==null&&Lu(K,B,ee,ae,!1),ie!==null&&Me!==null&&Lu(K,Me,ie,ae,!0)}}e:{if(B=I?Qr(I):window,ee=B.nodeName&&B.nodeName.toLowerCase(),ee==="select"||ee==="input"&&B.type==="file")var le=np;else if(gu(B))if(yu)le=ap;else{le=ip;var pe=sp}else(ee=B.nodeName)&&ee.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(le=op);if(le&&(le=le(e,I))){vu(K,le,n,q);break e}pe&&pe(e,B,I),e==="focusout"&&(pe=B._wrapperState)&&pe.controlled&&B.type==="number"&&Ki(B,"number",B.value)}switch(pe=I?Qr(I):window,e){case"focusin":(gu(pe)||pe.contentEditable==="true")&&(Wr=pe,jo=I,Vn=null);break;case"focusout":Vn=jo=Wr=null;break;case"mousedown":ko=!0;break;case"contextmenu":case"mouseup":case"dragend":ko=!1,Nu(K,n,q);break;case"selectionchange":if(cp)break;case"keydown":case"keyup":Nu(K,n,q)}var me;if(xo)e:{switch(e){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Hr?pu(e,n)&&(ye="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ye="onCompositionStart");ye&&(du&&n.locale!=="ko"&&(Hr||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Hr&&(me=ou()):(rr=q,fo="value"in rr?rr.value:rr.textContent,Hr=!0)),pe=Fs(I,ye),0<pe.length&&(ye=new uu(ye,e,null,n,q),K.push({event:ye,listeners:pe}),me?ye.data=me:(me=mu(n),me!==null&&(ye.data=me)))),(me=Xf?Zf(e,n):ep(e,n))&&(I=Fs(I,"onBeforeInput"),0<I.length&&(q=new uu("onBeforeInput","beforeinput",null,n,q),K.push({event:q,listeners:I}),q.data=me))}$u(K,t)})}function Kn(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fs(e,t){for(var n=t+"Capture",i=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Cn(e,n),f!=null&&i.unshift(Kn(e,f,d)),f=Cn(e,t),f!=null&&i.push(Kn(e,f,d))),e=e.return}return i}function Gr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Lu(e,t,n,i,d){for(var f=t._reactName,g=[];n!==null&&n!==i;){var x=n,_=x.alternate,I=x.stateNode;if(_!==null&&_===i)break;x.tag===5&&I!==null&&(x=I,d?(_=Cn(n,f),_!=null&&g.unshift(Kn(n,_,x))):d||(_=Cn(n,f),_!=null&&g.push(Kn(n,_,x)))),n=n.return}g.length!==0&&e.push({event:t,listeners:g})}var pp=/\r\n?/g,mp=/\u0000|\uFFFD/g;function Uu(e){return(typeof e=="string"?e:""+e).replace(pp,`
`).replace(mp,"")}function Bs(e,t,n){if(t=Uu(t),Uu(e)!==t&&n)throw Error(s(425))}function qs(){}var Oo=null,Po=null;function Ro(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ao=typeof setTimeout=="function"?setTimeout:void 0,gp=typeof clearTimeout=="function"?clearTimeout:void 0,Mu=typeof Promise=="function"?Promise:void 0,vp=typeof queueMicrotask=="function"?queueMicrotask:typeof Mu<"u"?function(e){return Mu.resolve(null).then(e).catch(yp)}:Ao;function yp(e){setTimeout(function(){throw e})}function Io(e,t){var n=t,i=0;do{var d=n.nextSibling;if(e.removeChild(n),d&&d.nodeType===8)if(n=d.data,n==="/$"){if(i===0){e.removeChild(d),Ln(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=d}while(n);Ln(t)}function sr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function zu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Jr=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Jr,Gn="__reactProps$"+Jr,qt="__reactContainer$"+Jr,$o="__reactEvents$"+Jr,xp="__reactListeners$"+Jr,wp="__reactHandles$"+Jr;function _r(e){var t=e[Ut];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qt]||n[Ut]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=zu(e);e!==null;){if(n=e[Ut])return n;e=zu(e)}return t}e=n,n=e.parentNode}return null}function Jn(e){return e=e[Ut]||e[qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Vs(e){return e[Gn]||null}var Do=[],Yr=-1;function ir(e){return{current:e}}function Re(e){0>Yr||(e.current=Do[Yr],Do[Yr]=null,Yr--)}function Te(e,t){Yr++,Do[Yr]=e.current,e.current=t}var or={},Ze=ir(or),ot=ir(!1),br=or;function Xr(e,t){var n=e.type.contextTypes;if(!n)return or;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in n)d[f]=t[f];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function at(e){return e=e.childContextTypes,e!=null}function Hs(){Re(ot),Re(Ze)}function Fu(e,t,n){if(Ze.current!==or)throw Error(s(168));Te(Ze,t),Te(ot,n)}function Bu(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var d in i)if(!(d in t))throw Error(s(108,M(e)||"Unknown",d));return W({},n,i)}function Ws(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||or,br=Ze.current,Te(Ze,e),Te(ot,ot.current),!0}function qu(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Bu(e,t,br),i.__reactInternalMemoizedMergedChildContext=e,Re(ot),Re(Ze),Te(Ze,e)):Re(ot),Te(ot,n)}var Vt=null,Ks=!1,Lo=!1;function Vu(e){Vt===null?Vt=[e]:Vt.push(e)}function _p(e){Ks=!0,Vu(e)}function ar(){if(!Lo&&Vt!==null){Lo=!0;var e=0,t=Ce;try{var n=Vt;for(Ce=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}Vt=null,Ks=!1}catch(d){throw Vt!==null&&(Vt=Vt.slice(e+1)),Wl(so,ar),d}finally{Ce=t,Lo=!1}}return null}var Zr=[],en=0,Gs=null,Js=0,xt=[],wt=0,jr=null,Ht=1,Wt="";function kr(e,t){Zr[en++]=Js,Zr[en++]=Gs,Gs=e,Js=t}function Hu(e,t,n){xt[wt++]=Ht,xt[wt++]=Wt,xt[wt++]=jr,jr=e;var i=Ht;e=Wt;var d=32-St(i)-1;i&=~(1<<d),n+=1;var f=32-St(t)+d;if(30<f){var g=d-d%5;f=(i&(1<<g)-1).toString(32),i>>=g,d-=g,Ht=1<<32-St(t)+d|n<<d|i,Wt=f+e}else Ht=1<<f|n<<d|i,Wt=e}function Uo(e){e.return!==null&&(kr(e,1),Hu(e,1,0))}function Mo(e){for(;e===Gs;)Gs=Zr[--en],Zr[en]=null,Js=Zr[--en],Zr[en]=null;for(;e===jr;)jr=xt[--wt],xt[wt]=null,Wt=xt[--wt],xt[wt]=null,Ht=xt[--wt],xt[wt]=null}var ft=null,pt=null,Ae=!1,Et=null;function Wu(e,t){var n=kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ku(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ft=e,pt=sr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ft=e,pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=jr!==null?{id:Ht,overflow:Wt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ft=e,pt=null,!0):!1;default:return!1}}function zo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fo(e){if(Ae){var t=pt;if(t){var n=t;if(!Ku(e,t)){if(zo(e))throw Error(s(418));t=sr(n.nextSibling);var i=ft;t&&Ku(e,t)?Wu(i,n):(e.flags=e.flags&-4097|2,Ae=!1,ft=e)}}else{if(zo(e))throw Error(s(418));e.flags=e.flags&-4097|2,Ae=!1,ft=e}}}function Gu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ft=e}function Qs(e){if(e!==ft)return!1;if(!Ae)return Gu(e),Ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ro(e.type,e.memoizedProps)),t&&(t=pt)){if(zo(e))throw Ju(),Error(s(418));for(;t;)Wu(e,t),t=sr(t.nextSibling)}if(Gu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){pt=sr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}pt=null}}else pt=ft?sr(e.stateNode.nextSibling):null;return!0}function Ju(){for(var e=pt;e;)e=sr(e.nextSibling)}function tn(){pt=ft=null,Ae=!1}function Bo(e){Et===null?Et=[e]:Et.push(e)}var bp=J.ReactCurrentBatchConfig;function Qn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var d=i,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var x=d.refs;g===null?delete x[f]:x[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qu(e){var t=e._init;return t(e._payload)}function Yu(e){function t(R,k){if(e){var A=R.deletions;A===null?(R.deletions=[k],R.flags|=16):A.push(k)}}function n(R,k){if(!e)return null;for(;k!==null;)t(R,k),k=k.sibling;return null}function i(R,k){for(R=new Map;k!==null;)k.key!==null?R.set(k.key,k):R.set(k.index,k),k=k.sibling;return R}function d(R,k){return R=mr(R,k),R.index=0,R.sibling=null,R}function f(R,k,A){return R.index=A,e?(A=R.alternate,A!==null?(A=A.index,A<k?(R.flags|=2,k):A):(R.flags|=2,k)):(R.flags|=1048576,k)}function g(R){return e&&R.alternate===null&&(R.flags|=2),R}function x(R,k,A,Y){return k===null||k.tag!==6?(k=Aa(A,R.mode,Y),k.return=R,k):(k=d(k,A),k.return=R,k)}function _(R,k,A,Y){var le=A.type;return le===he?q(R,k,A.props.children,Y,A.key):k!==null&&(k.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===w&&Qu(le)===k.type)?(Y=d(k,A.props),Y.ref=Qn(R,k,A),Y.return=R,Y):(Y=_i(A.type,A.key,A.props,null,R.mode,Y),Y.ref=Qn(R,k,A),Y.return=R,Y)}function I(R,k,A,Y){return k===null||k.tag!==4||k.stateNode.containerInfo!==A.containerInfo||k.stateNode.implementation!==A.implementation?(k=Ia(A,R.mode,Y),k.return=R,k):(k=d(k,A.children||[]),k.return=R,k)}function q(R,k,A,Y,le){return k===null||k.tag!==7?(k=Rr(A,R.mode,Y,le),k.return=R,k):(k=d(k,A),k.return=R,k)}function K(R,k,A){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Aa(""+k,R.mode,A),k.return=R,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case te:return A=_i(k.type,k.key,k.props,null,R.mode,A),A.ref=Qn(R,null,k),A.return=R,A;case oe:return k=Ia(k,R.mode,A),k.return=R,k;case w:var Y=k._init;return K(R,Y(k._payload),A)}if(Sn(k)||Z(k))return k=Rr(k,R.mode,A,null),k.return=R,k;Ys(R,k)}return null}function B(R,k,A,Y){var le=k!==null?k.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return le!==null?null:x(R,k,""+A,Y);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case te:return A.key===le?_(R,k,A,Y):null;case oe:return A.key===le?I(R,k,A,Y):null;case w:return le=A._init,B(R,k,le(A._payload),Y)}if(Sn(A)||Z(A))return le!==null?null:q(R,k,A,Y,null);Ys(R,A)}return null}function ee(R,k,A,Y,le){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return R=R.get(A)||null,x(k,R,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case te:return R=R.get(Y.key===null?A:Y.key)||null,_(k,R,Y,le);case oe:return R=R.get(Y.key===null?A:Y.key)||null,I(k,R,Y,le);case w:var pe=Y._init;return ee(R,k,A,pe(Y._payload),le)}if(Sn(Y)||Z(Y))return R=R.get(A)||null,q(k,R,Y,le,null);Ys(k,Y)}return null}function ie(R,k,A,Y){for(var le=null,pe=null,me=k,ye=k=0,Je=null;me!==null&&ye<A.length;ye++){me.index>ye?(Je=me,me=null):Je=me.sibling;var Ne=B(R,me,A[ye],Y);if(Ne===null){me===null&&(me=Je);break}e&&me&&Ne.alternate===null&&t(R,me),k=f(Ne,k,ye),pe===null?le=Ne:pe.sibling=Ne,pe=Ne,me=Je}if(ye===A.length)return n(R,me),Ae&&kr(R,ye),le;if(me===null){for(;ye<A.length;ye++)me=K(R,A[ye],Y),me!==null&&(k=f(me,k,ye),pe===null?le=me:pe.sibling=me,pe=me);return Ae&&kr(R,ye),le}for(me=i(R,me);ye<A.length;ye++)Je=ee(me,R,ye,A[ye],Y),Je!==null&&(e&&Je.alternate!==null&&me.delete(Je.key===null?ye:Je.key),k=f(Je,k,ye),pe===null?le=Je:pe.sibling=Je,pe=Je);return e&&me.forEach(function(gr){return t(R,gr)}),Ae&&kr(R,ye),le}function ae(R,k,A,Y){var le=Z(A);if(typeof le!="function")throw Error(s(150));if(A=le.call(A),A==null)throw Error(s(151));for(var pe=le=null,me=k,ye=k=0,Je=null,Ne=A.next();me!==null&&!Ne.done;ye++,Ne=A.next()){me.index>ye?(Je=me,me=null):Je=me.sibling;var gr=B(R,me,Ne.value,Y);if(gr===null){me===null&&(me=Je);break}e&&me&&gr.alternate===null&&t(R,me),k=f(gr,k,ye),pe===null?le=gr:pe.sibling=gr,pe=gr,me=Je}if(Ne.done)return n(R,me),Ae&&kr(R,ye),le;if(me===null){for(;!Ne.done;ye++,Ne=A.next())Ne=K(R,Ne.value,Y),Ne!==null&&(k=f(Ne,k,ye),pe===null?le=Ne:pe.sibling=Ne,pe=Ne);return Ae&&kr(R,ye),le}for(me=i(R,me);!Ne.done;ye++,Ne=A.next())Ne=ee(me,R,ye,Ne.value,Y),Ne!==null&&(e&&Ne.alternate!==null&&me.delete(Ne.key===null?ye:Ne.key),k=f(Ne,k,ye),pe===null?le=Ne:pe.sibling=Ne,pe=Ne);return e&&me.forEach(function(tm){return t(R,tm)}),Ae&&kr(R,ye),le}function Me(R,k,A,Y){if(typeof A=="object"&&A!==null&&A.type===he&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case te:e:{for(var le=A.key,pe=k;pe!==null;){if(pe.key===le){if(le=A.type,le===he){if(pe.tag===7){n(R,pe.sibling),k=d(pe,A.props.children),k.return=R,R=k;break e}}else if(pe.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===w&&Qu(le)===pe.type){n(R,pe.sibling),k=d(pe,A.props),k.ref=Qn(R,pe,A),k.return=R,R=k;break e}n(R,pe);break}else t(R,pe);pe=pe.sibling}A.type===he?(k=Rr(A.props.children,R.mode,Y,A.key),k.return=R,R=k):(Y=_i(A.type,A.key,A.props,null,R.mode,Y),Y.ref=Qn(R,k,A),Y.return=R,R=Y)}return g(R);case oe:e:{for(pe=A.key;k!==null;){if(k.key===pe)if(k.tag===4&&k.stateNode.containerInfo===A.containerInfo&&k.stateNode.implementation===A.implementation){n(R,k.sibling),k=d(k,A.children||[]),k.return=R,R=k;break e}else{n(R,k);break}else t(R,k);k=k.sibling}k=Ia(A,R.mode,Y),k.return=R,R=k}return g(R);case w:return pe=A._init,Me(R,k,pe(A._payload),Y)}if(Sn(A))return ie(R,k,A,Y);if(Z(A))return ae(R,k,A,Y);Ys(R,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,k!==null&&k.tag===6?(n(R,k.sibling),k=d(k,A),k.return=R,R=k):(n(R,k),k=Aa(A,R.mode,Y),k.return=R,R=k),g(R)):n(R,k)}return Me}var rn=Yu(!0),Xu=Yu(!1),Xs=ir(null),Zs=null,nn=null,qo=null;function Vo(){qo=nn=Zs=null}function Ho(e){var t=Xs.current;Re(Xs),e._currentValue=t}function Wo(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function sn(e,t){Zs=e,qo=nn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(lt=!0),e.firstContext=null)}function _t(e){var t=e._currentValue;if(qo!==e)if(e={context:e,memoizedValue:t,next:null},nn===null){if(Zs===null)throw Error(s(308));nn=e,Zs.dependencies={lanes:0,firstContext:e}}else nn=nn.next=e;return t}var Sr=null;function Ko(e){Sr===null?Sr=[e]:Sr.push(e)}function Zu(e,t,n,i){var d=t.interleaved;return d===null?(n.next=n,Ko(t)):(n.next=d.next,d.next=n),t.interleaved=n,Kt(e,i)}function Kt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var lr=!1;function Go(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ec(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ur(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Se&2)!==0){var d=i.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),i.pending=t,Kt(e,n)}return d=i.interleaved,d===null?(t.next=t,Ko(i)):(t.next=d.next,d.next=t),i.interleaved=t,Kt(e,n)}function ei(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ao(e,n)}}function tc(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var d=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var g={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};f===null?d=f=g:f=f.next=g,n=n.next}while(n!==null);f===null?d=f=t:f=f.next=t}else d=f=t;n={baseState:i.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ti(e,t,n,i){var d=e.updateQueue;lr=!1;var f=d.firstBaseUpdate,g=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var _=x,I=_.next;_.next=null,g===null?f=I:g.next=I,g=_;var q=e.alternate;q!==null&&(q=q.updateQueue,x=q.lastBaseUpdate,x!==g&&(x===null?q.firstBaseUpdate=I:x.next=I,q.lastBaseUpdate=_))}if(f!==null){var K=d.baseState;g=0,q=I=_=null,x=f;do{var B=x.lane,ee=x.eventTime;if((i&B)===B){q!==null&&(q=q.next={eventTime:ee,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var ie=e,ae=x;switch(B=t,ee=n,ae.tag){case 1:if(ie=ae.payload,typeof ie=="function"){K=ie.call(ee,K,B);break e}K=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=ae.payload,B=typeof ie=="function"?ie.call(ee,K,B):ie,B==null)break e;K=W({},K,B);break e;case 2:lr=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,B=d.effects,B===null?d.effects=[x]:B.push(x))}else ee={eventTime:ee,lane:B,tag:x.tag,payload:x.payload,callback:x.callback,next:null},q===null?(I=q=ee,_=K):q=q.next=ee,g|=B;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;B=x,x=B.next,B.next=null,d.lastBaseUpdate=B,d.shared.pending=null}}while(!0);if(q===null&&(_=K),d.baseState=_,d.firstBaseUpdate=I,d.lastBaseUpdate=q,t=d.shared.interleaved,t!==null){d=t;do g|=d.lane,d=d.next;while(d!==t)}else f===null&&(d.shared.lanes=0);Cr|=g,e.lanes=g,e.memoizedState=K}}function rc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],d=i.callback;if(d!==null){if(i.callback=null,i=n,typeof d!="function")throw Error(s(191,d));d.call(i)}}}var Yn={},Mt=ir(Yn),Xn=ir(Yn),Zn=ir(Yn);function Nr(e){if(e===Yn)throw Error(s(174));return e}function Jo(e,t){switch(Te(Zn,t),Te(Xn,e),Te(Mt,Yn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ji(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ji(t,e)}Re(Mt),Te(Mt,t)}function on(){Re(Mt),Re(Xn),Re(Zn)}function nc(e){Nr(Zn.current);var t=Nr(Mt.current),n=Ji(t,e.type);t!==n&&(Te(Xn,e),Te(Mt,n))}function Qo(e){Xn.current===e&&(Re(Mt),Re(Xn))}var Ie=ir(0);function ri(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yo=[];function Xo(){for(var e=0;e<Yo.length;e++)Yo[e]._workInProgressVersionPrimary=null;Yo.length=0}var ni=J.ReactCurrentDispatcher,Zo=J.ReactCurrentBatchConfig,Er=0,$e=null,Ve=null,Ke=null,si=!1,es=!1,ts=0,jp=0;function et(){throw Error(s(321))}function ea(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Nt(e[n],t[n]))return!1;return!0}function ta(e,t,n,i,d,f){if(Er=f,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=e===null||e.memoizedState===null?Ep:Cp,e=n(i,d),es){f=0;do{if(es=!1,ts=0,25<=f)throw Error(s(301));f+=1,Ke=Ve=null,t.updateQueue=null,ni.current=Tp,e=n(i,d)}while(es)}if(ni.current=ai,t=Ve!==null&&Ve.next!==null,Er=0,Ke=Ve=$e=null,si=!1,t)throw Error(s(300));return e}function ra(){var e=ts!==0;return ts=0,e}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?$e.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function bt(){if(Ve===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=Ke===null?$e.memoizedState:Ke.next;if(t!==null)Ke=t,Ve=e;else{if(e===null)throw Error(s(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Ke===null?$e.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function rs(e,t){return typeof t=="function"?t(e):t}function na(e){var t=bt(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var i=Ve,d=i.baseQueue,f=n.pending;if(f!==null){if(d!==null){var g=d.next;d.next=f.next,f.next=g}i.baseQueue=d=f,n.pending=null}if(d!==null){f=d.next,i=i.baseState;var x=g=null,_=null,I=f;do{var q=I.lane;if((Er&q)===q)_!==null&&(_=_.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),i=I.hasEagerState?I.eagerState:e(i,I.action);else{var K={lane:q,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};_===null?(x=_=K,g=i):_=_.next=K,$e.lanes|=q,Cr|=q}I=I.next}while(I!==null&&I!==f);_===null?g=i:_.next=x,Nt(i,t.memoizedState)||(lt=!0),t.memoizedState=i,t.baseState=g,t.baseQueue=_,n.lastRenderedState=i}if(e=n.interleaved,e!==null){d=e;do f=d.lane,$e.lanes|=f,Cr|=f,d=d.next;while(d!==e)}else d===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function sa(e){var t=bt(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,d=n.pending,f=t.memoizedState;if(d!==null){n.pending=null;var g=d=d.next;do f=e(f,g.action),g=g.next;while(g!==d);Nt(f,t.memoizedState)||(lt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,i]}function sc(){}function ic(e,t){var n=$e,i=bt(),d=t(),f=!Nt(i.memoizedState,d);if(f&&(i.memoizedState=d,lt=!0),i=i.queue,ia(lc.bind(null,n,i,e),[e]),i.getSnapshot!==t||f||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,ns(9,ac.bind(null,n,i,d,t),void 0,null),Ge===null)throw Error(s(349));(Er&30)!==0||oc(n,t,d)}return d}function oc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ac(e,t,n,i){t.value=n,t.getSnapshot=i,uc(t)&&cc(e)}function lc(e,t,n){return n(function(){uc(t)&&cc(e)})}function uc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nt(e,n)}catch{return!0}}function cc(e){var t=Kt(e,1);t!==null&&Pt(t,e,1,-1)}function dc(e){var t=zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e},t.queue=e,e=e.dispatch=Np.bind(null,$e,e),[t.memoizedState,e]}function ns(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function hc(){return bt().memoizedState}function ii(e,t,n,i){var d=zt();$e.flags|=e,d.memoizedState=ns(1|t,n,void 0,i===void 0?null:i)}function oi(e,t,n,i){var d=bt();i=i===void 0?null:i;var f=void 0;if(Ve!==null){var g=Ve.memoizedState;if(f=g.destroy,i!==null&&ea(i,g.deps)){d.memoizedState=ns(t,n,f,i);return}}$e.flags|=e,d.memoizedState=ns(1|t,n,f,i)}function fc(e,t){return ii(8390656,8,e,t)}function ia(e,t){return oi(2048,8,e,t)}function pc(e,t){return oi(4,2,e,t)}function mc(e,t){return oi(4,4,e,t)}function gc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vc(e,t,n){return n=n!=null?n.concat([e]):null,oi(4,4,gc.bind(null,t,e),n)}function oa(){}function yc(e,t){var n=bt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&ea(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function xc(e,t){var n=bt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&ea(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function wc(e,t,n){return(Er&21)===0?(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=n):(Nt(n,t)||(n=Ql(),$e.lanes|=n,Cr|=n,e.baseState=!0),t)}function kp(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var i=Zo.transition;Zo.transition={};try{e(!1),t()}finally{Ce=n,Zo.transition=i}}function _c(){return bt().memoizedState}function Sp(e,t,n){var i=fr(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},bc(e))jc(t,n);else if(n=Zu(e,t,n,i),n!==null){var d=it();Pt(n,e,i,d),kc(n,t,i)}}function Np(e,t,n){var i=fr(e),d={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(bc(e))jc(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,x=f(g,n);if(d.hasEagerState=!0,d.eagerState=x,Nt(x,g)){var _=t.interleaved;_===null?(d.next=d,Ko(t)):(d.next=_.next,_.next=d),t.interleaved=d;return}}catch{}finally{}n=Zu(e,t,d,i),n!==null&&(d=it(),Pt(n,e,i,d),kc(n,t,i))}}function bc(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function jc(e,t){es=si=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function kc(e,t,n){if((n&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ao(e,n)}}var ai={readContext:_t,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Ep={readContext:_t,useCallback:function(e,t){return zt().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:fc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ii(4194308,4,gc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return ii(4,2,e,t)},useMemo:function(e,t){var n=zt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=zt();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Sp.bind(null,$e,e),[i.memoizedState,e]},useRef:function(e){var t=zt();return e={current:e},t.memoizedState=e},useState:dc,useDebugValue:oa,useDeferredValue:function(e){return zt().memoizedState=e},useTransition:function(){var e=dc(!1),t=e[0];return e=kp.bind(null,e[1]),zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=$e,d=zt();if(Ae){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),Ge===null)throw Error(s(349));(Er&30)!==0||oc(i,t,n)}d.memoizedState=n;var f={value:n,getSnapshot:t};return d.queue=f,fc(lc.bind(null,i,f,e),[e]),i.flags|=2048,ns(9,ac.bind(null,i,f,n,t),void 0,null),n},useId:function(){var e=zt(),t=Ge.identifierPrefix;if(Ae){var n=Wt,i=Ht;n=(i&~(1<<32-St(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=ts++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=jp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Cp={readContext:_t,useCallback:yc,useContext:_t,useEffect:ia,useImperativeHandle:vc,useInsertionEffect:pc,useLayoutEffect:mc,useMemo:xc,useReducer:na,useRef:hc,useState:function(){return na(rs)},useDebugValue:oa,useDeferredValue:function(e){var t=bt();return wc(t,Ve.memoizedState,e)},useTransition:function(){var e=na(rs)[0],t=bt().memoizedState;return[e,t]},useMutableSource:sc,useSyncExternalStore:ic,useId:_c,unstable_isNewReconciler:!1},Tp={readContext:_t,useCallback:yc,useContext:_t,useEffect:ia,useImperativeHandle:vc,useInsertionEffect:pc,useLayoutEffect:mc,useMemo:xc,useReducer:sa,useRef:hc,useState:function(){return sa(rs)},useDebugValue:oa,useDeferredValue:function(e){var t=bt();return Ve===null?t.memoizedState=e:wc(t,Ve.memoizedState,e)},useTransition:function(){var e=sa(rs)[0],t=bt().memoizedState;return[e,t]},useMutableSource:sc,useSyncExternalStore:ic,useId:_c,unstable_isNewReconciler:!1};function Ct(e,t){if(e&&e.defaultProps){t=W({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function aa(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:W({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var li={isMounted:function(e){return(e=e._reactInternals)?wr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=it(),d=fr(e),f=Gt(i,d);f.payload=t,n!=null&&(f.callback=n),t=ur(e,f,d),t!==null&&(Pt(t,e,d,i),ei(t,e,d))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=it(),d=fr(e),f=Gt(i,d);f.tag=1,f.payload=t,n!=null&&(f.callback=n),t=ur(e,f,d),t!==null&&(Pt(t,e,d,i),ei(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=it(),i=fr(e),d=Gt(n,i);d.tag=2,t!=null&&(d.callback=t),t=ur(e,d,i),t!==null&&(Pt(t,e,i,n),ei(t,e,i))}};function Sc(e,t,n,i,d,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,f,g):t.prototype&&t.prototype.isPureReactComponent?!qn(n,i)||!qn(d,f):!0}function Nc(e,t,n){var i=!1,d=or,f=t.contextType;return typeof f=="object"&&f!==null?f=_t(f):(d=at(t)?br:Ze.current,i=t.contextTypes,f=(i=i!=null)?Xr(e,d):or),t=new t(n,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=li,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),t}function Ec(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&li.enqueueReplaceState(t,t.state,null)}function la(e,t,n,i){var d=e.stateNode;d.props=n,d.state=e.memoizedState,d.refs={},Go(e);var f=t.contextType;typeof f=="object"&&f!==null?d.context=_t(f):(f=at(t)?br:Ze.current,d.context=Xr(e,f)),d.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(aa(e,t,f,n),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&li.enqueueReplaceState(d,d.state,null),ti(e,n,d,i),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function an(e,t){try{var n="",i=t;do n+=we(i),i=i.return;while(i);var d=n}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:d,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ca(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Op=typeof WeakMap=="function"?WeakMap:Map;function Cc(e,t,n){n=Gt(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){mi||(mi=!0,Sa=i),ca(e,t)},n}function Tc(e,t,n){n=Gt(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var d=t.value;n.payload=function(){return i(d)},n.callback=function(){ca(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(n.callback=function(){ca(e,t),typeof i!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),n}function Oc(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Op;var d=new Set;i.set(t,d)}else d=i.get(t),d===void 0&&(d=new Set,i.set(t,d));d.has(n)||(d.add(n),e=Vp.bind(null,e,t,n),t.then(e,e))}function Pc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rc(e,t,n,i,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Gt(-1,1),t.tag=2,ur(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Pp=J.ReactCurrentOwner,lt=!1;function st(e,t,n,i){t.child=e===null?Xu(t,null,n,i):rn(t,e.child,n,i)}function Ac(e,t,n,i,d){n=n.render;var f=t.ref;return sn(t,d),i=ta(e,t,n,i,f,d),n=ra(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Jt(e,t,d)):(Ae&&n&&Uo(t),t.flags|=1,st(e,t,i,d),t.child)}function Ic(e,t,n,i,d){if(e===null){var f=n.type;return typeof f=="function"&&!Ra(f)&&f.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=f,$c(e,t,f,i,d)):(e=_i(n.type,null,i,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&d)===0){var g=f.memoizedProps;if(n=n.compare,n=n!==null?n:qn,n(g,i)&&e.ref===t.ref)return Jt(e,t,d)}return t.flags|=1,e=mr(f,i),e.ref=t.ref,e.return=t,t.child=e}function $c(e,t,n,i,d){if(e!==null){var f=e.memoizedProps;if(qn(f,i)&&e.ref===t.ref)if(lt=!1,t.pendingProps=i=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(lt=!0);else return t.lanes=e.lanes,Jt(e,t,d)}return da(e,t,n,i,d)}function Dc(e,t,n){var i=t.pendingProps,d=i.children,f=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(un,mt),mt|=n;else{if((n&1073741824)===0)return e=f!==null?f.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(un,mt),mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=f!==null?f.baseLanes:n,Te(un,mt),mt|=i}else f!==null?(i=f.baseLanes|n,t.memoizedState=null):i=n,Te(un,mt),mt|=i;return st(e,t,d,n),t.child}function Lc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function da(e,t,n,i,d){var f=at(n)?br:Ze.current;return f=Xr(t,f),sn(t,d),n=ta(e,t,n,i,f,d),i=ra(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Jt(e,t,d)):(Ae&&i&&Uo(t),t.flags|=1,st(e,t,n,d),t.child)}function Uc(e,t,n,i,d){if(at(n)){var f=!0;Ws(t)}else f=!1;if(sn(t,d),t.stateNode===null)ci(e,t),Nc(t,n,i),la(t,n,i,d),i=!0;else if(e===null){var g=t.stateNode,x=t.memoizedProps;g.props=x;var _=g.context,I=n.contextType;typeof I=="object"&&I!==null?I=_t(I):(I=at(n)?br:Ze.current,I=Xr(t,I));var q=n.getDerivedStateFromProps,K=typeof q=="function"||typeof g.getSnapshotBeforeUpdate=="function";K||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==i||_!==I)&&Ec(t,g,i,I),lr=!1;var B=t.memoizedState;g.state=B,ti(t,i,g,d),_=t.memoizedState,x!==i||B!==_||ot.current||lr?(typeof q=="function"&&(aa(t,n,q,i),_=t.memoizedState),(x=lr||Sc(t,n,x,i,B,_,I))?(K||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=_),g.props=i,g.state=_,g.context=I,i=x):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{g=t.stateNode,ec(e,t),x=t.memoizedProps,I=t.type===t.elementType?x:Ct(t.type,x),g.props=I,K=t.pendingProps,B=g.context,_=n.contextType,typeof _=="object"&&_!==null?_=_t(_):(_=at(n)?br:Ze.current,_=Xr(t,_));var ee=n.getDerivedStateFromProps;(q=typeof ee=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==K||B!==_)&&Ec(t,g,i,_),lr=!1,B=t.memoizedState,g.state=B,ti(t,i,g,d);var ie=t.memoizedState;x!==K||B!==ie||ot.current||lr?(typeof ee=="function"&&(aa(t,n,ee,i),ie=t.memoizedState),(I=lr||Sc(t,n,I,i,B,ie,_)||!1)?(q||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(i,ie,_),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(i,ie,_)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=ie),g.props=i,g.state=ie,g.context=_,i=I):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),i=!1)}return ha(e,t,n,i,f,d)}function ha(e,t,n,i,d,f){Lc(e,t);var g=(t.flags&128)!==0;if(!i&&!g)return d&&qu(t,n,!1),Jt(e,t,f);i=t.stateNode,Pp.current=t;var x=g&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&g?(t.child=rn(t,e.child,null,f),t.child=rn(t,null,x,f)):st(e,t,x,f),t.memoizedState=i.state,d&&qu(t,n,!0),t.child}function Mc(e){var t=e.stateNode;t.pendingContext?Fu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fu(e,t.context,!1),Jo(e,t.containerInfo)}function zc(e,t,n,i,d){return tn(),Bo(d),t.flags|=256,st(e,t,n,i),t.child}var fa={dehydrated:null,treeContext:null,retryLane:0};function pa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fc(e,t,n){var i=t.pendingProps,d=Ie.current,f=!1,g=(t.flags&128)!==0,x;if((x=g)||(x=e!==null&&e.memoizedState===null?!1:(d&2)!==0),x?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Te(Ie,d&1),e===null)return Fo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=i.children,e=i.fallback,f?(i=t.mode,f=t.child,g={mode:"hidden",children:g},(i&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=bi(g,i,0,null),e=Rr(e,i,n,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=pa(n),t.memoizedState=fa,e):ma(t,g));if(d=e.memoizedState,d!==null&&(x=d.dehydrated,x!==null))return Rp(e,t,g,i,x,d,n);if(f){f=i.fallback,g=t.mode,d=e.child,x=d.sibling;var _={mode:"hidden",children:i.children};return(g&1)===0&&t.child!==d?(i=t.child,i.childLanes=0,i.pendingProps=_,t.deletions=null):(i=mr(d,_),i.subtreeFlags=d.subtreeFlags&14680064),x!==null?f=mr(x,f):(f=Rr(f,g,n,null),f.flags|=2),f.return=t,i.return=t,i.sibling=f,t.child=i,i=f,f=t.child,g=e.child.memoizedState,g=g===null?pa(n):{baseLanes:g.baseLanes|n,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~n,t.memoizedState=fa,i}return f=e.child,e=f.sibling,i=mr(f,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ma(e,t){return t=bi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ui(e,t,n,i){return i!==null&&Bo(i),rn(t,e.child,null,n),e=ma(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rp(e,t,n,i,d,f,g){if(n)return t.flags&256?(t.flags&=-257,i=ua(Error(s(422))),ui(e,t,g,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=i.fallback,d=t.mode,i=bi({mode:"visible",children:i.children},d,0,null),f=Rr(f,d,g,null),f.flags|=2,i.return=t,f.return=t,i.sibling=f,t.child=i,(t.mode&1)!==0&&rn(t,e.child,null,g),t.child.memoizedState=pa(g),t.memoizedState=fa,f);if((t.mode&1)===0)return ui(e,t,g,null);if(d.data==="$!"){if(i=d.nextSibling&&d.nextSibling.dataset,i)var x=i.dgst;return i=x,f=Error(s(419)),i=ua(f,i,void 0),ui(e,t,g,i)}if(x=(g&e.childLanes)!==0,lt||x){if(i=Ge,i!==null){switch(g&-g){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(i.suspendedLanes|g))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Kt(e,d),Pt(i,e,d,-1))}return Pa(),i=ua(Error(s(421))),ui(e,t,g,i)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=Hp.bind(null,e),d._reactRetry=t,null):(e=f.treeContext,pt=sr(d.nextSibling),ft=t,Ae=!0,Et=null,e!==null&&(xt[wt++]=Ht,xt[wt++]=Wt,xt[wt++]=jr,Ht=e.id,Wt=e.overflow,jr=t),t=ma(t,i.children),t.flags|=4096,t)}function Bc(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Wo(e.return,t,n)}function ga(e,t,n,i,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=n,f.tailMode=d)}function qc(e,t,n){var i=t.pendingProps,d=i.revealOrder,f=i.tail;if(st(e,t,i.children,n),i=Ie.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bc(e,n,t);else if(e.tag===19)Bc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Te(Ie,i),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(n=t.child,d=null;n!==null;)e=n.alternate,e!==null&&ri(e)===null&&(d=n),n=n.sibling;n=d,n===null?(d=t.child,t.child=null):(d=n.sibling,n.sibling=null),ga(t,!1,d,n,f);break;case"backwards":for(n=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&ri(e)===null){t.child=d;break}e=d.sibling,d.sibling=n,n=d,d=e}ga(t,!0,n,null,f);break;case"together":ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ci(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Cr|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=mr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ap(e,t,n){switch(t.tag){case 3:Mc(t),tn();break;case 5:nc(t);break;case 1:at(t.type)&&Ws(t);break;case 4:Jo(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,d=t.memoizedProps.value;Te(Xs,i._currentValue),i._currentValue=d;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Te(Ie,Ie.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Fc(e,t,n):(Te(Ie,Ie.current&1),e=Jt(e,t,n),e!==null?e.sibling:null);Te(Ie,Ie.current&1);break;case 19:if(i=(n&t.childLanes)!==0,(e.flags&128)!==0){if(i)return qc(e,t,n);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Te(Ie,Ie.current),i)break;return null;case 22:case 23:return t.lanes=0,Dc(e,t,n)}return Jt(e,t,n)}var Vc,va,Hc,Wc;Vc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},va=function(){},Hc=function(e,t,n,i){var d=e.memoizedProps;if(d!==i){e=t.stateNode,Nr(Mt.current);var f=null;switch(n){case"input":d=xs(e,d),i=xs(e,i),f=[];break;case"select":d=W({},d,{value:void 0}),i=W({},i,{value:void 0}),f=[];break;case"textarea":d=Gi(e,d),i=Gi(e,i),f=[];break;default:typeof d.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=qs)}Qi(n,i);var g;n=null;for(I in d)if(!i.hasOwnProperty(I)&&d.hasOwnProperty(I)&&d[I]!=null)if(I==="style"){var x=d[I];for(g in x)x.hasOwnProperty(g)&&(n||(n={}),n[g]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(u.hasOwnProperty(I)?f||(f=[]):(f=f||[]).push(I,null));for(I in i){var _=i[I];if(x=d?.[I],i.hasOwnProperty(I)&&_!==x&&(_!=null||x!=null))if(I==="style")if(x){for(g in x)!x.hasOwnProperty(g)||_&&_.hasOwnProperty(g)||(n||(n={}),n[g]="");for(g in _)_.hasOwnProperty(g)&&x[g]!==_[g]&&(n||(n={}),n[g]=_[g])}else n||(f||(f=[]),f.push(I,n)),n=_;else I==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,x=x?x.__html:void 0,_!=null&&x!==_&&(f=f||[]).push(I,_)):I==="children"?typeof _!="string"&&typeof _!="number"||(f=f||[]).push(I,""+_):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(u.hasOwnProperty(I)?(_!=null&&I==="onScroll"&&Pe("scroll",e),f||x===_||(f=[])):(f=f||[]).push(I,_))}n&&(f=f||[]).push("style",n);var I=f;(t.updateQueue=I)&&(t.flags|=4)}},Wc=function(e,t,n,i){n!==i&&(t.flags|=4)};function ss(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var d=e.child;d!==null;)n|=d.lanes|d.childLanes,i|=d.subtreeFlags&14680064,i|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)n|=d.lanes|d.childLanes,i|=d.subtreeFlags,i|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ip(e,t,n){var i=t.pendingProps;switch(Mo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return at(t.type)&&Hs(),tt(t),null;case 3:return i=t.stateNode,on(),Re(ot),Re(Ze),Xo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Qs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Et!==null&&(Ca(Et),Et=null))),va(e,t),tt(t),null;case 5:Qo(t);var d=Nr(Zn.current);if(n=t.type,e!==null&&t.stateNode!=null)Hc(e,t,n,i,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(s(166));return tt(t),null}if(e=Nr(Mt.current),Qs(t)){i=t.stateNode,n=t.type;var f=t.memoizedProps;switch(i[Ut]=t,i[Gn]=f,e=(t.mode&1)!==0,n){case"dialog":Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":case"embed":Pe("load",i);break;case"video":case"audio":for(d=0;d<Hn.length;d++)Pe(Hn[d],i);break;case"source":Pe("error",i);break;case"img":case"image":case"link":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"input":ws(i,f),Pe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!f.multiple},Pe("invalid",i);break;case"textarea":Tl(i,f),Pe("invalid",i)}Qi(n,f),d=null;for(var g in f)if(f.hasOwnProperty(g)){var x=f[g];g==="children"?typeof x=="string"?i.textContent!==x&&(f.suppressHydrationWarning!==!0&&Bs(i.textContent,x,e),d=["children",x]):typeof x=="number"&&i.textContent!==""+x&&(f.suppressHydrationWarning!==!0&&Bs(i.textContent,x,e),d=["children",""+x]):u.hasOwnProperty(g)&&x!=null&&g==="onScroll"&&Pe("scroll",i)}switch(n){case"input":$t(i),Cl(i,f,!0);break;case"textarea":$t(i),Pl(i);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(i.onclick=qs)}i=d,t.updateQueue=i,i!==null&&(t.flags|=4)}else{g=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Rl(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=g.createElement(n,{is:i.is}):(e=g.createElement(n),n==="select"&&(g=e,i.multiple?g.multiple=!0:i.size&&(g.size=i.size))):e=g.createElementNS(e,n),e[Ut]=t,e[Gn]=i,Vc(e,t,!1,!1),t.stateNode=e;e:{switch(g=Yi(n,i),n){case"dialog":Pe("cancel",e),Pe("close",e),d=i;break;case"iframe":case"object":case"embed":Pe("load",e),d=i;break;case"video":case"audio":for(d=0;d<Hn.length;d++)Pe(Hn[d],e);d=i;break;case"source":Pe("error",e),d=i;break;case"img":case"image":case"link":Pe("error",e),Pe("load",e),d=i;break;case"details":Pe("toggle",e),d=i;break;case"input":ws(e,i),d=xs(e,i),Pe("invalid",e);break;case"option":d=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},d=W({},i,{value:void 0}),Pe("invalid",e);break;case"textarea":Tl(e,i),d=Gi(e,i),Pe("invalid",e);break;default:d=i}Qi(n,d),x=d;for(f in x)if(x.hasOwnProperty(f)){var _=x[f];f==="style"?$l(e,_):f==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&Al(e,_)):f==="children"?typeof _=="string"?(n!=="textarea"||_!=="")&&Nn(e,_):typeof _=="number"&&Nn(e,""+_):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(u.hasOwnProperty(f)?_!=null&&f==="onScroll"&&Pe("scroll",e):_!=null&&L(e,f,_,g))}switch(n){case"input":$t(e),Cl(e,i,!1);break;case"textarea":$t(e),Pl(e);break;case"option":i.value!=null&&e.setAttribute("value",""+se(i.value));break;case"select":e.multiple=!!i.multiple,f=i.value,f!=null?zr(e,!!i.multiple,f,!1):i.defaultValue!=null&&zr(e,!!i.multiple,i.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=qs)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)Wc(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(s(166));if(n=Nr(Zn.current),Nr(Mt.current),Qs(t)){if(i=t.stateNode,n=t.memoizedProps,i[Ut]=t,(f=i.nodeValue!==n)&&(e=ft,e!==null))switch(e.tag){case 3:Bs(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bs(i.nodeValue,n,(e.mode&1)!==0)}f&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ut]=t,t.stateNode=i}return tt(t),null;case 13:if(Re(Ie),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ae&&pt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ju(),tn(),t.flags|=98560,f=!1;else if(f=Qs(t),i!==null&&i.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ut]=t}else tn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;tt(t),f=!1}else Et!==null&&(Ca(Et),Et=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ie.current&1)!==0?He===0&&(He=3):Pa())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return on(),va(e,t),e===null&&Wn(t.stateNode.containerInfo),tt(t),null;case 10:return Ho(t.type._context),tt(t),null;case 17:return at(t.type)&&Hs(),tt(t),null;case 19:if(Re(Ie),f=t.memoizedState,f===null)return tt(t),null;if(i=(t.flags&128)!==0,g=f.rendering,g===null)if(i)ss(f,!1);else{if(He!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=ri(e),g!==null){for(t.flags|=128,ss(f,!1),i=g.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)f=n,e=i,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(Ie,Ie.current&1|2),t.child}e=e.sibling}f.tail!==null&&Ue()>cn&&(t.flags|=128,i=!0,ss(f,!1),t.lanes=4194304)}else{if(!i)if(e=ri(g),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ss(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ae)return tt(t),null}else 2*Ue()-f.renderingStartTime>cn&&n!==1073741824&&(t.flags|=128,i=!0,ss(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(n=f.last,n!==null?n.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Ue(),t.sibling=null,n=Ie.current,Te(Ie,i?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return Oa(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(mt&1073741824)!==0&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function $p(e,t){switch(Mo(t),t.tag){case 1:return at(t.type)&&Hs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return on(),Re(ot),Re(Ze),Xo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Qo(t),null;case 13:if(Re(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));tn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(Ie),null;case 4:return on(),null;case 10:return Ho(t.type._context),null;case 22:case 23:return Oa(),null;case 24:return null;default:return null}}var di=!1,rt=!1,Dp=typeof WeakSet=="function"?WeakSet:Set,ne=null;function ln(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Le(e,t,i)}else n.current=null}function ya(e,t,n){try{n()}catch(i){Le(e,t,i)}}var Kc=!1;function Lp(e,t){if(Oo=Ps,e=Su(),bo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var d=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var g=0,x=-1,_=-1,I=0,q=0,K=e,B=null;t:for(;;){for(var ee;K!==n||d!==0&&K.nodeType!==3||(x=g+d),K!==f||i!==0&&K.nodeType!==3||(_=g+i),K.nodeType===3&&(g+=K.nodeValue.length),(ee=K.firstChild)!==null;)B=K,K=ee;for(;;){if(K===e)break t;if(B===n&&++I===d&&(x=g),B===f&&++q===i&&(_=g),(ee=K.nextSibling)!==null)break;K=B,B=K.parentNode}K=ee}n=x===-1||_===-1?null:{start:x,end:_}}else n=null}n=n||{start:0,end:0}}else n=null;for(Po={focusedElem:e,selectionRange:n},Ps=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var ie=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var ae=ie.memoizedProps,Me=ie.memoizedState,R=t.stateNode,k=R.getSnapshotBeforeUpdate(t.elementType===t.type?ae:Ct(t.type,ae),Me);R.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var A=t.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Y){Le(t,t.return,Y)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return ie=Kc,Kc=!1,ie}function is(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var d=i=i.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&ya(t,n,f)}d=d.next}while(d!==i)}}function hi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function xa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Gc(e){var t=e.alternate;t!==null&&(e.alternate=null,Gc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ut],delete t[Gn],delete t[$o],delete t[xp],delete t[wp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jc(e){return e.tag===5||e.tag===3||e.tag===4}function Qc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wa(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=qs));else if(i!==4&&(e=e.child,e!==null))for(wa(e,t,n),e=e.sibling;e!==null;)wa(e,t,n),e=e.sibling}function _a(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(_a(e,t,n),e=e.sibling;e!==null;)_a(e,t,n),e=e.sibling}var Qe=null,Tt=!1;function cr(e,t,n){for(n=n.child;n!==null;)Yc(e,t,n),n=n.sibling}function Yc(e,t,n){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Ss,n)}catch{}switch(n.tag){case 5:rt||ln(n,t);case 6:var i=Qe,d=Tt;Qe=null,cr(e,t,n),Qe=i,Tt=d,Qe!==null&&(Tt?(e=Qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Tt?(e=Qe,n=n.stateNode,e.nodeType===8?Io(e.parentNode,n):e.nodeType===1&&Io(e,n),Ln(e)):Io(Qe,n.stateNode));break;case 4:i=Qe,d=Tt,Qe=n.stateNode.containerInfo,Tt=!0,cr(e,t,n),Qe=i,Tt=d;break;case 0:case 11:case 14:case 15:if(!rt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){d=i=i.next;do{var f=d,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&ya(n,t,g),d=d.next}while(d!==i)}cr(e,t,n);break;case 1:if(!rt&&(ln(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(x){Le(n,t,x)}cr(e,t,n);break;case 21:cr(e,t,n);break;case 22:n.mode&1?(rt=(i=rt)||n.memoizedState!==null,cr(e,t,n),rt=i):cr(e,t,n);break;default:cr(e,t,n)}}function Xc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Dp),t.forEach(function(i){var d=Wp.bind(null,e,i);n.has(i)||(n.add(i),i.then(d,d))})}}function Ot(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var d=n[i];try{var f=e,g=t,x=g;e:for(;x!==null;){switch(x.tag){case 5:Qe=x.stateNode,Tt=!1;break e;case 3:Qe=x.stateNode.containerInfo,Tt=!0;break e;case 4:Qe=x.stateNode.containerInfo,Tt=!0;break e}x=x.return}if(Qe===null)throw Error(s(160));Yc(f,g,d),Qe=null,Tt=!1;var _=d.alternate;_!==null&&(_.return=null),d.return=null}catch(I){Le(d,t,I)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Zc(t,e),t=t.sibling}function Zc(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ot(t,e),Ft(e),i&4){try{is(3,e,e.return),hi(3,e)}catch(ae){Le(e,e.return,ae)}try{is(5,e,e.return)}catch(ae){Le(e,e.return,ae)}}break;case 1:Ot(t,e),Ft(e),i&512&&n!==null&&ln(n,n.return);break;case 5:if(Ot(t,e),Ft(e),i&512&&n!==null&&ln(n,n.return),e.flags&32){var d=e.stateNode;try{Nn(d,"")}catch(ae){Le(e,e.return,ae)}}if(i&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,g=n!==null?n.memoizedProps:f,x=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{x==="input"&&f.type==="radio"&&f.name!=null&&_e(d,f),Yi(x,g);var I=Yi(x,f);for(g=0;g<_.length;g+=2){var q=_[g],K=_[g+1];q==="style"?$l(d,K):q==="dangerouslySetInnerHTML"?Al(d,K):q==="children"?Nn(d,K):L(d,q,K,I)}switch(x){case"input":qe(d,f);break;case"textarea":Ol(d,f);break;case"select":var B=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var ee=f.value;ee!=null?zr(d,!!f.multiple,ee,!1):B!==!!f.multiple&&(f.defaultValue!=null?zr(d,!!f.multiple,f.defaultValue,!0):zr(d,!!f.multiple,f.multiple?[]:"",!1))}d[Gn]=f}catch(ae){Le(e,e.return,ae)}}break;case 6:if(Ot(t,e),Ft(e),i&4){if(e.stateNode===null)throw Error(s(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(ae){Le(e,e.return,ae)}}break;case 3:if(Ot(t,e),Ft(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ln(t.containerInfo)}catch(ae){Le(e,e.return,ae)}break;case 4:Ot(t,e),Ft(e);break;case 13:Ot(t,e),Ft(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(ka=Ue())),i&4&&Xc(e);break;case 22:if(q=n!==null&&n.memoizedState!==null,e.mode&1?(rt=(I=rt)||q,Ot(t,e),rt=I):Ot(t,e),Ft(e),i&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!q&&(e.mode&1)!==0)for(ne=e,q=e.child;q!==null;){for(K=ne=q;ne!==null;){switch(B=ne,ee=B.child,B.tag){case 0:case 11:case 14:case 15:is(4,B,B.return);break;case 1:ln(B,B.return);var ie=B.stateNode;if(typeof ie.componentWillUnmount=="function"){i=B,n=B.return;try{t=i,ie.props=t.memoizedProps,ie.state=t.memoizedState,ie.componentWillUnmount()}catch(ae){Le(i,n,ae)}}break;case 5:ln(B,B.return);break;case 22:if(B.memoizedState!==null){rd(K);continue}}ee!==null?(ee.return=B,ne=ee):rd(K)}q=q.sibling}e:for(q=null,K=e;;){if(K.tag===5){if(q===null){q=K;try{d=K.stateNode,I?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(x=K.stateNode,_=K.memoizedProps.style,g=_!=null&&_.hasOwnProperty("display")?_.display:null,x.style.display=Il("display",g))}catch(ae){Le(e,e.return,ae)}}}else if(K.tag===6){if(q===null)try{K.stateNode.nodeValue=I?"":K.memoizedProps}catch(ae){Le(e,e.return,ae)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===e)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===e)break e;for(;K.sibling===null;){if(K.return===null||K.return===e)break e;q===K&&(q=null),K=K.return}q===K&&(q=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Ot(t,e),Ft(e),i&4&&Xc(e);break;case 21:break;default:Ot(t,e),Ft(e)}}function Ft(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jc(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var d=i.stateNode;i.flags&32&&(Nn(d,""),i.flags&=-33);var f=Qc(e);_a(e,f,d);break;case 3:case 4:var g=i.stateNode.containerInfo,x=Qc(e);wa(e,x,g);break;default:throw Error(s(161))}}catch(_){Le(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Up(e,t,n){ne=e,ed(e)}function ed(e,t,n){for(var i=(e.mode&1)!==0;ne!==null;){var d=ne,f=d.child;if(d.tag===22&&i){var g=d.memoizedState!==null||di;if(!g){var x=d.alternate,_=x!==null&&x.memoizedState!==null||rt;x=di;var I=rt;if(di=g,(rt=_)&&!I)for(ne=d;ne!==null;)g=ne,_=g.child,g.tag===22&&g.memoizedState!==null?nd(d):_!==null?(_.return=g,ne=_):nd(d);for(;f!==null;)ne=f,ed(f),f=f.sibling;ne=d,di=x,rt=I}td(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,ne=f):td(e)}}function td(e){for(;ne!==null;){var t=ne;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:rt||hi(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!rt)if(n===null)i.componentDidMount();else{var d=t.elementType===t.type?n.memoizedProps:Ct(t.type,n.memoizedProps);i.componentDidUpdate(d,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&rc(t,f,i);break;case 3:var g=t.updateQueue;if(g!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}rc(t,g,n)}break;case 5:var x=t.stateNode;if(n===null&&t.flags&4){n=x;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&n.focus();break;case"img":_.src&&(n.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var I=t.alternate;if(I!==null){var q=I.memoizedState;if(q!==null){var K=q.dehydrated;K!==null&&Ln(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}rt||t.flags&512&&xa(t)}catch(B){Le(t,t.return,B)}}if(t===e){ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,ne=n;break}ne=t.return}}function rd(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ne=n;break}ne=t.return}}function nd(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hi(4,t)}catch(_){Le(t,n,_)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var d=t.return;try{i.componentDidMount()}catch(_){Le(t,d,_)}}var f=t.return;try{xa(t)}catch(_){Le(t,f,_)}break;case 5:var g=t.return;try{xa(t)}catch(_){Le(t,g,_)}}}catch(_){Le(t,t.return,_)}if(t===e){ne=null;break}var x=t.sibling;if(x!==null){x.return=t.return,ne=x;break}ne=t.return}}var Mp=Math.ceil,fi=J.ReactCurrentDispatcher,ba=J.ReactCurrentOwner,jt=J.ReactCurrentBatchConfig,Se=0,Ge=null,Fe=null,Ye=0,mt=0,un=ir(0),He=0,os=null,Cr=0,pi=0,ja=0,as=null,ut=null,ka=0,cn=1/0,Qt=null,mi=!1,Sa=null,dr=null,gi=!1,hr=null,vi=0,ls=0,Na=null,yi=-1,xi=0;function it(){return(Se&6)!==0?Ue():yi!==-1?yi:yi=Ue()}function fr(e){return(e.mode&1)===0?1:(Se&2)!==0&&Ye!==0?Ye&-Ye:bp.transition!==null?(xi===0&&(xi=Ql()),xi):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:iu(e.type)),e)}function Pt(e,t,n,i){if(50<ls)throw ls=0,Na=null,Error(s(185));Rn(e,n,i),((Se&2)===0||e!==Ge)&&(e===Ge&&((Se&2)===0&&(pi|=n),He===4&&pr(e,Ye)),ct(e,i),n===1&&Se===0&&(t.mode&1)===0&&(cn=Ue()+500,Ks&&ar()))}function ct(e,t){var n=e.callbackNode;bf(e,t);var i=Cs(e,e===Ge?Ye:0);if(i===0)n!==null&&Kl(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Kl(n),t===1)e.tag===0?_p(id.bind(null,e)):Vu(id.bind(null,e)),vp(function(){(Se&6)===0&&ar()}),n=null;else{switch(Yl(i)){case 1:n=so;break;case 4:n=Gl;break;case 16:n=ks;break;case 536870912:n=Jl;break;default:n=ks}n=fd(n,sd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sd(e,t){if(yi=-1,xi=0,(Se&6)!==0)throw Error(s(327));var n=e.callbackNode;if(dn()&&e.callbackNode!==n)return null;var i=Cs(e,e===Ge?Ye:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=wi(e,i);else{t=i;var d=Se;Se|=2;var f=ad();(Ge!==e||Ye!==t)&&(Qt=null,cn=Ue()+500,Or(e,t));do try{Bp();break}catch(x){od(e,x)}while(!0);Vo(),fi.current=f,Se=d,Fe!==null?t=0:(Ge=null,Ye=0,t=He)}if(t!==0){if(t===2&&(d=io(e),d!==0&&(i=d,t=Ea(e,d))),t===1)throw n=os,Or(e,0),pr(e,i),ct(e,Ue()),n;if(t===6)pr(e,i);else{if(d=e.current.alternate,(i&30)===0&&!zp(d)&&(t=wi(e,i),t===2&&(f=io(e),f!==0&&(i=f,t=Ea(e,f))),t===1))throw n=os,Or(e,0),pr(e,i),ct(e,Ue()),n;switch(e.finishedWork=d,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:Pr(e,ut,Qt);break;case 3:if(pr(e,i),(i&130023424)===i&&(t=ka+500-Ue(),10<t)){if(Cs(e,0)!==0)break;if(d=e.suspendedLanes,(d&i)!==i){it(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=Ao(Pr.bind(null,e,ut,Qt),t);break}Pr(e,ut,Qt);break;case 4:if(pr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,d=-1;0<i;){var g=31-St(i);f=1<<g,g=t[g],g>d&&(d=g),i&=~f}if(i=d,i=Ue()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Mp(i/1960))-i,10<i){e.timeoutHandle=Ao(Pr.bind(null,e,ut,Qt),i);break}Pr(e,ut,Qt);break;case 5:Pr(e,ut,Qt);break;default:throw Error(s(329))}}}return ct(e,Ue()),e.callbackNode===n?sd.bind(null,e):null}function Ea(e,t){var n=as;return e.current.memoizedState.isDehydrated&&(Or(e,t).flags|=256),e=wi(e,t),e!==2&&(t=ut,ut=n,t!==null&&Ca(t)),e}function Ca(e){ut===null?ut=e:ut.push.apply(ut,e)}function zp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var d=n[i],f=d.getSnapshot;d=d.value;try{if(!Nt(f(),d))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pr(e,t){for(t&=~ja,t&=~pi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-St(t),i=1<<n;e[n]=-1,t&=~i}}function id(e){if((Se&6)!==0)throw Error(s(327));dn();var t=Cs(e,0);if((t&1)===0)return ct(e,Ue()),null;var n=wi(e,t);if(e.tag!==0&&n===2){var i=io(e);i!==0&&(t=i,n=Ea(e,i))}if(n===1)throw n=os,Or(e,0),pr(e,t),ct(e,Ue()),n;if(n===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pr(e,ut,Qt),ct(e,Ue()),null}function Ta(e,t){var n=Se;Se|=1;try{return e(t)}finally{Se=n,Se===0&&(cn=Ue()+500,Ks&&ar())}}function Tr(e){hr!==null&&hr.tag===0&&(Se&6)===0&&dn();var t=Se;Se|=1;var n=jt.transition,i=Ce;try{if(jt.transition=null,Ce=1,e)return e()}finally{Ce=i,jt.transition=n,Se=t,(Se&6)===0&&ar()}}function Oa(){mt=un.current,Re(un)}function Or(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,gp(n)),Fe!==null)for(n=Fe.return;n!==null;){var i=n;switch(Mo(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Hs();break;case 3:on(),Re(ot),Re(Ze),Xo();break;case 5:Qo(i);break;case 4:on();break;case 13:Re(Ie);break;case 19:Re(Ie);break;case 10:Ho(i.type._context);break;case 22:case 23:Oa()}n=n.return}if(Ge=e,Fe=e=mr(e.current,null),Ye=mt=t,He=0,os=null,ja=pi=Cr=0,ut=as=null,Sr!==null){for(t=0;t<Sr.length;t++)if(n=Sr[t],i=n.interleaved,i!==null){n.interleaved=null;var d=i.next,f=n.pending;if(f!==null){var g=f.next;f.next=d,i.next=g}n.pending=i}Sr=null}return e}function od(e,t){do{var n=Fe;try{if(Vo(),ni.current=ai,si){for(var i=$e.memoizedState;i!==null;){var d=i.queue;d!==null&&(d.pending=null),i=i.next}si=!1}if(Er=0,Ke=Ve=$e=null,es=!1,ts=0,ba.current=null,n===null||n.return===null){He=1,os=t,Fe=null;break}e:{var f=e,g=n.return,x=n,_=t;if(t=Ye,x.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var I=_,q=x,K=q.tag;if((q.mode&1)===0&&(K===0||K===11||K===15)){var B=q.alternate;B?(q.updateQueue=B.updateQueue,q.memoizedState=B.memoizedState,q.lanes=B.lanes):(q.updateQueue=null,q.memoizedState=null)}var ee=Pc(g);if(ee!==null){ee.flags&=-257,Rc(ee,g,x,f,t),ee.mode&1&&Oc(f,I,t),t=ee,_=I;var ie=t.updateQueue;if(ie===null){var ae=new Set;ae.add(_),t.updateQueue=ae}else ie.add(_);break e}else{if((t&1)===0){Oc(f,I,t),Pa();break e}_=Error(s(426))}}else if(Ae&&x.mode&1){var Me=Pc(g);if(Me!==null){(Me.flags&65536)===0&&(Me.flags|=256),Rc(Me,g,x,f,t),Bo(an(_,x));break e}}f=_=an(_,x),He!==4&&(He=2),as===null?as=[f]:as.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var R=Cc(f,_,t);tc(f,R);break e;case 1:x=_;var k=f.type,A=f.stateNode;if((f.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(dr===null||!dr.has(A)))){f.flags|=65536,t&=-t,f.lanes|=t;var Y=Tc(f,x,t);tc(f,Y);break e}}f=f.return}while(f!==null)}ud(n)}catch(le){t=le,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function ad(){var e=fi.current;return fi.current=ai,e===null?ai:e}function Pa(){(He===0||He===3||He===2)&&(He=4),Ge===null||(Cr&268435455)===0&&(pi&268435455)===0||pr(Ge,Ye)}function wi(e,t){var n=Se;Se|=2;var i=ad();(Ge!==e||Ye!==t)&&(Qt=null,Or(e,t));do try{Fp();break}catch(d){od(e,d)}while(!0);if(Vo(),Se=n,fi.current=i,Fe!==null)throw Error(s(261));return Ge=null,Ye=0,He}function Fp(){for(;Fe!==null;)ld(Fe)}function Bp(){for(;Fe!==null&&!ff();)ld(Fe)}function ld(e){var t=hd(e.alternate,e,mt);e.memoizedProps=e.pendingProps,t===null?ud(e):Fe=t,ba.current=null}function ud(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Ip(n,t,mt),n!==null){Fe=n;return}}else{if(n=$p(n,t),n!==null){n.flags&=32767,Fe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,Fe=null;return}}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);He===0&&(He=5)}function Pr(e,t,n){var i=Ce,d=jt.transition;try{jt.transition=null,Ce=1,qp(e,t,n,i)}finally{jt.transition=d,Ce=i}return null}function qp(e,t,n,i){do dn();while(hr!==null);if((Se&6)!==0)throw Error(s(327));n=e.finishedWork;var d=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var f=n.lanes|n.childLanes;if(jf(e,f),e===Ge&&(Fe=Ge=null,Ye=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||gi||(gi=!0,fd(ks,function(){return dn(),null})),f=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||f){f=jt.transition,jt.transition=null;var g=Ce;Ce=1;var x=Se;Se|=4,ba.current=null,Lp(e,n),Zc(n,e),up(Po),Ps=!!Oo,Po=Oo=null,e.current=n,Up(n),pf(),Se=x,Ce=g,jt.transition=f}else e.current=n;if(gi&&(gi=!1,hr=e,vi=d),f=e.pendingLanes,f===0&&(dr=null),vf(n.stateNode),ct(e,Ue()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)d=t[n],i(d.value,{componentStack:d.stack,digest:d.digest});if(mi)throw mi=!1,e=Sa,Sa=null,e;return(vi&1)!==0&&e.tag!==0&&dn(),f=e.pendingLanes,(f&1)!==0?e===Na?ls++:(ls=0,Na=e):ls=0,ar(),null}function dn(){if(hr!==null){var e=Yl(vi),t=jt.transition,n=Ce;try{if(jt.transition=null,Ce=16>e?16:e,hr===null)var i=!1;else{if(e=hr,hr=null,vi=0,(Se&6)!==0)throw Error(s(331));var d=Se;for(Se|=4,ne=e.current;ne!==null;){var f=ne,g=f.child;if((ne.flags&16)!==0){var x=f.deletions;if(x!==null){for(var _=0;_<x.length;_++){var I=x[_];for(ne=I;ne!==null;){var q=ne;switch(q.tag){case 0:case 11:case 15:is(8,q,f)}var K=q.child;if(K!==null)K.return=q,ne=K;else for(;ne!==null;){q=ne;var B=q.sibling,ee=q.return;if(Gc(q),q===I){ne=null;break}if(B!==null){B.return=ee,ne=B;break}ne=ee}}}var ie=f.alternate;if(ie!==null){var ae=ie.child;if(ae!==null){ie.child=null;do{var Me=ae.sibling;ae.sibling=null,ae=Me}while(ae!==null)}}ne=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,ne=g;else e:for(;ne!==null;){if(f=ne,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:is(9,f,f.return)}var R=f.sibling;if(R!==null){R.return=f.return,ne=R;break e}ne=f.return}}var k=e.current;for(ne=k;ne!==null;){g=ne;var A=g.child;if((g.subtreeFlags&2064)!==0&&A!==null)A.return=g,ne=A;else e:for(g=k;ne!==null;){if(x=ne,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:hi(9,x)}}catch(le){Le(x,x.return,le)}if(x===g){ne=null;break e}var Y=x.sibling;if(Y!==null){Y.return=x.return,ne=Y;break e}ne=x.return}}if(Se=d,ar(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Ss,e)}catch{}i=!0}return i}finally{Ce=n,jt.transition=t}}return!1}function cd(e,t,n){t=an(n,t),t=Cc(e,t,1),e=ur(e,t,1),t=it(),e!==null&&(Rn(e,1,t),ct(e,t))}function Le(e,t,n){if(e.tag===3)cd(e,e,n);else for(;t!==null;){if(t.tag===3){cd(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(dr===null||!dr.has(i))){e=an(n,e),e=Tc(t,e,1),t=ur(t,e,1),e=it(),t!==null&&(Rn(t,1,e),ct(t,e));break}}t=t.return}}function Vp(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&n,Ge===e&&(Ye&n)===n&&(He===4||He===3&&(Ye&130023424)===Ye&&500>Ue()-ka?Or(e,0):ja|=n),ct(e,t)}function dd(e,t){t===0&&((e.mode&1)===0?t=1:(t=Es,Es<<=1,(Es&130023424)===0&&(Es=4194304)));var n=it();e=Kt(e,t),e!==null&&(Rn(e,t,n),ct(e,n))}function Hp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dd(e,n)}function Wp(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,d=e.memoizedState;d!==null&&(n=d.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}i!==null&&i.delete(t),dd(e,n)}var hd;hd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ot.current)lt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return lt=!1,Ap(e,t,n);lt=(e.flags&131072)!==0}else lt=!1,Ae&&(t.flags&1048576)!==0&&Hu(t,Js,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ci(e,t),e=t.pendingProps;var d=Xr(t,Ze.current);sn(t,n),d=ta(null,t,i,e,d,n);var f=ra();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,at(i)?(f=!0,Ws(t)):f=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Go(t),d.updater=li,t.stateNode=d,d._reactInternals=t,la(t,i,e,n),t=ha(null,t,i,!0,f,n)):(t.tag=0,Ae&&f&&Uo(t),st(null,t,d,n),t=t.child),t;case 16:i=t.elementType;e:{switch(ci(e,t),e=t.pendingProps,d=i._init,i=d(i._payload),t.type=i,d=t.tag=Gp(i),e=Ct(i,e),d){case 0:t=da(null,t,i,e,n);break e;case 1:t=Uc(null,t,i,e,n);break e;case 11:t=Ac(null,t,i,e,n);break e;case 14:t=Ic(null,t,i,Ct(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:Ct(i,d),da(e,t,i,d,n);case 1:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:Ct(i,d),Uc(e,t,i,d,n);case 3:e:{if(Mc(t),e===null)throw Error(s(387));i=t.pendingProps,f=t.memoizedState,d=f.element,ec(e,t),ti(t,i,null,n);var g=t.memoizedState;if(i=g.element,f.isDehydrated)if(f={element:i,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){d=an(Error(s(423)),t),t=zc(e,t,i,n,d);break e}else if(i!==d){d=an(Error(s(424)),t),t=zc(e,t,i,n,d);break e}else for(pt=sr(t.stateNode.containerInfo.firstChild),ft=t,Ae=!0,Et=null,n=Xu(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tn(),i===d){t=Jt(e,t,n);break e}st(e,t,i,n)}t=t.child}return t;case 5:return nc(t),e===null&&Fo(t),i=t.type,d=t.pendingProps,f=e!==null?e.memoizedProps:null,g=d.children,Ro(i,d)?g=null:f!==null&&Ro(i,f)&&(t.flags|=32),Lc(e,t),st(e,t,g,n),t.child;case 6:return e===null&&Fo(t),null;case 13:return Fc(e,t,n);case 4:return Jo(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=rn(t,null,i,n):st(e,t,i,n),t.child;case 11:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:Ct(i,d),Ac(e,t,i,d,n);case 7:return st(e,t,t.pendingProps,n),t.child;case 8:return st(e,t,t.pendingProps.children,n),t.child;case 12:return st(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,d=t.pendingProps,f=t.memoizedProps,g=d.value,Te(Xs,i._currentValue),i._currentValue=g,f!==null)if(Nt(f.value,g)){if(f.children===d.children&&!ot.current){t=Jt(e,t,n);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var x=f.dependencies;if(x!==null){g=f.child;for(var _=x.firstContext;_!==null;){if(_.context===i){if(f.tag===1){_=Gt(-1,n&-n),_.tag=2;var I=f.updateQueue;if(I!==null){I=I.shared;var q=I.pending;q===null?_.next=_:(_.next=q.next,q.next=_),I.pending=_}}f.lanes|=n,_=f.alternate,_!==null&&(_.lanes|=n),Wo(f.return,n,t),x.lanes|=n;break}_=_.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(s(341));g.lanes|=n,x=g.alternate,x!==null&&(x.lanes|=n),Wo(g,n,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}st(e,t,d.children,n),t=t.child}return t;case 9:return d=t.type,i=t.pendingProps.children,sn(t,n),d=_t(d),i=i(d),t.flags|=1,st(e,t,i,n),t.child;case 14:return i=t.type,d=Ct(i,t.pendingProps),d=Ct(i.type,d),Ic(e,t,i,d,n);case 15:return $c(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:Ct(i,d),ci(e,t),t.tag=1,at(i)?(e=!0,Ws(t)):e=!1,sn(t,n),Nc(t,i,d),la(t,i,d,n),ha(null,t,i,!0,e,n);case 19:return qc(e,t,n);case 22:return Dc(e,t,n)}throw Error(s(156,t.tag))};function fd(e,t){return Wl(e,t)}function Kp(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,n,i){return new Kp(e,t,n,i)}function Ra(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gp(e){if(typeof e=="function")return Ra(e)?1:0;if(e!=null){if(e=e.$$typeof,e===C)return 11;if(e===G)return 14}return 2}function mr(e,t){var n=e.alternate;return n===null?(n=kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _i(e,t,n,i,d,f){var g=2;if(i=e,typeof e=="function")Ra(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case he:return Rr(n.children,d,f,t);case F:g=8,d|=8;break;case fe:return e=kt(12,n,t,d|2),e.elementType=fe,e.lanes=f,e;case Q:return e=kt(13,n,t,d),e.elementType=Q,e.lanes=f,e;case $:return e=kt(19,n,t,d),e.elementType=$,e.lanes=f,e;case X:return bi(n,d,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case be:g=10;break e;case z:g=9;break e;case C:g=11;break e;case G:g=14;break e;case w:g=16,i=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=kt(g,n,t,d),t.elementType=e,t.type=i,t.lanes=f,t}function Rr(e,t,n,i){return e=kt(7,e,i,t),e.lanes=n,e}function bi(e,t,n,i){return e=kt(22,e,i,t),e.elementType=X,e.lanes=n,e.stateNode={isHidden:!1},e}function Aa(e,t,n){return e=kt(6,e,null,t),e.lanes=n,e}function Ia(e,t,n){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jp(e,t,n,i,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oo(0),this.expirationTimes=oo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oo(0),this.identifierPrefix=i,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function $a(e,t,n,i,d,f,g,x,_){return e=new Jp(e,t,n,x,_),t===1?(t=1,f===!0&&(t|=8)):t=0,f=kt(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Go(f),e}function Qp(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oe,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function pd(e){if(!e)return or;e=e._reactInternals;e:{if(wr(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(at(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var n=e.type;if(at(n))return Bu(e,n,t)}return t}function md(e,t,n,i,d,f,g,x,_){return e=$a(n,i,!0,e,d,f,g,x,_),e.context=pd(null),n=e.current,i=it(),d=fr(n),f=Gt(i,d),f.callback=t??null,ur(n,f,d),e.current.lanes=d,Rn(e,d,i),ct(e,i),e}function ji(e,t,n,i){var d=t.current,f=it(),g=fr(d);return n=pd(n),t.context===null?t.context=n:t.pendingContext=n,t=Gt(f,g),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ur(d,t,g),e!==null&&(Pt(e,d,g,f),ei(e,d,g)),g}function ki(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Da(e,t){gd(e,t),(e=e.alternate)&&gd(e,t)}function Yp(){return null}var vd=typeof reportError=="function"?reportError:function(e){console.error(e)};function La(e){this._internalRoot=e}Si.prototype.render=La.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));ji(e,t,null,null)},Si.prototype.unmount=La.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Tr(function(){ji(null,e,null,null)}),t[qt]=null}};function Si(e){this._internalRoot=e}Si.prototype.unstable_scheduleHydration=function(e){if(e){var t=eu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tr.length&&t!==0&&t<tr[n].priority;n++);tr.splice(n,0,e),n===0&&nu(e)}};function Ua(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ni(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yd(){}function Xp(e,t,n,i,d){if(d){if(typeof i=="function"){var f=i;i=function(){var I=ki(g);f.call(I)}}var g=md(t,i,e,0,null,!1,!1,"",yd);return e._reactRootContainer=g,e[qt]=g.current,Wn(e.nodeType===8?e.parentNode:e),Tr(),g}for(;d=e.lastChild;)e.removeChild(d);if(typeof i=="function"){var x=i;i=function(){var I=ki(_);x.call(I)}}var _=$a(e,0,!1,null,null,!1,!1,"",yd);return e._reactRootContainer=_,e[qt]=_.current,Wn(e.nodeType===8?e.parentNode:e),Tr(function(){ji(t,_,n,i)}),_}function Ei(e,t,n,i,d){var f=n._reactRootContainer;if(f){var g=f;if(typeof d=="function"){var x=d;d=function(){var _=ki(g);x.call(_)}}ji(t,g,e,d)}else g=Xp(n,t,e,d,i);return ki(g)}Xl=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Pn(t.pendingLanes);n!==0&&(ao(t,n|1),ct(t,Ue()),(Se&6)===0&&(cn=Ue()+500,ar()))}break;case 13:Tr(function(){var i=Kt(e,1);if(i!==null){var d=it();Pt(i,e,1,d)}}),Da(e,1)}},lo=function(e){if(e.tag===13){var t=Kt(e,134217728);if(t!==null){var n=it();Pt(t,e,134217728,n)}Da(e,134217728)}},Zl=function(e){if(e.tag===13){var t=fr(e),n=Kt(e,t);if(n!==null){var i=it();Pt(n,e,t,i)}Da(e,t)}},eu=function(){return Ce},tu=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}},eo=function(e,t,n){switch(t){case"input":if(qe(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var d=Vs(i);if(!d)throw Error(s(90));Bt(i),qe(i,d)}}}break;case"textarea":Ol(e,n);break;case"select":t=n.value,t!=null&&zr(e,!!n.multiple,t,!1)}},Ml=Ta,zl=Tr;var Zp={usingClientEntryPoint:!1,Events:[Jn,Qr,Vs,Ll,Ul,Ta]},us={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},em={bundleType:us.bundleType,version:us.version,rendererPackageName:us.rendererPackageName,rendererConfig:us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Vl(e),e===null?null:e.stateNode},findFiberByHostInstance:us.findFiberByHostInstance||Yp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ci=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ci.isDisabled&&Ci.supportsFiber)try{Ss=Ci.inject(em),Lt=Ci}catch{}}return dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zp,dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ua(t))throw Error(s(200));return Qp(e,t,null,n)},dt.createRoot=function(e,t){if(!Ua(e))throw Error(s(299));var n=!1,i="",d=vd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=$a(e,1,!1,null,null,n,!1,i,d),e[qt]=t.current,Wn(e.nodeType===8?e.parentNode:e),new La(t)},dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Vl(t),e=e===null?null:e.stateNode,e},dt.flushSync=function(e){return Tr(e)},dt.hydrate=function(e,t,n){if(!Ni(t))throw Error(s(200));return Ei(null,e,t,!0,n)},dt.hydrateRoot=function(e,t,n){if(!Ua(e))throw Error(s(405));var i=n!=null&&n.hydratedSources||null,d=!1,f="",g=vd;if(n!=null&&(n.unstable_strictMode===!0&&(d=!0),n.identifierPrefix!==void 0&&(f=n.identifierPrefix),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),t=md(t,null,e,1,n??null,d,!1,f,g),e[qt]=t.current,Wn(e),i)for(e=0;e<i.length;e++)n=i[e],d=n._getVersion,d=d(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,d]:t.mutableSourceEagerHydrationData.push(n,d);return new Si(t)},dt.render=function(e,t,n){if(!Ni(t))throw Error(s(200));return Ei(null,e,t,!1,n)},dt.unmountComponentAtNode=function(e){if(!Ni(e))throw Error(s(40));return e._reactRootContainer?(Tr(function(){Ei(null,null,e,!1,function(){e._reactRootContainer=null,e[qt]=null})}),!0):!1},dt.unstable_batchedUpdates=Ta,dt.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Ni(n))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Ei(e,t,n,!1,i)},dt.version="18.3.1-next-f1338f8080-20240426",dt}var Nd;function dm(){if(Nd)return Fa.exports;Nd=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),Fa.exports=cm(),Fa.exports}var Ed;function hm(){if(Ed)return Ti;Ed=1;var l=dm();return Ti.createRoot=l.createRoot,Ti.hydrateRoot=l.hydrateRoot,Ti}var fm=hm(),Za=function(l,r){return Za=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(s[u]=o[u])},Za(l,r)};function ih(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Za(l,r);function s(){this.constructor=l}l.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}var Mi=function(){return Mi=Object.assign||function(r){for(var s,o=1,u=arguments.length;o<u;o++){s=arguments[o];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(r[c]=s[c])}return r},Mi.apply(this,arguments)};function bn(l,r){var s={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&r.indexOf(o)<0&&(s[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(l);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(l,o[u])&&(s[o[u]]=l[o[u]]);return s}function oh(l,r,s,o){var u=arguments.length,c=u<3?r:o===null?o=Object.getOwnPropertyDescriptor(r,s):o,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(l,r,s,o);else for(var p=l.length-1;p>=0;p--)(h=l[p])&&(c=(u<3?h(c):u>3?h(r,s,c):h(r,s))||c);return u>3&&c&&Object.defineProperty(r,s,c),c}function ah(l,r){return function(s,o){r(s,o,l)}}function lh(l,r,s,o,u,c){function h(H){if(H!==void 0&&typeof H!="function")throw new TypeError("Function expected");return H}for(var p=o.kind,m=p==="getter"?"get":p==="setter"?"set":"value",v=!r&&l?o.static?l:l.prototype:null,y=r||(v?Object.getOwnPropertyDescriptor(v,o.name):{}),S,N=!1,j=s.length-1;j>=0;j--){var T={};for(var O in o)T[O]=O==="access"?{}:o[O];for(var O in o.access)T.access[O]=o.access[O];T.addInitializer=function(H){if(N)throw new TypeError("Cannot add initializers after decoration has completed");c.push(h(H||null))};var E=(0,s[j])(p==="accessor"?{get:y.get,set:y.set}:y[m],T);if(p==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(S=h(E.get))&&(y.get=S),(S=h(E.set))&&(y.set=S),(S=h(E.init))&&u.unshift(S)}else(S=h(E))&&(p==="field"?u.unshift(S):y[m]=S)}v&&Object.defineProperty(v,o.name,y),N=!0}function uh(l,r,s){for(var o=arguments.length>2,u=0;u<r.length;u++)s=o?r[u].call(l,s):r[u].call(l);return o?s:void 0}function ch(l){return typeof l=="symbol"?l:"".concat(l)}function dh(l,r,s){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(l,"name",{configurable:!0,value:s?"".concat(s," ",r):r})}function hh(l,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,r)}function ue(l,r,s,o){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(y){try{v(o.next(y))}catch(S){h(S)}}function m(y){try{v(o.throw(y))}catch(S){h(S)}}function v(y){y.done?c(y.value):u(y.value).then(p,m)}v((o=o.apply(l,r||[])).next())})}function fh(l,r){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=p(0),h.throw=p(1),h.return=p(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(v){return function(y){return m([v,y])}}function m(v){if(o)throw new TypeError("Generator is already executing.");for(;h&&(h=0,v[0]&&(s=0)),s;)try{if(o=1,u&&(c=v[0]&2?u.return:v[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,v[1])).done)return c;switch(u=0,c&&(v=[v[0]&2,c.value]),v[0]){case 0:case 1:c=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,u=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!c||v[1]>c[0]&&v[1]<c[3])){s.label=v[1];break}if(v[0]===6&&s.label<c[1]){s.label=c[1],c=v;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(v);break}c[2]&&s.ops.pop(),s.trys.pop();continue}v=r.call(l,s)}catch(y){v=[6,y],u=0}finally{o=c=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}}var Hi=Object.create?(function(l,r,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(r,s);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(l,o,u)}):(function(l,r,s,o){o===void 0&&(o=s),l[o]=r[s]});function ph(l,r){for(var s in l)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&Hi(r,l,s)}function zi(l){var r=typeof Symbol=="function"&&Symbol.iterator,s=r&&l[r],o=0;if(s)return s.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&o>=l.length&&(l=void 0),{value:l&&l[o++],done:!l}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function pl(l,r){var s=typeof Symbol=="function"&&l[Symbol.iterator];if(!s)return l;var o=s.call(l),u,c=[],h;try{for(;(r===void 0||r-- >0)&&!(u=o.next()).done;)c.push(u.value)}catch(p){h={error:p}}finally{try{u&&!u.done&&(s=o.return)&&s.call(o)}finally{if(h)throw h.error}}return c}function mh(){for(var l=[],r=0;r<arguments.length;r++)l=l.concat(pl(arguments[r]));return l}function gh(){for(var l=0,r=0,s=arguments.length;r<s;r++)l+=arguments[r].length;for(var o=Array(l),u=0,r=0;r<s;r++)for(var c=arguments[r],h=0,p=c.length;h<p;h++,u++)o[u]=c[h];return o}function vh(l,r,s){if(s||arguments.length===2)for(var o=0,u=r.length,c;o<u;o++)(c||!(o in r))&&(c||(c=Array.prototype.slice.call(r,0,o)),c[o]=r[o]);return l.concat(c||Array.prototype.slice.call(r))}function wn(l){return this instanceof wn?(this.v=l,this):new wn(l)}function yh(l,r,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=s.apply(l,r||[]),u,c=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",h),u[Symbol.asyncIterator]=function(){return this},u;function h(j){return function(T){return Promise.resolve(T).then(j,S)}}function p(j,T){o[j]&&(u[j]=function(O){return new Promise(function(E,H){c.push([j,O,E,H])>1||m(j,O)})},T&&(u[j]=T(u[j])))}function m(j,T){try{v(o[j](T))}catch(O){N(c[0][3],O)}}function v(j){j.value instanceof wn?Promise.resolve(j.value.v).then(y,S):N(c[0][2],j)}function y(j){m("next",j)}function S(j){m("throw",j)}function N(j,T){j(T),c.shift(),c.length&&m(c[0][0],c[0][1])}}function xh(l){var r,s;return r={},o("next"),o("throw",function(u){throw u}),o("return"),r[Symbol.iterator]=function(){return this},r;function o(u,c){r[u]=l[u]?function(h){return(s=!s)?{value:wn(l[u](h)),done:!1}:c?c(h):h}:c}}function wh(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=l[Symbol.asyncIterator],s;return r?r.call(l):(l=typeof zi=="function"?zi(l):l[Symbol.iterator](),s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s);function o(c){s[c]=l[c]&&function(h){return new Promise(function(p,m){h=l[c](h),u(p,m,h.done,h.value)})}}function u(c,h,p,m){Promise.resolve(m).then(function(v){c({value:v,done:p})},h)}}function _h(l,r){return Object.defineProperty?Object.defineProperty(l,"raw",{value:r}):l.raw=r,l}var pm=Object.create?(function(l,r){Object.defineProperty(l,"default",{enumerable:!0,value:r})}):function(l,r){l.default=r},el=function(l){return el=Object.getOwnPropertyNames||function(r){var s=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[s.length]=o);return s},el(l)};function bh(l){if(l&&l.__esModule)return l;var r={};if(l!=null)for(var s=el(l),o=0;o<s.length;o++)s[o]!=="default"&&Hi(r,l,s[o]);return pm(r,l),r}function jh(l){return l&&l.__esModule?l:{default:l}}function kh(l,r,s,o){if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?l!==r||!o:!r.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(l):o?o.value:r.get(l)}function Sh(l,r,s,o,u){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?l!==r||!u:!r.has(l))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?u.call(l,s):u?u.value=s:r.set(l,s),s}function Nh(l,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof l=="function"?r===l:l.has(r)}function Eh(l,r,s){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var o,u;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=r[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=r[Symbol.dispose],s&&(u=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");u&&(o=function(){try{u.call(this)}catch(c){return Promise.reject(c)}}),l.stack.push({value:r,dispose:o,async:s})}else s&&l.stack.push({async:!0});return r}var mm=typeof SuppressedError=="function"?SuppressedError:function(l,r,s){var o=new Error(s);return o.name="SuppressedError",o.error=l,o.suppressed=r,o};function Ch(l){function r(c){l.error=l.hasError?new mm(c,l.error,"An error was suppressed during disposal."):c,l.hasError=!0}var s,o=0;function u(){for(;s=l.stack.pop();)try{if(!s.async&&o===1)return o=0,l.stack.push(s),Promise.resolve().then(u);if(s.dispose){var c=s.dispose.call(s.value);if(s.async)return o|=2,Promise.resolve(c).then(u,function(h){return r(h),u()})}else o|=1}catch(h){r(h)}if(o===1)return l.hasError?Promise.reject(l.error):Promise.resolve();if(l.hasError)throw l.error}return u()}function Th(l,r){return typeof l=="string"&&/^\.\.?\//.test(l)?l.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,o,u,c,h){return o?r?".jsx":".js":u&&(!c||!h)?s:u+c+"."+h.toLowerCase()+"js"}):l}const gm={__extends:ih,__assign:Mi,__rest:bn,__decorate:oh,__param:ah,__esDecorate:lh,__runInitializers:uh,__propKey:ch,__setFunctionName:dh,__metadata:hh,__awaiter:ue,__generator:fh,__createBinding:Hi,__exportStar:ph,__values:zi,__read:pl,__spread:mh,__spreadArrays:gh,__spreadArray:vh,__await:wn,__asyncGenerator:yh,__asyncDelegator:xh,__asyncValues:wh,__makeTemplateObject:_h,__importStar:bh,__importDefault:jh,__classPrivateFieldGet:kh,__classPrivateFieldSet:Sh,__classPrivateFieldIn:Nh,__addDisposableResource:Eh,__disposeResources:Ch,__rewriteRelativeImportExtension:Th},vm=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Eh,get __assign(){return Mi},__asyncDelegator:xh,__asyncGenerator:yh,__asyncValues:wh,__await:wn,__awaiter:ue,__classPrivateFieldGet:kh,__classPrivateFieldIn:Nh,__classPrivateFieldSet:Sh,__createBinding:Hi,__decorate:oh,__disposeResources:Ch,__esDecorate:lh,__exportStar:ph,__extends:ih,__generator:fh,__importDefault:jh,__importStar:bh,__makeTemplateObject:_h,__metadata:hh,__param:ah,__propKey:ch,__read:pl,__rest:bn,__rewriteRelativeImportExtension:Th,__runInitializers:uh,__setFunctionName:dh,__spread:mh,__spreadArray:vh,__spreadArrays:gh,__values:zi,default:gm},Symbol.toStringTag,{value:"Module"})),ym=l=>l?(...r)=>l(...r):(...r)=>fetch(...r);class ml extends Error{constructor(r,s="FunctionsError",o){super(r),this.name=s,this.context=o}}class xm extends ml{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Cd extends ml{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Td extends ml{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var tl;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(tl||(tl={}));class wm{constructor(r,{headers:s={},customFetch:o,region:u=tl.Any}={}){this.url=r,this.headers=s,this.region=u,this.fetch=ym(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return ue(this,arguments,void 0,function*(s,o={}){var u;let c,h;try{const{headers:p,method:m,body:v,signal:y,timeout:S}=o;let N={},{region:j}=o;j||(j=this.region);const T=new URL(`${this.url}/${s}`);j&&j!=="any"&&(N["x-region"]=j,T.searchParams.set("forceFunctionRegion",j));let O;v&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(N["Content-Type"]="application/octet-stream",O=v):typeof v=="string"?(N["Content-Type"]="text/plain",O=v):typeof FormData<"u"&&v instanceof FormData?O=v:(N["Content-Type"]="application/json",O=JSON.stringify(v)):O=v;let E=y;S&&(h=new AbortController,c=setTimeout(()=>h.abort(),S),y?(E=h.signal,y.addEventListener("abort",()=>h.abort())):E=h.signal);const H=yield this.fetch(T.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},N),this.headers),p),body:O,signal:E}).catch(te=>{throw new xm(te)}),U=H.headers.get("x-relay-error");if(U&&U==="true")throw new Cd(H);if(!H.ok)throw new Td(H);let L=((u=H.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),J;return L==="application/json"?J=yield H.json():L==="application/octet-stream"||L==="application/pdf"?J=yield H.blob():L==="text/event-stream"?J=H:L==="multipart/form-data"?J=yield H.formData():J=yield H.text(),{data:J,error:null,response:H}}catch(p){return{data:null,error:p,response:p instanceof Td||p instanceof Cd?p.context:void 0}}finally{c&&clearTimeout(c)}})}}var nt={};const jn=sm(vm);var Oi={},Pi={},Ri={},Ai={},Ii={},$i={},Od;function Oh(){if(Od)return $i;Od=1,Object.defineProperty($i,"__esModule",{value:!0});class l extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return $i.default=l,$i}var Pd;function Ph(){if(Pd)return Ii;Pd=1,Object.defineProperty(Ii,"__esModule",{value:!0});const r=jn.__importDefault(Oh());class s{constructor(u){var c,h;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(c=u.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=u.signal,this.isMaybeSingle=(h=u.isMaybeSingle)!==null&&h!==void 0?h:!1,u.fetch?this.fetch=u.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,c){return this.headers=new Headers(this.headers),this.headers.set(u,c),this}then(u,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let p=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var v,y,S,N;let j=null,T=null,O=null,E=m.status,H=m.statusText;if(m.ok){if(this.method!=="HEAD"){const te=await m.text();te===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?T=te:T=JSON.parse(te))}const L=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),J=(S=m.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");L&&J&&J.length>1&&(O=parseInt(J[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(j={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,O=null,E=406,H="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const L=await m.text();try{j=JSON.parse(L),Array.isArray(j)&&m.status===404&&(T=[],j=null,E=200,H="OK")}catch{m.status===404&&L===""?(E=204,H="No Content"):j={message:L}}if(j&&this.isMaybeSingle&&(!((N=j?.details)===null||N===void 0)&&N.includes("0 rows"))&&(j=null,E=200,H="OK"),j&&this.shouldThrowOnError)throw new r.default(j)}return{error:j,data:T,count:O,status:E,statusText:H}});return this.shouldThrowOnError||(p=p.catch(m=>{var v,y,S,N,j,T;let O="";const E=m?.cause;if(E){const H=(v=E?.message)!==null&&v!==void 0?v:"",U=(y=E?.code)!==null&&y!==void 0?y:"";O=`${(S=m?.name)!==null&&S!==void 0?S:"FetchError"}: ${m?.message}`,O+=`

Caused by: ${(N=E?.name)!==null&&N!==void 0?N:"Error"}: ${H}`,U&&(O+=` (${U})`),E?.stack&&(O+=`
${E.stack}`)}else O=(j=m?.stack)!==null&&j!==void 0?j:"";return{error:{message:`${(T=m?.name)!==null&&T!==void 0?T:"FetchError"}: ${m?.message}`,details:O,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),p.then(u,c)}returns(){return this}overrideTypes(){return this}}return Ii.default=s,Ii}var Rd;function Rh(){if(Rd)return Ai;Rd=1,Object.defineProperty(Ai,"__esModule",{value:!0});const r=jn.__importDefault(Ph());class s extends r.default{select(u){let c=!1;const h=(u??"*").split("").map(p=>/\s/.test(p)&&!c?"":(p==='"'&&(c=!c),p)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(u,{ascending:c=!0,nullsFirst:h,foreignTable:p,referencedTable:m=p}={}){const v=m?`${m}.order`:"order",y=this.url.searchParams.get(v);return this.url.searchParams.set(v,`${y?`${y},`:""}${u}.${c?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:c,referencedTable:h=c}={}){const p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${u}`),this}range(u,c,{foreignTable:h,referencedTable:p=h}={}){const m=typeof p>"u"?"offset":`${p}.offset`,v=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${u}`),this.url.searchParams.set(v,`${c-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:u=!1,verbose:c=!1,settings:h=!1,buffers:p=!1,wal:m=!1,format:v="text"}={}){var y;const S=[u?"analyze":null,c?"verbose":null,h?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),N=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${v}; for="${N}"; options=${S};`),v==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(u){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${u}`),this}}return Ai.default=s,Ai}var Ad;function gl(){if(Ad)return Ri;Ad=1,Object.defineProperty(Ri,"__esModule",{value:!0});const r=jn.__importDefault(Rh()),s=new RegExp("[,()]");class o extends r.default{eq(c,h){return this.url.searchParams.append(c,`eq.${h}`),this}neq(c,h){return this.url.searchParams.append(c,`neq.${h}`),this}gt(c,h){return this.url.searchParams.append(c,`gt.${h}`),this}gte(c,h){return this.url.searchParams.append(c,`gte.${h}`),this}lt(c,h){return this.url.searchParams.append(c,`lt.${h}`),this}lte(c,h){return this.url.searchParams.append(c,`lte.${h}`),this}like(c,h){return this.url.searchParams.append(c,`like.${h}`),this}likeAllOf(c,h){return this.url.searchParams.append(c,`like(all).{${h.join(",")}}`),this}likeAnyOf(c,h){return this.url.searchParams.append(c,`like(any).{${h.join(",")}}`),this}ilike(c,h){return this.url.searchParams.append(c,`ilike.${h}`),this}ilikeAllOf(c,h){return this.url.searchParams.append(c,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(c,h){return this.url.searchParams.append(c,`ilike(any).{${h.join(",")}}`),this}regexMatch(c,h){return this.url.searchParams.append(c,`match.${h}`),this}regexIMatch(c,h){return this.url.searchParams.append(c,`imatch.${h}`),this}is(c,h){return this.url.searchParams.append(c,`is.${h}`),this}isDistinct(c,h){return this.url.searchParams.append(c,`isdistinct.${h}`),this}in(c,h){const p=Array.from(new Set(h)).map(m=>typeof m=="string"&&s.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(c,`in.(${p})`),this}contains(c,h){return typeof h=="string"?this.url.searchParams.append(c,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(c,`cs.{${h.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(h)}`),this}containedBy(c,h){return typeof h=="string"?this.url.searchParams.append(c,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(c,`cd.{${h.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(h)}`),this}rangeGt(c,h){return this.url.searchParams.append(c,`sr.${h}`),this}rangeGte(c,h){return this.url.searchParams.append(c,`nxl.${h}`),this}rangeLt(c,h){return this.url.searchParams.append(c,`sl.${h}`),this}rangeLte(c,h){return this.url.searchParams.append(c,`nxr.${h}`),this}rangeAdjacent(c,h){return this.url.searchParams.append(c,`adj.${h}`),this}overlaps(c,h){return typeof h=="string"?this.url.searchParams.append(c,`ov.${h}`):this.url.searchParams.append(c,`ov.{${h.join(",")}}`),this}textSearch(c,h,{config:p,type:m}={}){let v="";m==="plain"?v="pl":m==="phrase"?v="ph":m==="websearch"&&(v="w");const y=p===void 0?"":`(${p})`;return this.url.searchParams.append(c,`${v}fts${y}.${h}`),this}match(c){return Object.entries(c).forEach(([h,p])=>{this.url.searchParams.append(h,`eq.${p}`)}),this}not(c,h,p){return this.url.searchParams.append(c,`not.${h}.${p}`),this}or(c,{foreignTable:h,referencedTable:p=h}={}){const m=p?`${p}.or`:"or";return this.url.searchParams.append(m,`(${c})`),this}filter(c,h,p){return this.url.searchParams.append(c,`${h}.${p}`),this}}return Ri.default=o,Ri}var Id;function Ah(){if(Id)return Pi;Id=1,Object.defineProperty(Pi,"__esModule",{value:!0});const r=jn.__importDefault(gl());class s{constructor(u,{headers:c={},schema:h,fetch:p}){this.url=u,this.headers=new Headers(c),this.schema=h,this.fetch=p}select(u,c){const{head:h=!1,count:p}=c??{},m=h?"HEAD":"GET";let v=!1;const y=(u??"*").split("").map(S=>/\s/.test(S)&&!v?"":(S==='"'&&(v=!v),S)).join("");return this.url.searchParams.set("select",y),p&&this.headers.append("Prefer",`count=${p}`),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(u,{count:c,defaultToNull:h=!0}={}){var p;const m="POST";if(c&&this.headers.append("Prefer",`count=${c}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const v=u.reduce((y,S)=>y.concat(Object.keys(S)),[]);if(v.length>0){const y=[...new Set(v)].map(S=>`"${S}"`);this.url.searchParams.set("columns",y.join(","))}}return new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(u,{onConflict:c,ignoreDuplicates:h=!1,count:p,defaultToNull:m=!0}={}){var v;const y="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),p&&this.headers.append("Prefer",`count=${p}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const S=u.reduce((N,j)=>N.concat(Object.keys(j)),[]);if(S.length>0){const N=[...new Set(S)].map(j=>`"${j}"`);this.url.searchParams.set("columns",N.join(","))}}return new r.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}update(u,{count:c}={}){var h;const p="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:u}={}){var c;const h="DELETE";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Pi.default=s,Pi}var $d;function _m(){if($d)return Oi;$d=1,Object.defineProperty(Oi,"__esModule",{value:!0});const l=jn,r=l.__importDefault(Ah()),s=l.__importDefault(gl());class o{constructor(c,{headers:h={},schema:p,fetch:m}={}){this.url=c,this.headers=new Headers(h),this.schemaName=p,this.fetch=m}from(c){if(!c||typeof c!="string"||c.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const h=new URL(`${this.url}/${c}`);return new r.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new o(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,h={},{head:p=!1,get:m=!1,count:v}={}){var y;let S;const N=new URL(`${this.url}/rpc/${c}`);let j;p||m?(S=p?"HEAD":"GET",Object.entries(h).filter(([O,E])=>E!==void 0).map(([O,E])=>[O,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([O,E])=>{N.searchParams.append(O,E)})):(S="POST",j=h);const T=new Headers(this.headers);return v&&T.set("Prefer",`count=${v}`),new s.default({method:S,url:N,headers:T,schema:this.schemaName,body:j,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return Oi.default=o,Oi}var Dd;function bm(){if(Dd)return nt;Dd=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.PostgrestError=nt.PostgrestBuilder=nt.PostgrestTransformBuilder=nt.PostgrestFilterBuilder=nt.PostgrestQueryBuilder=nt.PostgrestClient=void 0;const l=jn,r=l.__importDefault(_m());nt.PostgrestClient=r.default;const s=l.__importDefault(Ah());nt.PostgrestQueryBuilder=s.default;const o=l.__importDefault(gl());nt.PostgrestFilterBuilder=o.default;const u=l.__importDefault(Rh());nt.PostgrestTransformBuilder=u.default;const c=l.__importDefault(Ph());nt.PostgrestBuilder=c.default;const h=l.__importDefault(Oh());return nt.PostgrestError=h.default,nt.default={PostgrestClient:r.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:u.default,PostgrestBuilder:c.default,PostgrestError:h.default},nt}var Ih=bm();const $h=nm(Ih),jm=rm({__proto__:null,default:$h},[Ih]),{PostgrestClient:km,PostgrestQueryBuilder:av,PostgrestFilterBuilder:lv,PostgrestTransformBuilder:uv,PostgrestBuilder:cv,PostgrestError:dv}=$h||jm;class Sm{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const o=s.node,u=parseInt(o.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let s=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(s+=`

Suggested solution: ${r.workaround}`),new Error(s)}static createWebSocket(r,s){const o=this.getWebSocketConstructor();return new o(r,s)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const Nm="2.84.0",Em=`realtime-js/${Nm}`,Dh="1.0.0",Cm="2.0.0",Ld=Dh,rl=1e4,Tm=1e3,Om=100;var Dr;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(Dr||(Dr={}));var We;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(We||(We={}));var It;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(It||(It={}));var nl;(function(l){l.websocket="websocket"})(nl||(nl={}));var Lr;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(Lr||(Lr={}));class Pm{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(r,s){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return s(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var s;return this._isArrayBuffer((s=r.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var s,o,u,c;const h=r.topic,p=(s=r.ref)!==null&&s!==void 0?s:"",m=(o=r.join_ref)!==null&&o!==void 0?o:"",v=r.payload.event,y=(c=(u=r.payload)===null||u===void 0?void 0:u.payload)!==null&&c!==void 0?c:new ArrayBuffer(0),S=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+h.length+v.length,N=new ArrayBuffer(this.HEADER_LENGTH+S);let j=new DataView(N),T=0;j.setUint8(T++,this.KINDS.userBroadcastPush),j.setUint8(T++,m.length),j.setUint8(T++,p.length),j.setUint8(T++,h.length),j.setUint8(T++,v.length),j.setUint8(T++,this.BINARY_ENCODING),Array.from(m,E=>j.setUint8(T++,E.charCodeAt(0))),Array.from(p,E=>j.setUint8(T++,E.charCodeAt(0))),Array.from(h,E=>j.setUint8(T++,E.charCodeAt(0))),Array.from(v,E=>j.setUint8(T++,E.charCodeAt(0)));var O=new Uint8Array(N.byteLength+y.byteLength);return O.set(new Uint8Array(N),0),O.set(new Uint8Array(y),N.byteLength),O.buffer}_encodeJsonUserBroadcastPush(r){var s,o,u,c;const h=r.topic,p=(s=r.ref)!==null&&s!==void 0?s:"",m=(o=r.join_ref)!==null&&o!==void 0?o:"",v=r.payload.event,y=(c=(u=r.payload)===null||u===void 0?void 0:u.payload)!==null&&c!==void 0?c:{},N=new TextEncoder().encode(JSON.stringify(y)).buffer,j=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+h.length+v.length,T=new ArrayBuffer(this.HEADER_LENGTH+j);let O=new DataView(T),E=0;O.setUint8(E++,this.KINDS.userBroadcastPush),O.setUint8(E++,m.length),O.setUint8(E++,p.length),O.setUint8(E++,h.length),O.setUint8(E++,v.length),O.setUint8(E++,this.JSON_ENCODING),Array.from(m,U=>O.setUint8(E++,U.charCodeAt(0))),Array.from(p,U=>O.setUint8(E++,U.charCodeAt(0))),Array.from(h,U=>O.setUint8(E++,U.charCodeAt(0))),Array.from(v,U=>O.setUint8(E++,U.charCodeAt(0)));var H=new Uint8Array(T.byteLength+N.byteLength);return H.set(new Uint8Array(T),0),H.set(new Uint8Array(N),T.byteLength),H.buffer}decode(r,s){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return s(o)}if(typeof r=="string"){const o=JSON.parse(r),[u,c,h,p,m]=o;return s({join_ref:u,ref:c,topic:h,event:p,payload:m})}return s({})}_binaryDecode(r){const s=new DataView(r),o=s.getUint8(0),u=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,s,u)}}_decodeUserBroadcast(r,s,o){const u=s.getUint8(1),c=s.getUint8(2),h=s.getUint8(3),p=s.getUint8(4);let m=this.HEADER_LENGTH+4;const v=o.decode(r.slice(m,m+u));m=m+u;const y=o.decode(r.slice(m,m+c));m=m+c;const S=o.decode(r.slice(m,m+h));m=m+h;const N=r.slice(m,r.byteLength),j=p===this.JSON_ENCODING?JSON.parse(o.decode(N)):N,T={type:this.BROADCAST_EVENT,event:y,payload:j};return h>0&&(T.meta=JSON.parse(S)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(r){var s;return r instanceof ArrayBuffer||((s=r?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}}class Lh{constructor(r,s){this.callback=r,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Oe||(Oe={}));const Ud=(l,r,s={})=>{var o;const u=(o=s.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((c,h)=>(c[h]=Rm(h,l,r,u),c),{}):{}},Rm=(l,r,s,o)=>{const u=r.find(p=>p.name===l),c=u?.type,h=s[l];return c&&!o.includes(c)?Uh(c,h):sl(h)},Uh=(l,r)=>{if(l.charAt(0)==="_"){const s=l.slice(1,l.length);return Dm(r,s)}switch(l){case Oe.bool:return Am(r);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return Im(r);case Oe.json:case Oe.jsonb:return $m(r);case Oe.timestamp:return Lm(r);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return sl(r);default:return sl(r)}},sl=l=>l,Am=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},Im=l=>{if(typeof l=="string"){const r=parseFloat(l);if(!Number.isNaN(r))return r}return l},$m=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(r){return console.log(`JSON parse error: ${r}`),l}return l},Dm=(l,r)=>{if(typeof l!="string")return l;const s=l.length-1,o=l[s];if(l[0]==="{"&&o==="}"){let c;const h=l.slice(1,s);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(p=>Uh(r,p))}return l},Lm=l=>typeof l=="string"?l.replace(" ","T"):l,Mh=l=>{const r=new URL(l);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Va{constructor(r,s,o={},u=rl){this.channel=r,this.event=s,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,s){var o;return this._hasReceived(r)&&s((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:s}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(s))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Md;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(Md||(Md={}));class hs{constructor(r,s){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hs.syncState(this.state,u,c,h),this.pendingDiffs.forEach(m=>{this.state=hs.syncDiff(this.state,m,c,h)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},u=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=hs.syncDiff(this.state,u,c,h),p())}),this.onJoin((u,c,h)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:c,newPresences:h})}),this.onLeave((u,c,h)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,s,o,u){const c=this.cloneDeep(r),h=this.transformState(s),p={},m={};return this.map(c,(v,y)=>{h[v]||(m[v]=y)}),this.map(h,(v,y)=>{const S=c[v];if(S){const N=y.map(E=>E.presence_ref),j=S.map(E=>E.presence_ref),T=y.filter(E=>j.indexOf(E.presence_ref)<0),O=S.filter(E=>N.indexOf(E.presence_ref)<0);T.length>0&&(p[v]=T),O.length>0&&(m[v]=O)}else p[v]=y}),this.syncDiff(c,{joins:p,leaves:m},o,u)}static syncDiff(r,s,o,u){const{joins:c,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(c,(p,m)=>{var v;const y=(v=r[p])!==null&&v!==void 0?v:[];if(r[p]=this.cloneDeep(m),y.length>0){const S=r[p].map(j=>j.presence_ref),N=y.filter(j=>S.indexOf(j.presence_ref)<0);r[p].unshift(...N)}o(p,y,m)}),this.map(h,(p,m)=>{let v=r[p];if(!v)return;const y=m.map(S=>S.presence_ref);v=v.filter(S=>y.indexOf(S.presence_ref)<0),r[p]=v,u(p,v,m),v.length===0&&delete r[p]}),r}static map(r,s){return Object.getOwnPropertyNames(r).map(o=>s(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((s,o)=>{const u=r[o];return"metas"in u?s[o]=u.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[o]=u,s},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zd;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(zd||(zd={}));var fs;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(fs||(fs={}));var Yt;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Yt||(Yt={}));class vl{constructor(r,s={config:{}},o){var u,c;if(this.topic=r,this.params=s,this.socket=o,this.bindings={},this.state=We.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Va(this,It.join,this.params,this.timeout),this.rejoinTimer=new Lh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=We.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=We.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this._on(It.reply,{},(h,p)=>{this._trigger(this._replyEventName(p),h)}),this.presence=new hs(this),this.broadcastEndpointURL=Mh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,s=this.timeout){var o,u,c;if(this.socket.isConnected()||this.socket.connect(),this.state==We.closed){const{config:{broadcast:h,presence:p,private:m}}=this.params,v=(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(j=>j.filter))!==null&&u!==void 0?u:[],y=!!this.bindings[fs.PRESENCE]&&this.bindings[fs.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,S={},N={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:y}),postgres_changes:v,private:m};this.socket.accessTokenValue&&(S.access_token=this.socket.accessTokenValue),this._onError(j=>r?.(Yt.CHANNEL_ERROR,j)),this._onClose(()=>r?.(Yt.CLOSED)),this.updateJoinPayload(Object.assign({config:N},S)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:j})=>{var T;if(this.socket.setAuth(),j===void 0){r?.(Yt.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,E=(T=O?.length)!==null&&T!==void 0?T:0,H=[];for(let U=0;U<E;U++){const L=O[U],{filter:{event:J,schema:te,table:oe,filter:he}}=L,F=j&&j[U];if(F&&F.event===J&&F.schema===te&&F.table===oe&&F.filter===he)H.push(Object.assign(Object.assign({},L),{id:F.id}));else{this.unsubscribe(),this.state=We.errored,r?.(Yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=H,r&&r(Yt.SUBSCRIBED);return}}).receive("error",j=>{this.state=We.errored,r?.(Yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{r?.(Yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,s={}){return await this.send({type:"presence",event:"track",payload:r},s.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,s,o){return this.state===We.joined&&r===fs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,s,o)}async httpSend(r,s,o={}){var u;const c=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:c,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:s,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(u=o.timeout)!==null&&u!==void 0?u:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const v=await p.json();m=v.error||v.message||m}catch{}return Promise.reject(new Error(m))}async send(r,s={}){var o,u;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:h}=r,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);return await((u=v.body)===null||u===void 0?void 0:u.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,p,m;const v=this._push(r.type,r,s.timeout||this.timeout);r.type==="broadcast"&&!(!((m=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),v.receive("ok",()=>c("ok")),v.receive("error",()=>c("error")),v.receive("timeout",()=>c("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=We.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(It.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(u=>{o=new Va(this,It.leave,{},r),o.receive("ok",()=>{s(),u("ok")}).receive("timeout",()=>{s(),u("timed out")}).receive("error",()=>{u("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=We.closed,this.bindings={}}async _fetchWithTimeout(r,s,o){const u=new AbortController,c=setTimeout(()=>u.abort(),o),h=await this.socket.fetch(r,Object.assign(Object.assign({},s),{signal:u.signal}));return clearTimeout(c),h}_push(r,s,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Va(this,r,s,o);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Om){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(r,s,o){return s}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,s,o){var u,c;const h=r.toLocaleLowerCase(),{close:p,error:m,leave:v,join:y}=It;if(o&&[p,m,v,y].indexOf(h)>=0&&o!==this._joinRef())return;let N=this._onMessage(h,s,o);if(s&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(j=>{var T,O,E;return((T=j.filter)===null||T===void 0?void 0:T.event)==="*"||((E=(O=j.filter)===null||O===void 0?void 0:O.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===h}).map(j=>j.callback(N,o)):(c=this.bindings[h])===null||c===void 0||c.filter(j=>{var T,O,E,H,U,L;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in j){const J=j.id,te=(T=j.filter)===null||T===void 0?void 0:T.event;return J&&((O=s.ids)===null||O===void 0?void 0:O.includes(J))&&(te==="*"||te?.toLocaleLowerCase()===((E=s.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const J=(U=(H=j?.filter)===null||H===void 0?void 0:H.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return J==="*"||J===((L=s?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===h}).map(j=>{if(typeof N=="object"&&"ids"in N){const T=N.data,{schema:O,table:E,commit_timestamp:H,type:U,errors:L}=T;N=Object.assign(Object.assign({},{schema:O,table:E,commit_timestamp:H,eventType:U,new:{},old:{},errors:L}),this._getPayloadRecords(T))}j.callback(N,o)})}_isClosed(){return this.state===We.closed}_isJoined(){return this.state===We.joined}_isJoining(){return this.state===We.joining}_isLeaving(){return this.state===We.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,s,o){const u=r.toLocaleLowerCase(),c={type:u,filter:s,callback:o};return this.bindings[u]?this.bindings[u].push(c):this.bindings[u]=[c],this}_off(r,s){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(u=>{var c;return!(((c=u.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&vl.isEqual(u.filter,s))})),this}static isEqual(r,s){if(Object.keys(r).length!==Object.keys(s).length)return!1;for(const o in r)if(r[o]!==s[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(It.close,{},r)}_onError(r){this._on(It.error,{},s=>r(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=We.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const s={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(s.new=Ud(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(s.old=Ud(r.columns,r.old_record)),s}}const Ha=()=>{},Di={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Um=[1e3,2e3,5e3,1e4],Mm=1e4,zm=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fm{constructor(r,s){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=rl,this.transport=null,this.heartbeatIntervalMs=Di.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ha,this.ref=0,this.reconnectTimer=null,this.vsn=Ld,this.logger=Ha,this.conn=null,this.sendBuffer=[],this.serializer=new Pm,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>u?(...c)=>u(...c):(...c)=>fetch(...c),!(!((o=s?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${r}/${nl.websocket}`,this.httpEndpoint=Mh(r),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Sm.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const s=r.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const s=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const r=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,s,o){this.logger(r,s,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Dr.connecting:return Lr.Connecting;case Dr.open:return Lr.Open;case Dr.closing:return Lr.Closing;default:return Lr.Closed}}isConnected(){return this.connectionState()===Lr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,s={config:{}}){const o=`realtime:${r}`,u=this.getChannels().find(c=>c.topic===o);if(u)return u;{const c=new vl(`realtime:${r}`,s,this);return this.channels.push(c),c}}push(r){const{topic:s,event:o,payload:u,ref:c}=r,h=()=>{this.encode(r,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${s} ${o} (${c})`,u),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Tm,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Di.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let s=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${r}"`),s.unsubscribe())}_remove(r){this.channels=this.channels.filter(s=>s.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:u,payload:c,ref:h}=s,p=h?`(${h})`:"",m=c.status||"";this.log("receive",`${m} ${o} ${u} ${p}`.trim(),c),this.channels.filter(v=>v._isMember(o)).forEach(v=>v._trigger(u,c,h)),this._triggerStateCallbacks("message",s)})}_clearTimer(r){var s;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Dr.open||this.conn.readyState===Dr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var s;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(It.error))}_appendParams(r,s){if(Object.keys(s).length===0)return r;const o=r.match(/\?/)?"&":"?",u=new URLSearchParams(s);return`${r}${o}${u}`}_workerObjectUrl(r){let s;if(r)s=r;else{const o=new Blob([zm],{type:"application/javascript"});s=URL.createObjectURL(o)}return s}_setConnectionState(r,s=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(r=null){let s;r?s=r:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(o=>{const u={access_token:s,version:Em};s&&o.updateJoinPayload(u),o.joinedOnce&&o._isJoined()&&o._push(It.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${r}`,s)})}_triggerStateCallbacks(r,s){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(s)}catch(u){this.log("error",`error in ${r} callback`,u)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Lh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Di.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var s,o,u,c,h,p,m,v,y,S,N,j;switch(this.transport=(s=r?.transport)!==null&&s!==void 0?s:null,this.timeout=(o=r?.timeout)!==null&&o!==void 0?o:rl,this.heartbeatIntervalMs=(u=r?.heartbeatIntervalMs)!==null&&u!==void 0?u:Di.HEARTBEAT_INTERVAL,this.worker=(c=r?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(h=r?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=r?.heartbeatCallback)!==null&&p!==void 0?p:Ha,this.vsn=(m=r?.vsn)!==null&&m!==void 0?m:Ld,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=r?.reconnectAfterMs)!==null&&v!==void 0?v:(T=>Um[T-1]||Mm),this.vsn){case Dh:this.encode=(y=r?.encode)!==null&&y!==void 0?y:((T,O)=>O(JSON.stringify(T))),this.decode=(S=r?.decode)!==null&&S!==void 0?S:((T,O)=>O(JSON.parse(T)));break;case Cm:this.encode=(N=r?.encode)!==null&&N!==void 0?N:this.serializer.encode.bind(this.serializer),this.decode=(j=r?.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class yl extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function De(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class Bm extends yl{constructor(r,s,o){super(r),this.name="StorageApiError",this.status=s,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class il extends yl{constructor(r,s){super(r),this.name="StorageUnknownError",this.originalError=s}}const xl=l=>l?(...r)=>l(...r):(...r)=>fetch(...r),qm=()=>Response,ol=l=>{if(Array.isArray(l))return l.map(s=>ol(s));if(typeof l=="function"||l!==Object(l))return l;const r={};return Object.entries(l).forEach(([s,o])=>{const u=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));r[u]=ol(o)}),r},Vm=l=>{if(typeof l!="object"||l===null)return!1;const r=Object.getPrototypeOf(l);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},Wa=l=>{var r;return l.msg||l.message||l.error_description||(typeof l.error=="string"?l.error:(r=l.error)===null||r===void 0?void 0:r.message)||JSON.stringify(l)},Hm=(l,r,s)=>ue(void 0,void 0,void 0,function*(){const o=yield qm();l instanceof o&&!s?.noResolveJson?l.json().then(u=>{const c=l.status||500,h=u?.statusCode||c+"";r(new Bm(Wa(u),c,h))}).catch(u=>{r(new il(Wa(u),u))}):r(new il(Wa(l),l))}),Wm=(l,r,s,o)=>{const u={method:l,headers:r?.headers||{}};return l==="GET"||!o?u:(Vm(o)?(u.headers=Object.assign({"Content-Type":"application/json"},r?.headers),u.body=JSON.stringify(o)):u.body=o,r?.duplex&&(u.duplex=r.duplex),Object.assign(Object.assign({},u),s))};function ys(l,r,s,o,u,c){return ue(this,void 0,void 0,function*(){return new Promise((h,p)=>{l(s,Wm(r,o,u,c)).then(m=>{if(!m.ok)throw m;return o?.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>Hm(m,p,o))})})}function ps(l,r,s,o){return ue(this,void 0,void 0,function*(){return ys(l,"GET",r,s,o)})}function At(l,r,s,o,u){return ue(this,void 0,void 0,function*(){return ys(l,"POST",r,o,u,s)})}function al(l,r,s,o,u){return ue(this,void 0,void 0,function*(){return ys(l,"PUT",r,o,u,s)})}function Km(l,r,s,o){return ue(this,void 0,void 0,function*(){return ys(l,"HEAD",r,Object.assign(Object.assign({},s),{noResolveJson:!0}),o)})}function wl(l,r,s,o,u){return ue(this,void 0,void 0,function*(){return ys(l,"DELETE",r,o,u,s)})}class Gm{constructor(r,s){this.downloadFn=r,this.shouldThrowOnError=s}then(r,s){return this.execute().then(r,s)}execute(){return ue(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}})}}var zh;class Jm{constructor(r,s){this.downloadFn=r,this.shouldThrowOnError=s,this[zh]="BlobDownloadBuilder",this.promise=null}asStream(){return new Gm(this.downloadFn,this.shouldThrowOnError)}then(r,s){return this.getPromise().then(r,s)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ue(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}})}}zh=Symbol.toStringTag;const Qm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ym{constructor(r,s={},o,u){this.shouldThrowOnError=!1,this.url=r,this.headers=s,this.bucketId=o,this.fetch=xl(u)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,s,o,u){return ue(this,void 0,void 0,function*(){try{let c;const h=Object.assign(Object.assign({},Fd),u);let p=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&o instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),m&&c.append("metadata",this.encodeMetadata(m)),c.append("",o)):typeof FormData<"u"&&o instanceof FormData?(c=o,c.has("cacheControl")||c.append("cacheControl",h.cacheControl),m&&!c.has("metadata")&&c.append("metadata",this.encodeMetadata(m))):(c=o,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!h.duplex&&(h.duplex="half")),u?.headers&&(p=Object.assign(Object.assign({},p),u.headers));const v=this._removeEmptyFolders(s),y=this._getFinalPath(v),S=yield(r=="PUT"?al:At)(this.fetch,`${this.url}/object/${y}`,c,Object.assign({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:v,id:S.Id,fullPath:S.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}upload(r,s,o){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,s,o)})}uploadToSignedUrl(r,s,o,u){return ue(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(r),h=this._getFinalPath(c),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",s);try{let m;const v=Object.assign({upsert:Fd.upsert},u),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&o instanceof Blob?(m=new FormData,m.append("cacheControl",v.cacheControl),m.append("",o)):typeof FormData<"u"&&o instanceof FormData?(m=o,m.append("cacheControl",v.cacheControl)):(m=o,y["cache-control"]=`max-age=${v.cacheControl}`,y["content-type"]=v.contentType);const S=yield al(this.fetch,p.toString(),m,{headers:y});return{data:{path:c,fullPath:S.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(De(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(r,s){return ue(this,void 0,void 0,function*(){try{let o=this._getFinalPath(r);const u=Object.assign({},this.headers);s?.upsert&&(u["x-upsert"]="true");const c=yield At(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:u}),h=new URL(this.url+c.url),p=h.searchParams.get("token");if(!p)throw new yl("No token returned by API");return{data:{signedUrl:h.toString(),path:r,token:p},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(De(o))return{data:null,error:o};throw o}})}update(r,s,o){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,s,o)})}move(r,s,o){return ue(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(De(u))return{data:null,error:u};throw u}})}copy(r,s,o){return ue(this,void 0,void 0,function*(){try{return{data:{path:(yield At(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(De(u))return{data:null,error:u};throw u}})}createSignedUrl(r,s,o){return ue(this,void 0,void 0,function*(){try{let u=this._getFinalPath(r),c=yield At(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:s},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const h=o?.download?`&download=${o.download===!0?"":o.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${h}`)},{data:c,error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(De(u))return{data:null,error:u};throw u}})}createSignedUrls(r,s,o){return ue(this,void 0,void 0,function*(){try{const u=yield At(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:r},{headers:this.headers}),c=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:u.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${c}`):null})),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(De(u))return{data:null,error:u};throw u}})}download(r,s){const u=typeof s?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(s?.transform||{}),h=c?`?${c}`:"",p=this._getFinalPath(r),m=()=>ps(this.fetch,`${this.url}/${u}/${p}${h}`,{headers:this.headers,noResolveJson:!0});return new Jm(m,this.shouldThrowOnError)}info(r){return ue(this,void 0,void 0,function*(){const s=this._getFinalPath(r);try{const o=yield ps(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ol(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(De(o))return{data:null,error:o};throw o}})}exists(r){return ue(this,void 0,void 0,function*(){const s=this._getFinalPath(r);try{return yield Km(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(De(o)&&o instanceof il){const u=o.originalError;if([400,404].includes(u?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(r,s){const o=this._getFinalPath(r),u=[],c=s?.download?`download=${s.download===!0?"":s.download}`:"";c!==""&&u.push(c);const p=typeof s?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(s?.transform||{});m!==""&&u.push(m);let v=u.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${o}${v}`)}}}remove(r){return ue(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(De(s))return{data:null,error:s};throw s}})}list(r,s,o){return ue(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},Qm),s),{prefix:r||""});return{data:yield At(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},o),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(De(u))return{data:null,error:u};throw u}})}listV2(r,s){return ue(this,void 0,void 0,function*(){try{const o=Object.assign({},r);return{data:yield At(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(De(o))return{data:null,error:o};throw o}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const s=[];return r.width&&s.push(`width=${r.width}`),r.height&&s.push(`height=${r.height}`),r.resize&&s.push(`resize=${r.resize}`),r.format&&s.push(`format=${r.format}`),r.quality&&s.push(`quality=${r.quality}`),s.join("&")}}const Fh="2.84.0",Bh={"X-Client-Info":`storage-js/${Fh}`};class Xm{constructor(r,s={},o,u){this.shouldThrowOnError=!1;const c=new URL(r);u?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Bh),s),this.fetch=xl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return ue(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(r);return{data:yield ps(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(De(s))return{data:null,error:s};throw s}})}getBucket(r){return ue(this,void 0,void 0,function*(){try{return{data:yield ps(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(De(s))return{data:null,error:s};throw s}})}createBucket(r){return ue(this,arguments,void 0,function*(s,o={public:!1}){try{return{data:yield At(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(De(u))return{data:null,error:u};throw u}})}updateBucket(r,s){return ue(this,void 0,void 0,function*(){try{return{data:yield al(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(De(o))return{data:null,error:o};throw o}})}emptyBucket(r){return ue(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(De(s))return{data:null,error:s};throw s}})}deleteBucket(r){return ue(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(De(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(r){const s={};return r&&("limit"in r&&(s.limit=String(r.limit)),"offset"in r&&(s.offset=String(r.offset)),r.search&&(s.search=r.search),r.sortColumn&&(s.sortColumn=r.sortColumn),r.sortOrder&&(s.sortOrder=r.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}class Zm{constructor(r,s={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Bh),s),this.fetch=xl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return ue(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket`,{name:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(De(s))return{data:null,error:s};throw s}})}listBuckets(r){return ue(this,void 0,void 0,function*(){try{const s=new URLSearchParams;r?.limit!==void 0&&s.set("limit",r.limit.toString()),r?.offset!==void 0&&s.set("offset",r.offset.toString()),r?.sortColumn&&s.set("sortColumn",r.sortColumn),r?.sortOrder&&s.set("sortOrder",r.sortOrder),r?.search&&s.set("search",r.search);const o=s.toString(),u=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield ps(this.fetch,u,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(De(s))return{data:null,error:s};throw s}})}deleteBucket(r){return ue(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(De(s))return{data:null,error:s};throw s}})}}const _l={"X-Client-Info":`storage-js/${Fh}`,"Content-Type":"application/json"};class qh extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function vt(l){return typeof l=="object"&&l!==null&&"__isStorageVectorsError"in l}class Ka extends qh{constructor(r,s,o){super(r),this.name="StorageVectorsApiError",this.status=s,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class e0 extends qh{constructor(r,s){super(r),this.name="StorageVectorsUnknownError",this.originalError=s}}var Bd;(function(l){l.InternalError="InternalError",l.S3VectorConflictException="S3VectorConflictException",l.S3VectorNotFoundException="S3VectorNotFoundException",l.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",l.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",l.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Bd||(Bd={}));const bl=l=>l?(...r)=>l(...r):(...r)=>fetch(...r),t0=l=>{if(typeof l!="object"||l===null)return!1;const r=Object.getPrototypeOf(l);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},qd=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),r0=(l,r,s)=>ue(void 0,void 0,void 0,function*(){if(l&&typeof l=="object"&&"status"in l&&"ok"in l&&typeof l.status=="number"&&!s?.noResolveJson){const u=l.status||500,c=l;if(typeof c.json=="function")c.json().then(h=>{const p=h?.statusCode||h?.code||u+"";r(new Ka(qd(h),u,p))}).catch(()=>{const h=u+"",p=c.statusText||`HTTP ${u} error`;r(new Ka(p,u,h))});else{const h=u+"",p=c.statusText||`HTTP ${u} error`;r(new Ka(p,u,h))}}else r(new e0(qd(l),l))}),n0=(l,r,s,o)=>{const u={method:l,headers:r?.headers||{}};return o?(t0(o)?(u.headers=Object.assign({"Content-Type":"application/json"},r?.headers),u.body=JSON.stringify(o)):u.body=o,Object.assign(Object.assign({},u),s)):u};function s0(l,r,s,o,u,c){return ue(this,void 0,void 0,function*(){return new Promise((h,p)=>{l(s,n0(r,o,u,c)).then(m=>{if(!m.ok)throw m;if(o?.noResolveJson)return m;const v=m.headers.get("content-type");return!v||!v.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>r0(m,p,o))})})}function yt(l,r,s,o,u){return ue(this,void 0,void 0,function*(){return s0(l,"POST",r,o,u,s)})}class i0{constructor(r,s={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_l),s),this.fetch=bl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return ue(this,void 0,void 0,function*(){try{return{data:(yield yt(this.fetch,`${this.url}/CreateIndex`,r,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vt(s))return{data:null,error:s};throw s}})}getIndex(r,s){return ue(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:r,indexName:s},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(vt(o))return{data:null,error:o};throw o}})}listIndexes(r){return ue(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/ListIndexes`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vt(s))return{data:null,error:s};throw s}})}deleteIndex(r,s){return ue(this,void 0,void 0,function*(){try{return{data:(yield yt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:r,indexName:s},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(vt(o))return{data:null,error:o};throw o}})}}class o0{constructor(r,s={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_l),s),this.fetch=bl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return ue(this,void 0,void 0,function*(){try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield yt(this.fetch,`${this.url}/PutVectors`,r,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vt(s))return{data:null,error:s};throw s}})}getVectors(r){return ue(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/GetVectors`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vt(s))return{data:null,error:s};throw s}})}listVectors(r){return ue(this,void 0,void 0,function*(){try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield yt(this.fetch,`${this.url}/ListVectors`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vt(s))return{data:null,error:s};throw s}})}queryVectors(r){return ue(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/QueryVectors`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vt(s))return{data:null,error:s};throw s}})}deleteVectors(r){return ue(this,void 0,void 0,function*(){try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield yt(this.fetch,`${this.url}/DeleteVectors`,r,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vt(s))return{data:null,error:s};throw s}})}}class a0{constructor(r,s={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_l),s),this.fetch=bl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return ue(this,void 0,void 0,function*(){try{return{data:(yield yt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vt(s))return{data:null,error:s};throw s}})}getBucket(r){return ue(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vt(s))return{data:null,error:s};throw s}})}listBuckets(){return ue(this,arguments,void 0,function*(r={}){try{return{data:yield yt(this.fetch,`${this.url}/ListVectorBuckets`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vt(s))return{data:null,error:s};throw s}})}deleteBucket(r){return ue(this,void 0,void 0,function*(){try{return{data:(yield yt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vt(s))return{data:null,error:s};throw s}})}}class l0 extends a0{constructor(r,s={}){super(r,s.headers||{},s.fetch)}from(r){return new u0(this.url,this.headers,r,this.fetch)}}class u0 extends i0{constructor(r,s,o,u){super(r,s,u),this.vectorBucketName=o}createIndex(r){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ue(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const r=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ue(this,arguments,void 0,function*(s={}){return r.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(r){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ue(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,r)})}deleteIndex(r){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ue(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,r)})}index(r){return new c0(this.url,this.headers,this.vectorBucketName,r,this.fetch)}}class c0 extends o0{constructor(r,s,o,u,c){super(r,s,c),this.vectorBucketName=o,this.indexName=u}putVectors(r){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ue(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(r){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ue(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const r=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ue(this,arguments,void 0,function*(s={}){return r.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(r){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ue(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(r){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ue(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class d0 extends Xm{constructor(r,s={},o,u){super(r,s,o,u)}from(r){return new Ym(this.url,this.headers,r,this.fetch)}get vectors(){return new l0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Zm(this.url+"/iceberg",this.headers,this.fetch)}}const h0="2.84.0";let ds="";typeof Deno<"u"?ds="deno":typeof document<"u"?ds="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ds="react-native":ds="node";const f0={"X-Client-Info":`supabase-js-${ds}/${h0}`},p0={headers:f0},m0={schema:"public"},g0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},v0={},y0=l=>l?(...r)=>l(...r):(...r)=>fetch(...r),x0=()=>Headers,w0=(l,r,s)=>{const o=y0(s),u=x0();return async(c,h)=>{var p;const m=(p=await r())!==null&&p!==void 0?p:l;let v=new u(h?.headers);return v.has("apikey")||v.set("apikey",l),v.has("Authorization")||v.set("Authorization",`Bearer ${m}`),o(c,Object.assign(Object.assign({},h),{headers:v}))}};function _0(l){return l.endsWith("/")?l:l+"/"}function b0(l,r){var s,o;const{db:u,auth:c,realtime:h,global:p}=l,{db:m,auth:v,realtime:y,global:S}=r,N={db:Object.assign(Object.assign({},m),u),auth:Object.assign(Object.assign({},v),c),realtime:Object.assign(Object.assign({},y),h),storage:{},global:Object.assign(Object.assign(Object.assign({},S),p),{headers:Object.assign(Object.assign({},(s=S?.headers)!==null&&s!==void 0?s:{}),(o=p?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return l.accessToken?N.accessToken=l.accessToken:delete N.accessToken,N}function j0(l){const r=l?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_0(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Vh="2.84.0",vn=30*1e3,ll=3,Ga=ll*vn,k0="http://localhost:9999",S0="supabase.auth.token",N0={"X-Client-Info":`gotrue-js/${Vh}`},ul="X-Supabase-Api-Version",Hh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},E0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,C0=600*1e3;class ms extends Error{constructor(r,s,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=o}}function de(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class T0 extends ms{constructor(r,s,o){super(r,s,o),this.name="AuthApiError",this.status=s,this.code=o}}function O0(l){return de(l)&&l.name==="AuthApiError"}class Ur extends ms{constructor(r,s){super(r),this.name="AuthUnknownError",this.originalError=s}}class xr extends ms{constructor(r,s,o,u){super(r,o,u),this.name=s,this.status=o}}class gt extends xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function P0(l){return de(l)&&l.name==="AuthSessionMissingError"}class hn extends xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Li extends xr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Ui extends xr{constructor(r,s=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function R0(l){return de(l)&&l.name==="AuthImplicitGrantRedirectError"}class Vd extends xr{constructor(r,s=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cl extends xr{constructor(r,s){super(r,"AuthRetryableFetchError",s,void 0)}}function Ja(l){return de(l)&&l.name==="AuthRetryableFetchError"}class Hd extends xr{constructor(r,s,o){super(r,"AuthWeakPasswordError",s,"weak_password"),this.reasons=o}}class dl extends xr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wd=` 	
\r=`.split(""),A0=(()=>{const l=new Array(128);for(let r=0;r<l.length;r+=1)l[r]=-1;for(let r=0;r<Wd.length;r+=1)l[Wd[r].charCodeAt(0)]=-2;for(let r=0;r<Fi.length;r+=1)l[Fi[r].charCodeAt(0)]=r;return l})();function Kd(l,r,s){if(l!==null)for(r.queue=r.queue<<8|l,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;s(Fi[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;s(Fi[o]),r.queuedBits-=6}}function Wh(l,r,s){const o=A0[l];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)s(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function Gd(l){const r=[],s=h=>{r.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},c=h=>{D0(h,o,s)};for(let h=0;h<l.length;h+=1)Wh(l.charCodeAt(h),u,c);return r.join("")}function I0(l,r){if(l<=127){r(l);return}else if(l<=2047){r(192|l>>6),r(128|l&63);return}else if(l<=65535){r(224|l>>12),r(128|l>>6&63),r(128|l&63);return}else if(l<=1114111){r(240|l>>18),r(128|l>>12&63),r(128|l>>6&63),r(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function $0(l,r){for(let s=0;s<l.length;s+=1){let o=l.charCodeAt(s);if(o>55295&&o<=56319){const u=(o-55296)*1024&65535;o=(l.charCodeAt(s+1)-56320&65535|u)+65536,s+=1}I0(o,r)}}function D0(l,r,s){if(r.utf8seq===0){if(l<=127){s(l);return}for(let o=1;o<6;o+=1)if((l>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=l&31;else if(r.utf8seq===3)r.codepoint=l&15;else if(r.utf8seq===4)r.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|l&63,r.utf8seq-=1,r.utf8seq===0&&s(r.codepoint)}}function xn(l){const r=[],s={queue:0,queuedBits:0},o=u=>{r.push(u)};for(let u=0;u<l.length;u+=1)Wh(l.charCodeAt(u),s,o);return new Uint8Array(r)}function L0(l){const r=[];return $0(l,s=>r.push(s)),new Uint8Array(r)}function Mr(l){const r=[],s={queue:0,queuedBits:0},o=u=>{r.push(u)};return l.forEach(u=>Kd(u,s,o)),Kd(null,s,o),r.join("")}function U0(l){return Math.round(Date.now()/1e3)+l}function M0(){return Symbol("auth-callback")}const Xe=()=>typeof window<"u"&&typeof document<"u",Ar={tested:!1,writable:!1},Kh=()=>{if(!Xe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ar.tested)return Ar.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),Ar.tested=!0,Ar.writable=!0}catch{Ar.tested=!0,Ar.writable=!1}return Ar.writable};function z0(l){const r={},s=new URL(l);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((u,c)=>{r[c]=u})}catch{}return s.searchParams.forEach((o,u)=>{r[u]=o}),r}const Gh=l=>l?(...r)=>l(...r):(...r)=>fetch(...r),F0=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",yn=async(l,r,s)=>{await l.setItem(r,JSON.stringify(s))},Ir=async(l,r)=>{const s=await l.getItem(r);if(!s)return null;try{return JSON.parse(s)}catch{return s}},vr=async(l,r)=>{await l.removeItem(r)};class Wi{constructor(){this.promise=new Wi.promiseConstructor((r,s)=>{this.resolve=r,this.reject=s})}}Wi.promiseConstructor=Promise;function Qa(l){const r=l.split(".");if(r.length!==3)throw new dl("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!E0.test(r[o]))throw new dl("JWT not in base64url format");return{header:JSON.parse(Gd(r[0])),payload:JSON.parse(Gd(r[1])),signature:xn(r[2]),raw:{header:r[0],payload:r[1]}}}async function B0(l){return await new Promise(r=>{setTimeout(()=>r(null),l)})}function q0(l,r){return new Promise((o,u)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await l(c);if(!r(c,null,h)){o(h);return}}catch(h){if(!r(c,h)){u(h);return}}})()})}function V0(l){return("0"+l.toString(16)).substr(-2)}function H0(){const r=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=s.length;let u="";for(let c=0;c<56;c++)u+=s.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(r),Array.from(r,V0).join("")}async function W0(l){const s=new TextEncoder().encode(l),o=await crypto.subtle.digest("SHA-256",s),u=new Uint8Array(o);return Array.from(u).map(c=>String.fromCharCode(c)).join("")}async function K0(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const s=await W0(l);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fn(l,r,s=!1){const o=H0();let u=o;s&&(u+="/PASSWORD_RECOVERY"),await yn(l,`${r}-code-verifier`,u);const c=await K0(o);return[c,o===c?"plain":"s256"]}const G0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function J0(l){const r=l.headers.get(ul);if(!r||!r.match(G0))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Q0(l){if(!l)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(l<=r)throw new Error("JWT has expired")}function Y0(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const X0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pn(l){if(!X0.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ya(){const l={};return new Proxy(l,{get:(r,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Z0(l,r){return new Proxy(l,{get:(s,o,u)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const c=o.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,o,u)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(s,o,u)}})}function Jd(l){return JSON.parse(JSON.stringify(l))}const $r=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),eg=[502,503,504];async function Qd(l){var r;if(!F0(l))throw new cl($r(l),0);if(eg.includes(l.status))throw new cl($r(l),l.status);let s;try{s=await l.json()}catch(c){throw new Ur($r(c),c)}let o;const u=J0(l);if(u&&u.getTime()>=Hh["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?o=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(o=s.error_code),o){if(o==="weak_password")throw new Hd($r(s),l.status,((r=s.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new gt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new Hd($r(s),l.status,s.weak_password.reasons);throw new T0($r(s),l.status||500,o)}const tg=(l,r,s,o)=>{const u={method:l,headers:r?.headers||{}};return l==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),s))};async function ge(l,r,s,o){var u;const c=Object.assign({},o?.headers);c[ul]||(c[ul]=Hh["2024-01-01"].name),o?.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const h=(u=o?.query)!==null&&u!==void 0?u:{};o?.redirectTo&&(h.redirect_to=o.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await rg(l,r,s+p,{headers:c,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(m):{data:Object.assign({},m),error:null}}async function rg(l,r,s,o,u,c){const h=tg(r,o,u,c);let p;try{p=await l(s,Object.assign({},h))}catch(m){throw console.error(m),new cl($r(m),0)}if(p.ok||await Qd(p),o?.noResolveJson)return p;try{return await p.json()}catch(m){await Qd(m)}}function Rt(l){var r;let s=null;ig(l)&&(s=Object.assign({},l),l.expires_at||(s.expires_at=U0(l.expires_in)));const o=(r=l.user)!==null&&r!==void 0?r:l;return{data:{session:s,user:o},error:null}}function Yd(l){const r=Rt(l);return!r.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0)&&(r.data.weak_password=l.weak_password),r}function yr(l){var r;return{data:{user:(r=l.user)!==null&&r!==void 0?r:l},error:null}}function ng(l){return{data:l,error:null}}function sg(l){const{action_link:r,email_otp:s,hashed_token:o,redirect_to:u,verification_type:c}=l,h=bn(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:r,email_otp:s,hashed_token:o,redirect_to:u,verification_type:c},m=Object.assign({},h);return{data:{properties:p,user:m},error:null}}function Xd(l){return l}function ig(l){return l.access_token&&l.refresh_token&&l.expires_in}const Xa=["global","local","others"];class og{constructor({url:r="",headers:s={},fetch:o}){this.url=r,this.headers=s,this.fetch=Gh(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,s=Xa[0]){if(Xa.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xa.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(de(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,s={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:yr})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:s}=r,o=bn(r,["options"]),u=Object.assign(Object.assign({},o),s);return"newEmail"in o&&(u.new_email=o?.newEmail,delete u.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:sg,redirectTo:s?.redirectTo})}catch(s){if(de(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(r){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:yr})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async listUsers(r){var s,o,u,c,h,p,m;try{const v={nextPage:null,lastPage:0,total:0},y=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(c=(u=r?.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Xd});if(y.error)throw y.error;const S=await y.json(),N=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(m=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(T=>{const O=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(T.split(";")[1].split("=")[1]);v[`${E}Page`]=O}),v.total=parseInt(N)),{data:Object.assign(Object.assign({},S),v),error:null}}catch(v){if(de(v))return{data:{users:[]},error:v};throw v}}async getUserById(r){pn(r);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:yr})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async updateUserById(r,s){pn(r);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:s,headers:this.headers,xform:yr})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,s=!1){pn(r);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:s},xform:yr})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){pn(r.userId);try{const{data:s,error:o}=await ge(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:s,error:o}}catch(s){if(de(s))return{data:null,error:s};throw s}}async _deleteFactor(r){pn(r.userId),pn(r.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}async _listOAuthClients(r){var s,o,u,c,h,p,m;try{const v={nextPage:null,lastPage:0,total:0},y=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(c=(u=r?.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Xd});if(y.error)throw y.error;const S=await y.json(),N=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(m=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(T=>{const O=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(T.split(";")[1].split("=")[1]);v[`${E}Page`]=O}),v.total=parseInt(N)),{data:Object.assign(Object.assign({},S),v),error:null}}catch(v){if(de(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(r){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _getOAuthClient(r){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _updateOAuthClient(r,s){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:s,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(de(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(r){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(de(s))return{data:null,error:s};throw s}}}function Zd(l={}){return{getItem:r=>l[r]||null,setItem:(r,s)=>{l[r]=s},removeItem:r=>{delete l[r]}}}const mn={debug:!!(globalThis&&Kh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jh extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class ag extends Jh{}async function lg(l,r,s){mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),mn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,u.name);try{return await s()}finally{mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,u.name)}}else{if(r===0)throw mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new ag(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(mn.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function ug(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Qh(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function cg(l){return parseInt(l,16)}function dg(l){const r=new TextEncoder().encode(l);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function hg(l){var r;const{chainId:s,domain:o,expirationTime:u,issuedAt:c=new Date,nonce:h,notBefore:p,requestId:m,resources:v,scheme:y,uri:S,version:N}=l;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!S)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(N!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${N}`);if(!((r=l.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const j=Qh(l.address),T=y?`${y}://${o}`:o,O=l.statement?`${l.statement}
`:"",E=`${T} wants you to sign in with your Ethereum account:
${j}

${O}`;let H=`URI: ${S}
Version: ${N}
Chain ID: ${s}${h?`
Nonce: ${h}`:""}
Issued At: ${c.toISOString()}`;if(u&&(H+=`
Expiration Time: ${u.toISOString()}`),p&&(H+=`
Not Before: ${p.toISOString()}`),m&&(H+=`
Request ID: ${m}`),v){let U=`
Resources:`;for(const L of v){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);U+=`
- ${L}`}H+=U}return`${E}
${H}`}class Be extends Error{constructor({message:r,code:s,cause:o,name:u}){var c;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(c=u??(o instanceof Error?o.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=s}}class Bi extends Be{constructor(r,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:r}),this.name="WebAuthnUnknownError",this.originalError=s}}function fg({error:l,options:r}){var s,o,u;const{publicKey:c}=r;if(!c)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Be({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((s=c.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Be({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(r.mediation==="conditional"&&((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Be({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((u=c.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Be({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new Be({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new Be({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return c.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Be({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new Be({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const h=window.location.hostname;if(Yh(h)){if(c.rp.id!==h)return new Be({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new Be({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Be({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new Be({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new Be({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function pg({error:l,options:r}){const{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Be({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new Be({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const o=window.location.hostname;if(Yh(o)){if(s.rpId!==o)return new Be({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new Be({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new Be({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new Be({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}class mg{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const gg=new mg;function vg(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:r,user:s,excludeCredentials:o}=l,u=bn(l,["challenge","user","excludeCredentials"]),c=xn(r).buffer,h=Object.assign(Object.assign({},s),{id:xn(s.id).buffer}),p=Object.assign(Object.assign({},u),{challenge:c,user:h});if(o&&o.length>0){p.excludeCredentials=new Array(o.length);for(let m=0;m<o.length;m++){const v=o[m];p.excludeCredentials[m]=Object.assign(Object.assign({},v),{id:xn(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return p}function yg(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:r,allowCredentials:s}=l,o=bn(l,["challenge","allowCredentials"]),u=xn(r).buffer,c=Object.assign(Object.assign({},o),{challenge:u});if(s&&s.length>0){c.allowCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const p=s[h];c.allowCredentials[h]=Object.assign(Object.assign({},p),{id:xn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function xg(l){var r;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const s=l;return{id:l.id,rawId:l.id,response:{attestationObject:Mr(new Uint8Array(l.response.attestationObject)),clientDataJSON:Mr(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function wg(l){var r;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const s=l,o=l.getClientExtensionResults(),u=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:Mr(new Uint8Array(u.authenticatorData)),clientDataJSON:Mr(new Uint8Array(u.clientDataJSON)),signature:Mr(new Uint8Array(u.signature)),userHandle:u.userHandle?Mr(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Yh(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function eh(){var l,r;return!!(Xe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator?.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function _g(l){try{const r=await navigator.credentials.create(l);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Bi("Browser returned unexpected credential type",r)}:{data:null,error:new Bi("Empty credential response",r)}}catch(r){return{data:null,error:fg({error:r,options:l})}}}async function bg(l){try{const r=await navigator.credentials.get(l);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Bi("Browser returned unexpected credential type",r)}:{data:null,error:new Bi("Empty credential response",r)}}catch(r){return{data:null,error:pg({error:r,options:l})}}}const jg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},kg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function qi(...l){const r=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),s=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),o={};for(const u of l)if(u)for(const c in u){const h=u[c];if(h!==void 0)if(Array.isArray(h))o[c]=h;else if(s(h))o[c]=h;else if(r(h)){const p=o[c];r(p)?o[c]=qi(p,h):o[c]=qi(h)}else o[c]=h}return o}function Sg(l,r){return qi(jg,l,r||{})}function Ng(l,r){return qi(kg,l,r||{})}class Eg{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:s,friendlyName:o,signal:u},c){try{const{data:h,error:p}=await this.client.mfa.challenge({factorId:r,webauthn:s});if(!h)return{data:null,error:p};const m=u??gg.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:v}=h.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${o}`),v.displayName||(v.displayName=v.name)}switch(h.webauthn.type){case"create":{const v=Sg(h.webauthn.credential_options.publicKey,c?.create),{data:y,error:S}=await _g({publicKey:v,signal:m});return y?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:S}}case"request":{const v=Ng(h.webauthn.credential_options.publicKey,c?.request),{data:y,error:S}=await bg(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:v,signal:m}));return y?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:S}}}}catch(h){return de(h)?{data:null,error:h}:{data:null,error:new Ur("Unexpected error in challenge",h)}}}async _verify({challengeId:r,factorId:s,webauthn:o}){return this.client.mfa.verify({factorId:s,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!s)return{data:null,error:new ms("rpId is required for WebAuthn authentication")};try{if(!eh())return{data:null,error:new Ur("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this.challenge({factorId:r,webauthn:{rpId:s,rpOrigins:o},signal:u},{request:c});if(!h)return{data:null,error:p};const{webauthn:m}=h;return this._verify({factorId:r,challengeId:h.challengeId,webauthn:{type:m.type,rpId:s,rpOrigins:o,credential_response:m.credential_response}})}catch(h){return de(h)?{data:null,error:h}:{data:null,error:new Ur("Unexpected error in authenticate",h)}}}async _register({friendlyName:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!s)return{data:null,error:new ms("rpId is required for WebAuthn registration")};try{if(!eh())return{data:null,error:new Ur("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this._enroll({friendlyName:r});if(!h)return await this.client.mfa.listFactors().then(y=>{var S;return(S=y.data)===null||S===void 0?void 0:S.all.find(N=>N.factor_type==="webauthn"&&N.friendly_name===r&&N.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:p};const{data:m,error:v}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:s,rpOrigins:o},signal:u},{create:c});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:s,rpOrigins:o,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:v}}catch(h){return de(h)?{data:null,error:h}:{data:null,error:new Ur("Unexpected error in register",h)}}}}ug();const Cg={url:k0,storageKey:S0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:N0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function th(l,r,s){return await s()}const gn={};class gs{get jwks(){var r,s;return(s=(r=gn[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(r){gn[this.storageKey]=Object.assign(Object.assign({},gn[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,s;return(s=(r=gn[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){gn[this.storageKey]=Object.assign(Object.assign({},gn[this.storageKey]),{cachedAt:r})}constructor(r){var s,o,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},Cg),r);if(this.storageKey=c.storageKey,this.instanceID=(s=gs.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,gs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&Xe()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new og({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Gh(c.fetch),this.lock=c.lock||th,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:Xe()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=lg:this.lock=th,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Eg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Kh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zd(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Zd(this.memoryStorage)),Xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Vh}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let s={},o="none";if(Xe()&&(s=z0(window.location.href),this._isImplicitGrantCallback(s)?o="implicit":await this._isPKCECallback(s)&&(o="pkce")),Xe()&&this.detectSessionInUrl&&o!=="none"){const{data:u,error:c}=await this._getSessionFromURL(s,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),R0(c)){const m=(r=c.details)===null||r===void 0?void 0:r.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:h,redirectType:p}=u;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return de(s)?this._returnResult({error:s}):this._returnResult({error:new Ur("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var s,o,u;try{const c=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(s=r?.options)===null||s===void 0?void 0:s.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=r?.options)===null||u===void 0?void 0:u.captchaToken}},xform:Rt}),{data:h,error:p}=c;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(c){if(de(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(r){var s,o,u;try{let c;if("email"in r){const{email:y,password:S,options:N}=r;let j=null,T=null;this.flowType==="pkce"&&([j,T]=await fn(this.storage,this.storageKey)),c=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N?.emailRedirectTo,body:{email:y,password:S,data:(s=N?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:N?.captchaToken},code_challenge:j,code_challenge_method:T},xform:Rt})}else if("phone"in r){const{phone:y,password:S,options:N}=r;c=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:S,data:(o=N?.data)!==null&&o!==void 0?o:{},channel:(u=N?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:N?.captchaToken}},xform:Rt})}else throw new Li("You must provide either an email or phone number and a password");const{data:h,error:p}=c;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(c){if(de(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(r){try{let s;if("email"in r){const{email:c,password:h,options:p}=r;s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Yd})}else if("phone"in r){const{phone:c,password:h,options:p}=r;s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Yd})}else throw new Li("You must provide either an email or phone number and a password");const{data:o,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o||!o.session||!o.user){const c=new hn;return this._returnResult({data:{user:null,session:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(r){var s,o,u,c;return await this._handleProviderSignIn(r.provider,{redirectTo:(s=r.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=r.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(c=r.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:s}=r;switch(s){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(r){var s,o,u,c,h,p,m,v,y,S,N;let j,T;if("message"in r)j=r.message,T=r.signature;else{const{chain:O,wallet:E,statement:H,options:U}=r;let L;if(Xe())if(typeof E=="object")L=E;else{const fe=window;if("ethereum"in fe&&typeof fe.ethereum=="object"&&"request"in fe.ethereum&&typeof fe.ethereum.request=="function")L=fe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=E}const J=new URL((s=U?.url)!==null&&s!==void 0?s:window.location.href),te=await L.request({method:"eth_requestAccounts"}).then(fe=>fe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!te||te.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const oe=Qh(te[0]);let he=(o=U?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!he){const fe=await L.request({method:"eth_chainId"});he=cg(fe)}const F={domain:J.host,address:oe,statement:H,uri:J.href,version:"1",chainId:he,nonce:(u=U?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(h=(c=U?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=U?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=U?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(v=U?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(y=U?.signInWithEthereum)===null||y===void 0?void 0:y.resources};j=hg(F),T=await L.request({method:"personal_sign",params:[dg(j),oe]})}try{const{data:O,error:E}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:T},!((S=r.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(N=r.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:Rt});if(E)throw E;if(!O||!O.session||!O.user){const H=new hn;return this._returnResult({data:{user:null,session:null},error:H})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:E})}catch(O){if(de(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async signInWithSolana(r){var s,o,u,c,h,p,m,v,y,S,N,j;let T,O;if("message"in r)T=r.message,O=r.signature;else{const{chain:E,wallet:H,statement:U,options:L}=r;let J;if(Xe())if(typeof H=="object")J=H;else{const oe=window;if("solana"in oe&&typeof oe.solana=="object"&&("signIn"in oe.solana&&typeof oe.solana.signIn=="function"||"signMessage"in oe.solana&&typeof oe.solana.signMessage=="function"))J=oe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");J=H}const te=new URL((s=L?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in J&&J.signIn){const oe=await J.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:te.host,uri:te.href}),U?{statement:U}:null));let he;if(Array.isArray(oe)&&oe[0]&&typeof oe[0]=="object")he=oe[0];else if(oe&&typeof oe=="object"&&"signedMessage"in oe&&"signature"in oe)he=oe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in he&&"signature"in he&&(typeof he.signedMessage=="string"||he.signedMessage instanceof Uint8Array)&&he.signature instanceof Uint8Array)T=typeof he.signedMessage=="string"?he.signedMessage:new TextDecoder().decode(he.signedMessage),O=he.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in J)||typeof J.signMessage!="function"||!("publicKey"in J)||typeof J!="object"||!J.publicKey||!("toBase58"in J.publicKey)||typeof J.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${te.host} wants you to sign in with your Solana account:`,J.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${te.href}`,`Issued At: ${(u=(o=L?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((c=L?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((h=L?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((p=L?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((m=L?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((v=L?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((S=(y=L?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||S===void 0)&&S.length?["Resources",...L.signInWithSolana.resources.map(he=>`- ${he}`)]:[]].join(`
`);const oe=await J.signMessage(new TextEncoder().encode(T),"utf8");if(!oe||!(oe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=oe}}try{const{data:E,error:H}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:Mr(O)},!((N=r.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(j=r.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:Rt});if(H)throw H;if(!E||!E.session||!E.user){const U=new hn;return this._returnResult({data:{user:null,session:null},error:U})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:H})}catch(E){if(de(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(r){const s=await Ir(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(s??"").split("/");try{const{data:c,error:h}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:Rt});if(await vr(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!c||!c.session||!c.user){const p=new hn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:u??null}),error:h})}catch(c){if(de(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(r){try{const{options:s,provider:o,token:u,access_token:c,nonce:h}=r,p=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Rt}),{data:m,error:v}=p;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!m||!m.session||!m.user){const y=new hn;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:v})}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(r){var s,o,u,c,h;try{if("email"in r){const{email:p,options:m}=r;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await fn(this.storage,this.storageKey));const{error:S}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=m?.data)!==null&&s!==void 0?s:{},create_user:(o=m?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:v,code_challenge_method:y},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:S})}if("phone"in r){const{phone:p,options:m}=r,{data:v,error:y}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(u=m?.data)!==null&&u!==void 0?u:{},create_user:(c=m?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(h=m?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:y})}throw new Li("You must provide either an email or phone number.")}catch(p){if(de(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(r){var s,o;try{let u,c;"options"in r&&(u=(s=r.options)===null||s===void 0?void 0:s.redirectTo,c=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:p}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:c}}),redirectTo:u,xform:Rt});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,v=h.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(u){if(de(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(r){var s,o,u,c,h;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await fn(this.storage,this.storageKey));const v=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(s=r.options)===null||s===void 0?void 0:s.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=r?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:ng});return!((c=v.data)===null||c===void 0)&&c.url&&Xe()&&!(!((h=r.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(p){if(de(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)throw o;if(!s)throw new gt;const{error:u}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(r){if(de(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const s=`${this.url}/resend`;if("email"in r){const{email:o,type:u,options:c}=r,{error:h}=await ge(this.fetch,"POST",s,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in r){const{phone:o,type:u,options:c}=r,{data:h,error:p}=await ge(this.fetch,"POST",s,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new Li("You must provide either an email or phone number and a type")}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(r,s){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await s()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=s();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await r(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const s=await Ir(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?r=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<Ga:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const h=await Ir(this.userStorage,this.storageKey+"-user");h?.user?r.user=h.user:r.user=Ya()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};r.user=Z0(r.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:u,error:c}=await this._callRefreshToken(r.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:yr}):await this._useSession(async s=>{var o,u,c;const{data:h,error:p}=s;if(p)throw p;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gt}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0,xform:yr})})}catch(s){if(de(s))return P0(s)&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(r,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,s))}async _updateUser(r,s={}){try{return await this._useSession(async o=>{const{data:u,error:c}=o;if(c)throw c;if(!u.session)throw new gt;const h=u.session;let p=null,m=null;this.flowType==="pkce"&&r.email!=null&&([p,m]=await fn(this.storage,this.storageKey));const{data:v,error:y}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:p,code_challenge_method:m}),jwt:h.access_token,xform:yr});if(y)throw y;return h.user=v.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(o){if(de(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new gt;const s=Date.now()/1e3;let o=s,u=!0,c=null;const{payload:h}=Qa(r.access_token);if(h.exp&&(o=h.exp,u=o<=s),u){const{data:p,error:m}=await this._callRefreshToken(r.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:m}=await this._getUser(r.access_token);if(m)throw m;c={access_token:r.access_token,refresh_token:r.refresh_token,user:p.user,token_type:"bearer",expires_in:o-s,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(s){if(de(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async s=>{var o;if(!r){const{data:h,error:p}=s;if(p)throw p;r=(o=h.session)!==null&&o!==void 0?o:void 0}if(!r?.refresh_token)throw new gt;const{data:u,error:c}=await this._callRefreshToken(r.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(r,s){try{if(!Xe())throw new Ui("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Ui(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Vd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ui("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Vd("No code detected.");const{data:U,error:L}=await this._exchangeCodeForSession(r.code);if(L)throw L;const J=new URL(window.location.href);return J.searchParams.delete("code"),window.history.replaceState(window.history.state,"",J.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:u,access_token:c,refresh_token:h,expires_in:p,expires_at:m,token_type:v}=r;if(!c||!p||!h||!v)throw new Ui("No session defined in URL");const y=Math.round(Date.now()/1e3),S=parseInt(p);let N=y+S;m&&(N=parseInt(m));const j=N-y;j*1e3<=vn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${S}s`);const T=N-S;y-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,N,y):y-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,N,y);const{data:O,error:E}=await this._getUser(c);if(E)throw E;const H={provider_token:o,provider_refresh_token:u,access_token:c,expires_in:S,expires_at:N,refresh_token:h,token_type:v,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:H,redirectType:r.type},error:null})}catch(o){if(de(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const s=await Ir(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&s)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async s=>{var o;const{data:u,error:c}=s;if(c)return this._returnResult({error:c});const h=(o=u.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:p}=await this.admin.signOut(h,r);if(p&&!(O0(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return r!=="others"&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const s=M0(),o={id:s,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async s=>{var o,u;try{const{data:{session:c},error:h}=s;if(h)throw h;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",r,"session",c)}catch(c){await((u=this.stateChangeEmitters.get(r))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",c),console.error(c)}})}async resetPasswordForEmail(r,s={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await fn(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(de(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var r;try{const{data:s,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=s.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var s;try{const{data:o,error:u}=await this._useSession(async c=>{var h,p,m,v,y;const{data:S,error:N}=c;if(N)throw N;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(h=r.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=r.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=r.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",j,{headers:this.headers,jwt:(y=(v=S.session)===null||v===void 0?void 0:v.access_token)!==null&&y!==void 0?y:void 0})});if(u)throw u;return Xe()&&!(!((s=r.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:r.provider,url:o?.url},error:null})}catch(o){if(de(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async s=>{var o;try{const{error:u,data:{session:c}}=s;if(u)throw u;const{options:h,provider:p,token:m,access_token:v,nonce:y}=r,S=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=c?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:p,id_token:m,access_token:v,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Rt}),{data:N,error:j}=S;return j?this._returnResult({data:{user:null,session:null},error:j}):!N||!N.session||!N.user?this._returnResult({data:{user:null,session:null},error:new hn}):(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("USER_UPDATED",N.session)),this._returnResult({data:N,error:j}))}catch(u){if(de(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(r){try{return await this._useSession(async s=>{var o,u;const{data:c,error:h}=s;if(h)throw h;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(u=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(r){const s=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(s,"begin");try{const o=Date.now();return await q0(async u=>(u>0&&await B0(200*Math.pow(2,u-1)),this._debug(s,"refreshing attempt",u),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Rt})),(u,c)=>{const h=200*Math.pow(2,u);return c&&Ja(c)&&Date.now()+h-o<vn})}catch(o){if(this._debug(s,"error",o),de(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(s,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,s){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",s,"url",o),Xe()&&!s.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,s;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const u=await Ir(this.storage,this.storageKey);if(u&&this.userStorage){let h=await Ir(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:u.user},await yn(this.userStorage,this.storageKey+"-user",h)),u.user=(r=h?.user)!==null&&r!==void 0?r:Ya()}else if(u&&!u.user&&!u.user){const h=await Ir(this.storage,this.storageKey+"-user");h&&h?.user?(u.user=h.user,await vr(this.storage,this.storageKey+"-user"),await yn(this.storage,this.storageKey,u)):u.user=Ya()}if(this._debug(o,"session from storage",u),!this._isValidSession(u)){this._debug(o,"session is not valid"),u!==null&&await this._removeSession();return}const c=((s=u.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Ga;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${Ga}s`),c){if(this.autoRefreshToken&&u.refresh_token){const{error:h}=await this._callRefreshToken(u.refresh_token);h&&(console.error(h),Ja(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(u.access_token);!p&&h?.user?(u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(o,"error",u),console.error(u);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var s,o;if(!r)throw new gt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Wi;const{data:c,error:h}=await this._refreshAccessToken(r);if(h)throw h;if(!c.session)throw new gt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={data:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(u,"error",c),de(c)){const h={data:null,error:c};return Ja(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(r,s,o=!0){const u=`#_notifyAllSubscribers(${r})`;this._debug(u,"begin",s,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:s});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(r,s)}catch(m){c.push(m)}});if(await Promise.all(h),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(u,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const s=Object.assign({},r),o=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&s.user&&await yn(this.userStorage,this.storageKey+"-user",{user:s.user});const u=Object.assign({},s);delete u.user;const c=Jd(u);await yn(this.storage,this.storageKey,c)}else{const u=Jd(s);await yn(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),await vr(this.storage,this.storageKey),await vr(this.storage,this.storageKey+"-code-verifier"),await vr(this.storage,this.storageKey+"-user"),this.userStorage&&await vr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Xe()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),vn);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async s=>{const{data:{session:o}}=s;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((o.expires_at*1e3-r)/vn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${vn}ms, refresh threshold is ${ll} ticks`),u<=ll&&await this._callRefreshToken(o.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Jh)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xe()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const s=`#_onVisibilityChanged(${r})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,s,o){const u=[`provider=${encodeURIComponent(s)}`];if(o?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,h]=await fn(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});u.push(p.toString())}if(o?.queryParams){const c=new URLSearchParams(o.queryParams);u.push(c.toString())}return o?.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${u.join("&")}`}async _unenroll(r){try{return await this._useSession(async s=>{var o;const{data:u,error:c}=s;return c?this._returnResult({data:null,error:c}):await ge(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(r){try{return await this._useSession(async s=>{var o,u;const{data:c,error:h}=s;if(h)return this._returnResult({data:null,error:h});const p=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:m,error:v}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return v?this._returnResult({data:null,error:v}):(r.factorType==="totp"&&m.type==="totp"&&(!((u=m?.totp)===null||u===void 0)&&u.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:u,error:c}=s;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?xg(r.webauthn.credential_response):wg(r.webauthn.credential_response)})}:{code:r.code}),{data:p,error:m}=await ge(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:h,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:u,error:c}=s;if(c)return this._returnResult({data:null,error:c});const h=await ge(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});if(h.error)return h;const{data:p}=h;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:vg(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:yg(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(r){const{data:s,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:s.id,code:r.code})}async _listFactors(){var r;const{data:{user:s},error:o}=await this.getUser();if(o)return{data:null,error:o};const u={all:[],phone:[],totp:[],webauthn:[]};for(const c of(r=s?.factors)!==null&&r!==void 0?r:[])u.all.push(c),c.status==="verified"&&u[c.factor_type].push(c);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var r,s;const{data:{session:o},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Qa(o.access_token);let h=null;c.aal&&(h=c.aal);let p=h;((s=(r=o.user.factors)===null||r===void 0?void 0:r.filter(y=>y.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const v=c.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async s=>{const{data:{session:o},error:u}=s;return u?this._returnResult({data:null,error:u}):o?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new gt})})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(r,s){try{return await this._useSession(async o=>{const{data:{session:u},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new gt});const h=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Xe()&&!s?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(o){if(de(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,s){try{return await this._useSession(async o=>{const{data:{session:u},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new gt});const h=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Xe()&&!s?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(o){if(de(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;return o?this._returnResult({data:null,error:o}):s?await ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new gt})})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async s=>{const{data:{session:o},error:u}=s;return u?this._returnResult({data:null,error:u}):o?await ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new gt})})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(r,s={keys:[]}){let o=s.keys.find(p=>p.kid===r);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(p=>p.kid===r),o&&this.jwks_cached_at+C0>u)return o;const{data:c,error:h}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=u,o=c.keys.find(p=>p.kid===r),!o)?null:o}async getClaims(r,s={}){try{let o=r;if(!o){const{data:j,error:T}=await this.getSession();if(T||!j.session)return this._returnResult({data:null,error:T});o=j.session.access_token}const{header:u,payload:c,signature:h,raw:{header:p,payload:m}}=Qa(o);s?.allowExpired||Q0(c.exp);const v=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!v){const{error:j}=await this.getUser(o);if(j)throw j;return{data:{claims:c,header:u,signature:h},error:null}}const y=Y0(u.alg),S=await crypto.subtle.importKey("jwk",v,y,!0,["verify"]);if(!await crypto.subtle.verify(y,S,h,L0(`${p}.${m}`)))throw new dl("Invalid JWT signature");return{data:{claims:c,header:u,signature:h},error:null}}catch(o){if(de(o))return this._returnResult({data:null,error:o});throw o}}}gs.nextInstanceID={};const Tg=gs;class Og extends Tg{constructor(r){super(r)}}class Pg{constructor(r,s,o){var u,c,h;this.supabaseUrl=r,this.supabaseKey=s;const p=j0(r);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,v={db:m0,realtime:v0,auth:Object.assign(Object.assign({},g0),{storageKey:m}),global:p0},y=b0(o??{},v);this.storageKey=(u=y.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(c=y.global.headers)!==null&&c!==void 0?c:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(S,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=y.auth)!==null&&h!==void 0?h:{},this.headers,y.global.fetch),this.fetch=w0(s,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&this.accessToken().then(S=>this.realtime.setAuth(S)).catch(S=>console.warn("Failed to set initial Realtime auth token:",S)),this.rest=new km(new URL("rest/v1",p).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new d0(this.storageUrl.href,this.headers,this.fetch,o?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new wm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,s={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,s,o)}channel(r,s={config:{}}){return this.realtime.channel(r,s)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r,s;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:s,detectSessionInUrl:o,storage:u,userStorage:c,storageKey:h,flowType:p,lock:m,debug:v,throwOnError:y},S,N){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Og({url:this.authUrl.href,headers:Object.assign(Object.assign({},j),S),storageKey:h,autoRefreshToken:r,persistSession:s,detectSessionInUrl:o,storage:u,userStorage:c,flowType:p,lock:m,debug:v,throwOnError:y,fetch:N,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new Fm(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,o)=>{this._handleTokenChanged(s,"CLIENT",o?.access_token)})}_handleTokenChanged(r,s,o){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Rg=(l,r,s)=>new Pg(l,r,s);function Ag(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const r=l.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Ag()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ig="https://scgncykiterarqzuqrau.supabase.co",$g="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNjZ25jeWtpdGVyYXJxenVxcmF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyOTU2NDUsImV4cCI6MjA3OTg3MTY0NX0.bEXJDadi__5Hnc-lBDRETqqLeBgprmo1LqhRnIfa37E",xe=Rg(Ig,$g);var Dg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Lg=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ee=(l,r)=>{const s=V.forwardRef(({color:o="currentColor",size:u=24,strokeWidth:c=2,absoluteStrokeWidth:h,className:p="",children:m,...v},y)=>V.createElement("svg",{ref:y,...Dg,width:u,height:u,stroke:o,strokeWidth:h?Number(c)*24/Number(u):c,className:["lucide",`lucide-${Lg(l)}`,p].join(" "),...v},[...r.map(([S,N])=>V.createElement(S,N)),...Array.isArray(m)?m:[m]]));return s.displayName=`${l}`,s};const Ug=Ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Xh=Ee("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const rh=Ee("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Mg=Ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const zg=Ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Fg=Ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const jl=Ee("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const Bg=Ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const Zh=Ee("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const ef=Ee("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const qg=Ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const tf=Ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Vg=Ee("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const Hg=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Wg=Ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const kl=Ee("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Kg=Ee("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const kn=Ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const nh=Ee("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);const Gg=Ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const Sl=Ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const rf=Ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const nf=Ee("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);const Nl=Ee("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const Jg=Ee("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);const sf=Ee("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);const El=Ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const vs=Ee("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const _n=Ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Qg=Ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Vi=Ee("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);const hl=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Yg({shift:l}){const[r,s]=V.useState([]),[o,u]=V.useState([]),[c,h]=V.useState(""),[p,m]=V.useState("todas"),[v,y]=V.useState(""),[S,N]=V.useState(""),[j,T]=V.useState(0),[O,E]=V.useState(0),[H,U]=V.useState(0),[L,J]=V.useState(0);V.useEffect(()=>{oe()},[p]),V.useEffect(()=>{const $=setTimeout(()=>{oe()},300);return()=>clearTimeout($)},[c]);const te=o.reduce(($,G)=>$+G.subtotal,0);V.useEffect(()=>{const $=j+O+H+L;te>0&&$===0&&T(te),te===0&&$!==0&&(T(0),E(0),U(0),J(0))},[te]);const oe=async()=>{let $=xe.from("products").select("id, code, name, category, price, stock").eq("active",!0).gt("stock",0).order("name",{ascending:!0}).limit(100);p!=="todas"&&($=$.eq("category",p)),c.trim()&&($=$.ilike("name",`%${c.trim()}%`));const{data:G}=await $;s(G||[])},he=$=>{const G=o.find(w=>w.product_id===$.id);if(G){if(G.quantity>=$.stock)return alert("Stock insuficiente");u(o.map(w=>w.product_id===$.id?{...w,quantity:w.quantity+1,subtotal:(w.quantity+1)*w.price}:w))}else u([...o,{product_id:$.id,product_name:$.name,quantity:1,price:$.price,subtotal:$.price}])},F=($,G)=>{if(G<=0)return u(o.filter(w=>w.product_id!==$));u(o.map(w=>w.product_id===$?{...w,quantity:G,subtotal:G*w.price}:w))},fe=($,G)=>{G<0||u(o.map(w=>w.product_id===$?{...w,price:G,subtotal:w.quantity*G}:w))},be=$=>{if(!$)return 0;const G=parseFloat($.replace(",","."));return isNaN(G)?0:G},z=async()=>{if(!o.length||!l)return alert("Carrito vaco o sin turno activo");let $=[{method:"efectivo",amount:j},{method:"transferencia",amount:O},{method:"qr",amount:H},{method:"expensas",amount:L}].filter(P=>P.amount>.009);$.length===0&&($=[{method:"efectivo",amount:te}],T(te));const G=$.reduce((P,re)=>P+re.amount,0);if(Math.abs(G-te)>.01)return alert(`La suma de los montos de pago (${G.toFixed(2)}) no coincide con el total (${te.toFixed(2)}).`);if($.some(P=>P.method!=="efectivo")&&(!v.trim()||!S.trim()))return alert("Para pagos que no son en efectivo debs completar el nombre y el lote del cliente.");let X=$[0].method;$.some(P=>P.method==="efectivo")&&(X="efectivo");const D={sale_number:`V-${Date.now()}`,user_id:l.user_id,user_name:l.user_name,shift_id:l.id,items:o,subtotal:te,discount:0,total:te,payment_method:X,customer_name:v.trim()||null,customer_lot:S.trim()||null,payments:$},{error:Z}=await xe.from("sales").insert([D]);if(Z){console.error("Error insertando venta:",Z),alert(`Error al registrar la venta: ${Z.message}`);return}for(const P of o){const re=r.find(ce=>ce.id===P.product_id);if(re){const{error:ce}=await xe.from("products").update({stock:re.stock-P.quantity}).eq("id",P.product_id);ce&&console.error("Error actualizando stock:",ce)}}const W=$.map(P=>({shift_id:l.id,type:"income",category:"venta",amount:P.amount,payment_method:P.method,description:`Venta ${D.sale_number}${v.trim()||S.trim()?` - ${v.trim()} (Lote ${S.trim()||"-"})`:""}`})),{error:b}=await xe.from("cash_transactions").insert(W);b?(console.error("Error insertando caja:",b),alert("La venta se registr, pero hubo un error al registrar el movimiento en caja.")):alert("Venta completada"),u([]),y(""),N(""),T(0),E(0),U(0),J(0),oe()},C=["Bebida","Comida","Artculos de Deporte"],Q=Array.from(new Set([...C,...r.map($=>$.category).filter($=>!!$&&$.trim()!=="")]));return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Sl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),a.jsx("input",{type:"text",placeholder:"Buscar productos por nombre...",value:c,onChange:$=>h($.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 transition"})]}),a.jsx("div",{className:"flex items-center",children:a.jsxs("select",{value:p,onChange:$=>m($.target.value),className:"w-full md:w-56 px-3 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500",children:[a.jsx("option",{value:"todas",children:"Todas las categoras"}),Q.map($=>a.jsx("option",{value:$,children:$},$))]})})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-[500px] overflow-y-auto",children:r.map($=>a.jsxs("button",{onClick:()=>he($),className:"bg-gradient-to-br from-white to-slate-50 border-2 border-slate-200 hover:border-emerald-500 rounded-xl p-4 text-left transition-all hover:shadow-lg",children:[a.jsx("h3",{className:"font-bold text-slate-800 mb-1",children:$.name}),$.category&&a.jsx("p",{className:"text-xs text-slate-500 mb-1",children:$.category}),a.jsxs("p",{className:"text-2xl font-bold text-emerald-600",children:["$",$.price.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Stock: ",$.stock]})]},$.id))})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-white to-slate-50 rounded-xl shadow-lg p-4 border-2 border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Nl,{className:"text-emerald-600",size:24}),a.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Carrito"})]}),a.jsx("div",{className:"space-y-2 mb-4 max-h-[220px] overflow-y-auto",children:o.map($=>a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"font-medium text-sm",children:$.product_name}),a.jsx("button",{onClick:()=>F($.product_id,0),className:"text-red-600",children:a.jsx(El,{size:16})})]}),a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>F($.product_id,$.quantity-1),className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:a.jsx(Wg,{size:16})}),a.jsx("span",{className:"w-8 text-center font-bold",children:$.quantity}),a.jsx("button",{onClick:()=>F($.product_id,$.quantity+1),className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:a.jsx(kn,{size:16})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-600",children:"$"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:$.price,onChange:G=>fe($.product_id,parseFloat(G.target.value)||0),className:"w-20 px-2 py-1 text-sm border border-slate-300 rounded-lg text-right"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("span",{className:"font-bold text-emerald-600",children:["$",$.subtotal.toFixed(2)]})})]},$.product_id))}),a.jsx("div",{className:"space-y-2 mb-4",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[a.jsx("input",{type:"text",placeholder:"Nombre del cliente",value:v,onChange:$=>y($.target.value),className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),a.jsx("input",{type:"text",placeholder:"Lote",value:S,onChange:$=>N($.target.value),className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})}),a.jsxs("div",{className:"border-t-2 border-slate-200 pt-4 space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between bg-white border border-slate-200 rounded-xl px-3 py-2",children:[a.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Efectivo"}),a.jsx("input",{type:"number",min:0,step:"0.01",value:j||"",onChange:$=>T(be($.target.value)),className:"w-28 px-2 py-1 bg-slate-50 border border-slate-200 rounded-lg text-sm text-right",placeholder:"0"})]}),a.jsxs("div",{className:"flex items-center justify-between bg-white border border-slate-200 rounded-xl px-3 py-2",children:[a.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Transferencia"}),a.jsx("input",{type:"number",min:0,step:"0.01",value:O||"",onChange:$=>E(be($.target.value)),className:"w-28 px-2 py-1 bg-slate-50 border border-slate-200 rounded-lg text-sm text-right",placeholder:"0"})]}),a.jsxs("div",{className:"flex items-center justify-between bg-white border border-slate-200 rounded-xl px-3 py-2",children:[a.jsx("span",{className:"text-sm font-medium text-slate-700",children:"QR"}),a.jsx("input",{type:"number",min:0,step:"0.01",value:H||"",onChange:$=>U(be($.target.value)),className:"w-28 px-2 py-1 bg-slate-50 border border-slate-200 rounded-lg text-sm text-right",placeholder:"0"})]}),a.jsxs("div",{className:"flex items-center justify-between bg-white border border-slate-200 rounded-xl px-3 py-2",children:[a.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Expensas"}),a.jsx("input",{type:"number",min:0,step:"0.01",value:L||"",onChange:$=>J(be($.target.value)),className:"w-28 px-2 py-1 bg-slate-50 border border-slate-200 rounded-lg text-sm text-right",placeholder:"0"})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-2xl font-bold",children:[a.jsx("span",{children:"Total:"}),a.jsxs("span",{className:"text-emerald-600",children:["$",te.toFixed(2)]})]}),a.jsxs("button",{onClick:z,disabled:!o.length,className:"w-full bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 disabled:from-slate-300 disabled:to-slate-400 text-white font-bold py-4 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-all",children:[a.jsx(Fg,{size:24}),"Completar Venta"]})]})]})})]})}const sh=["Bebida","Comida","Artculos de Deporte"];function Xg(){const[l,r]=V.useState([]),[s,o]=V.useState(""),[u,c]=V.useState(!1),[h,p]=V.useState(null),[m,v]=V.useState({code:"",name:"",description:"",category:"",price:"",cost:"",stock:"",min_stock:""}),[y,S]=V.useState(""),[N,j]=V.useState(""),T=()=>{const F=window.prompt("Ingres la clave de administrador:");return F?F==="admin123"?!0:(alert("Clave incorrecta. No tens permisos para esta accin."),!1):(alert("Operacin cancelada."),!1)};V.useEffect(()=>{O()},[]);const O=async()=>{const{data:F}=await xe.from("products").select("*").order("name");r(F||[])},E=()=>{const F=l.map(fe=>parseInt(fe.code,10)).filter(fe=>!isNaN(fe)&&fe>0);if(F.length>0){const fe=Math.max(...F);return String(fe+1).padStart(4,"0")}return`P-${l.length+1}`},H=async F=>{F.preventDefault();const fe=m.code.trim();if(!fe){alert("El cdigo no puede estar vaco.");return}const{data:be,error:z}=await xe.from("products").select("id, code").eq("code",fe);if(z){console.error("Error verificando cdigo:",z),alert("Ocurri un error al verificar el cdigo. Intent de nuevo.");return}if(h){if(be?.some(w=>w.id!==h.id)){alert("Cdigo en uso por otro producto. Ingres un nuevo cdigo.");return}}else if(be&&be.length>0){alert("Cdigo en uso. Ingres un nuevo cdigo.");return}const C=parseInt(m.stock)||0;let Q="";y==="__CUSTOM__"?Q=N.trim():y&&(Q=y);const $={code:fe,name:m.name,description:m.description,category:Q,price:parseFloat(m.price)||0,cost:parseFloat(m.cost)||0,stock:C,min_stock:parseInt(m.min_stock)||0,active:!0,updated_at:new Date().toISOString()};if(h){const G=h.stock??0;if(C!==G&&!T())return;await xe.from("products").update($).eq("id",h.id)}else await xe.from("products").insert([$]);O(),te()},U=async F=>{T()&&confirm("Eliminar este producto?")&&(await xe.from("products").delete().eq("id",F),O())},L=F=>{let fe="",be="";F.category&&sh.includes(F.category)?(fe=F.category,be=""):F.category?(fe="__CUSTOM__",be=F.category):(fe="",be=""),p(F),v({code:F.code,name:F.name,description:F.description||"",category:F.category||"",price:F.price.toString(),cost:F.cost.toString(),stock:F.stock.toString(),min_stock:F.min_stock.toString()}),S(fe),j(be),c(!0)},J=()=>{const F=E();p(null),v({code:F,name:"",description:"",category:"",price:"",cost:"",stock:"",min_stock:""}),S(""),j(""),c(!0)},te=()=>{c(!1),p(null)},oe=l.filter(F=>F.name.toLowerCase().includes(s.toLowerCase())||F.code.toLowerCase().includes(s.toLowerCase())||(F.category||"").toLowerCase().includes(s.toLowerCase())),he=l.filter(F=>F.stock<=F.min_stock);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(Sl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),a.jsx("input",{type:"text",placeholder:"Buscar productos...",value:s,onChange:F=>o(F.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"})]}),a.jsxs("button",{onClick:J,className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white px-6 py-2.5 rounded-xl flex items-center gap-2 shadow-lg transition-all duration-200 hover:scale-105",children:[a.jsx(kn,{size:20}),"Nuevo Producto"]})]}),he.length>0&&a.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-500 rounded-xl p-4 shadow-sm",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ug,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:24}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-amber-900 mb-2",children:"Alerta de Stock Bajo"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:he.map(F=>a.jsxs("span",{className:"inline-flex items-center gap-1 bg-white text-amber-800 px-3 py-1 rounded-lg text-sm font-medium shadow-sm",children:[a.jsx(vs,{size:14}),F.name," (",F.stock,")"]},F.id))})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:oe.map(F=>a.jsx("div",{className:"bg-gradient-to-br from-white to-slate-50 rounded-xl shadow-md hover:shadow-xl transition-all duration-200 border border-slate-200 overflow-hidden group",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-slate-800 text-lg mb-1",children:F.name}),a.jsx("p",{className:"text-xs text-slate-500 font-mono bg-slate-100 px-2 py-1 rounded inline-block",children:F.code})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>L(F),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Kg,{size:16})}),a.jsx("button",{onClick:()=>U(F.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(El,{size:16})})]})]}),F.category&&a.jsx("span",{className:"inline-block bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded-full mb-3",children:F.category}),a.jsxs("div",{className:"space-y-2 mb-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Precio:"}),a.jsxs("span",{className:"text-lg font-bold text-emerald-600",children:["$",F.price.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Costo:"}),a.jsxs("span",{className:"text-sm font-semibold text-slate-700",children:["$",F.cost.toFixed(2)]})]})]}),a.jsx("div",{className:"pt-3 border-t border-slate-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Stock:"}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${F.stock<=F.min_stock?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700"}`,children:[F.stock," unidades"]})]})})]})},F.id))}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full shadow-2xl animate-slideUp",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-600 p-6 rounded-t-2xl",children:a.jsx("h3",{className:"text-2xl font-bold text-white",children:h?"Editar Producto":"Nuevo Producto"})}),a.jsxs("form",{onSubmit:H,className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Cdigo *"}),a.jsx("input",{type:"text",required:!0,value:m.code,onChange:F=>v({...m,code:F.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Categora"}),a.jsxs("select",{value:y,onChange:F=>{const fe=F.target.value;S(fe),fe!=="__CUSTOM__"&&j("")},className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",children:[a.jsx("option",{value:"",children:"Sin categora"}),sh.map(F=>a.jsx("option",{value:F,children:F},F)),a.jsx("option",{value:"__CUSTOM__",children:"Ingresar Nueva Categora"})]}),y==="__CUSTOM__"&&a.jsx("input",{type:"text",placeholder:"Nombre de la nueva categora",value:N,onChange:F=>j(F.target.value),className:"mt-2 w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Nombre *"}),a.jsx("input",{type:"text",required:!0,value:m.name,onChange:F=>v({...m,name:F.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Precio *"}),a.jsx("input",{type:"number",required:!0,step:"0.01",value:m.price,onChange:F=>v({...m,price:F.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Costo"}),a.jsx("input",{type:"number",step:"0.01",value:m.cost,onChange:F=>v({...m,cost:F.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Stock *"}),a.jsx("input",{type:"number",required:!0,value:m.stock,onChange:F=>v({...m,stock:F.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Stock Mnimo"}),a.jsx("input",{type:"number",value:m.min_stock,onChange:F=>v({...m,min_stock:F.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:te,className:"flex-1 px-6 py-3 border-2 border-slate-300 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 transition-all duration-200",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-cyan-700 shadow-lg transition-all duration-200 hover:scale-105",children:h?"Actualizar":"Crear"})]})]})]})})]})}function Zg({shift:l,onCloseShift:r}){const[s,o]=V.useState([]),[u,c]=V.useState([]),[h,p]=V.useState(!1),[m,v]=V.useState(!1),[y,S]=V.useState(""),[N,j]=V.useState("all"),[T,O]=V.useState(""),[E,H]=V.useState(""),[U,L]=V.useState({type:"income",category:"",amount:"",payment_method:"efectivo",description:""}),J=M=>{const se=new Date,je=new Date;switch(M){case"today":return je.setHours(0,0,0,0),{start:je,end:se};case"week":const ze=se.getDay(),$t=se.getDate()-ze+(ze===0?-6:1);return je.setDate($t),je.setHours(0,0,0,0),{start:je,end:se};case"month":return je.setDate(1),je.setHours(0,0,0,0),{start:je,end:se};case"custom":if(T&&E){const Bt=new Date(T),Dt=new Date(E);return Bt.setHours(0,0,0,0),Dt.setHours(23,59,59,999),{start:Bt,end:Dt}}return{start:new Date(0),end:se};case"all":return{start:new Date(0),end:se};default:return{start:je,end:se}}},te=(M,se)=>{const{start:je,end:ze}=J(se);return M.filter($t=>{const Bt=new Date($t.created_at);return Bt>=je&&Bt<=ze})};V.useEffect(()=>{oe()},[l]),V.useEffect(()=>{const M=te(s,N);c(M)},[s,N,T,E]);const oe=async()=>{const{data:M}=await xe.from("cash_transactions").select("*").order("created_at",{ascending:!1});o(M||[])},he=async M=>{M.preventDefault(),l&&(await xe.from("cash_transactions").insert([{shift_id:l.id,type:U.type,category:U.category,amount:parseFloat(U.amount),payment_method:U.payment_method,description:U.description}]),oe(),p(!1),L({type:"income",category:"",amount:"",payment_method:"efectivo",description:""}))},F=()=>{v(!0)},fe=()=>{y&&parseFloat(y)>=0&&(r(parseFloat(y)),v(!1),S(""))},be=u.filter(M=>M.type==="income").reduce((M,se)=>M+Number(se.amount),0),z=u.filter(M=>M.type==="expense").reduce((M,se)=>M+Number(se.amount),0),C=be-z,Q=Number(l?.opening_cash||0),$=Q+C,G=u.filter(M=>M.type==="income"&&M.payment_method==="efectivo").reduce((M,se)=>M+Number(se.amount),0),w=u.filter(M=>M.type==="expense"&&M.payment_method==="efectivo").reduce((M,se)=>M+Number(se.amount),0),X=Q+G-w,D=u.filter(M=>M.type==="income"&&M.payment_method==="transferencia").reduce((M,se)=>M+Number(se.amount),0),Z=u.filter(M=>M.type==="expense"&&M.payment_method==="transferencia").reduce((M,se)=>M+Number(se.amount),0),W=D-Z,b=u.filter(M=>M.type==="income"&&M.payment_method==="qr").reduce((M,se)=>M+Number(se.amount),0),P=u.filter(M=>M.type==="expense"&&M.payment_method==="qr").reduce((M,se)=>M+Number(se.amount),0),re=b-P,ce=u.filter(M=>M.type==="income"&&M.payment_method==="expensas").reduce((M,se)=>M+Number(se.amount),0),we=u.filter(M=>M.type==="expense"&&M.payment_method==="expensas").reduce((M,se)=>M+Number(se.amount),0),ve=ce-we;return l?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-900 rounded-xl p-6 text-white shadow-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-2xl font-bold",children:"Turno Activo"}),a.jsxs("div",{className:"flex items-center gap-4 text-slate-200",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Mg,{size:16}),new Date(l.start_date).toLocaleDateString("es-AR")]}),a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(zg,{size:16}),new Date(l.start_date).toLocaleTimeString("es-AR")]})]}),a.jsxs("p",{className:"text-lg",children:[a.jsx("span",{className:"text-slate-300",children:"Usuario:"})," ",a.jsx("strong",{children:l.user_name})]}),a.jsxs("p",{className:"text-lg",children:[a.jsx("span",{className:"text-slate-300",children:"Efectivo Inicial:"})," ",a.jsxs("strong",{children:["$",Number(l.opening_cash).toFixed(2)]})]})]}),a.jsxs("button",{onClick:F,className:"bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white px-6 py-3 rounded-xl flex items-center gap-2 font-semibold shadow-lg transition-all",children:[a.jsx(Hg,{size:20}),"Cerrar Turno"]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl p-6 text-white shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-emerald-100",children:"Ingresos"}),a.jsx(_n,{size:24})]}),a.jsxs("p",{className:"text-3xl font-bold",children:["$",be.toFixed(2)]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-pink-600 rounded-xl p-6 text-white shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-red-100",children:"Egresos"}),a.jsx(vs,{size:24})]}),a.jsxs("p",{className:"text-3xl font-bold",children:["$",z.toFixed(2)]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl p-6 text-white shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-blue-100",children:"Balance"}),a.jsx(jl,{size:24})]}),a.jsxs("p",{className:"text-3xl font-bold",children:["$",C.toFixed(2)]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow border border-slate-200",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-600",children:"Caja Efectivo"}),a.jsxs("p",{className:"text-2xl font-bold text-emerald-600",children:["$",X.toFixed(2)]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Inicial + ingresos - egresos en efectivo"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow border border-slate-200",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-600",children:"Transferencias"}),a.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:["$",W.toFixed(2)]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Ingresos - egresos por transferencia"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow border border-slate-200",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-600",children:"QR"}),a.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:["$",re.toFixed(2)]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Ingresos - egresos por QR"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow border border-slate-200",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-600",children:"Expensas"}),a.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:["$",ve.toFixed(2)]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Ingresos - egresos por expensas"})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Movimientos de Caja"}),a.jsxs("span",{className:"text-sm text-slate-600 font-medium",children:["(",u.length,")"]})]}),a.jsxs("button",{onClick:()=>p(!0),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white px-6 py-2.5 rounded-xl flex items-center gap-2 shadow-lg transition-all",children:[a.jsx(kn,{size:20}),"Nuevo Movimiento"]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow p-4 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(tf,{size:18,className:"text-slate-600"}),a.jsx("span",{className:"font-semibold text-slate-800",children:"Perodo:"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:[a.jsx("button",{onClick:()=>j("today"),className:`px-4 py-2 rounded-lg font-medium transition-all ${N==="today"?"bg-blue-500 text-white shadow-lg":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Hoy"}),a.jsx("button",{onClick:()=>j("week"),className:`px-4 py-2 rounded-lg font-medium transition-all ${N==="week"?"bg-blue-500 text-white shadow-lg":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Esta Semana"}),a.jsx("button",{onClick:()=>j("month"),className:`px-4 py-2 rounded-lg font-medium transition-all ${N==="month"?"bg-blue-500 text-white shadow-lg":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Este Mes"}),a.jsx("button",{onClick:()=>j("all"),className:`px-4 py-2 rounded-lg font-medium transition-all ${N==="all"?"bg-blue-500 text-white shadow-lg":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Todo"}),a.jsx("button",{onClick:()=>j("custom"),className:`px-4 py-2 rounded-lg font-medium transition-all ${N==="custom"?"bg-blue-500 text-white shadow-lg":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Personalizado"})]}),N==="custom"&&a.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Fecha Inicio:"}),a.jsx("input",{type:"date",value:T,onChange:M=>O(M.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Fecha Fin:"}),a.jsx("input",{type:"date",value:E,onChange:M=>H(M.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Fecha"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Tipo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Categora"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Monto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Mtodo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Descripcin"})]})}),a.jsx("tbody",{children:u.length>0?u.map(M=>a.jsxs("tr",{className:"border-t border-slate-200 hover:bg-slate-50",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-slate-700",children:new Date(M.created_at).toLocaleString("es-AR")}),a.jsx("td",{className:"px-6 py-4",children:M.type==="income"?a.jsxs("span",{className:"inline-flex items-center gap-1 bg-emerald-100 text-emerald-700 px-3 py-1 rounded-full text-xs font-medium",children:[a.jsx(_n,{size:14}),"Ingreso"]}):a.jsxs("span",{className:"inline-flex items-center gap-1 bg-red-100 text-red-700 px-3 py-1 rounded-full text-xs font-medium",children:[a.jsx(vs,{size:14}),"Egreso"]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-700",children:M.category}),a.jsxs("td",{className:"px-6 py-4 text-sm font-bold text-slate-800",children:["$",Number(M.amount).toFixed(2)]}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-700",children:M.payment_method}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:M.description})]},M.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:"No hay movimientos en este perodo"})})})]})}),h&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 p-6 rounded-t-2xl",children:a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Nuevo Movimiento"})}),a.jsxs("form",{onSubmit:he,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Tipo *"}),a.jsxs("select",{required:!0,value:U.type,onChange:M=>L({...U,type:M.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("option",{value:"income",children:"Ingreso"}),a.jsx("option",{value:"expense",children:"Egreso"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Categora *"}),a.jsx("input",{type:"text",required:!0,value:U.category,onChange:M=>L({...U,category:M.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Monto *"}),a.jsx("input",{type:"number",required:!0,step:"0.01",value:U.amount,onChange:M=>L({...U,amount:M.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Mtodo de Pago *"}),a.jsxs("select",{required:!0,value:U.payment_method,onChange:M=>L({...U,payment_method:M.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"transferencia",children:"Transferencia"}),a.jsx("option",{value:"qr",children:"QR"}),a.jsx("option",{value:"tarjeta",children:"Tarjeta"}),a.jsx("option",{value:"expensas",children:"Expensas"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Descripcin"}),a.jsx("textarea",{value:U.description,onChange:M=>L({...U,description:M.target.value}),rows:3,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl"})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 px-6 py-3 border-2 border-slate-300 text-slate-700 font-semibold rounded-xl hover:bg-slate-50",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-pink-700 shadow-lg",children:"Guardar"})]})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl",children:[a.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 p-6 rounded-t-2xl",children:a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Cerrar Turno"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-semibold text-slate-700",children:"Usuario:"}),a.jsx("span",{className:"text-slate-900",children:l.user_name})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-semibold text-slate-700",children:"Hora Inicio:"}),a.jsx("span",{className:"text-slate-900",children:new Date(l.start_date).toLocaleString("es-AR")})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-semibold text-slate-700",children:"Efectivo Inicial:"}),a.jsxs("span",{className:"text-slate-900",children:["$",Number(l.opening_cash).toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between border-t border-slate-200 pt-2 mt-2",children:[a.jsx("span",{className:"font-semibold text-slate-700",children:"Balance del Turno:"}),a.jsxs("span",{className:`font-bold ${C>=0?"text-emerald-600":"text-red-600"}`,children:["$",C.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-semibold text-slate-700",children:"Efectivo Esperado:"}),a.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["$",$.toFixed(2)]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Efectivo Final en Caja *"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 font-semibold",children:"$"}),a.jsx("input",{type:"number",required:!0,step:"0.01",min:"0",value:y,onChange:M=>S(M.target.value),className:"w-full pl-8 pr-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-red-500 text-lg font-semibold",placeholder:"0.00"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Cuenta todo el efectivo fsico que hay en la caja"})]}),y&&a.jsx("div",{className:`p-4 rounded-xl ${Math.abs(parseFloat(y)-$)<.01?"bg-emerald-50 border-2 border-emerald-200":parseFloat(y)>$?"bg-blue-50 border-2 border-blue-200":"bg-amber-50 border-2 border-amber-200"}`,children:a.jsx("p",{className:"font-semibold text-sm",children:Math.abs(parseFloat(y)-$)<.01?a.jsx("span",{className:"text-emerald-700",children:" La caja cuadra perfectamente"}):parseFloat(y)>$?a.jsxs("span",{className:"text-blue-700",children:["Hay $",(parseFloat(y)-$).toFixed(2)," de ms"]}):a.jsxs("span",{className:"text-amber-700",children:["Faltan $",($-parseFloat(y)).toFixed(2)]})})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{v(!1),S("")},className:"flex-1 px-6 py-3 border-2 border-slate-300 text-slate-700 font-semibold rounded-xl hover:bg-slate-50",children:"Cancelar"}),a.jsx("button",{onClick:fe,disabled:!y,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-500 to-pink-600 text-white font-semibold rounded-xl hover:from-red-600 hover:to-pink-700 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Cerrar Turno"})]})]})]})})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Vi,{className:"mx-auto text-slate-400 mb-4",size:64}),a.jsx("h3",{className:"text-xl font-bold text-slate-700",children:"No hay turno activo"}),a.jsx("p",{className:"text-slate-500",children:"Inicia un turno para gestionar la caja"})]})}function ev(){const[l,r]=V.useState([]),[s,o]=V.useState([]),[u,c]=V.useState(!0),[h,p]=V.useState("today"),[m,v]=V.useState(null),[y,S]=V.useState(null),[N,j]=V.useState(new Date);V.useEffect(()=>{O(),T();const z=setInterval(()=>{j(new Date)},1e3);return()=>clearInterval(z)},[h]);const T=async()=>{const{data:z}=await xe.from("configuration").select("*").maybeSingle();z&&S(z)},O=async()=>{c(!0);let z=xe.from("sales").select("*").order("created_at",{ascending:!1}),C=xe.from("cash_transactions").select("*").order("created_at",{ascending:!1});if(h==="today"){const G=new Date;G.setHours(G.getHours()-24);const w=G.toISOString();z=z.gte("created_at",w),C=C.gte("created_at",w)}else if(h==="week"){const G=new Date;G.setDate(G.getDate()-7);const w=G.toISOString();z=z.gte("created_at",w),C=C.gte("created_at",w)}else if(h==="month"){const G=new Date;G.setDate(G.getDate()-30);const w=G.toISOString();z=z.gte("created_at",w),C=C.gte("created_at",w)}const[{data:Q},{data:$}]=await Promise.all([z,C]);r(Q||[]),o($||[]),c(!1)},E=z=>{const C=new Date(z);return C.setHours(C.getHours()+-3),C.toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric"})},H=z=>{const C=new Date(z);return C.setHours(C.getHours()+-3),C.toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit",hour12:!1})},U=z=>{let C=0,Q=0,$=0,G=0;return z.payments&&Array.isArray(z.payments)?z.payments.forEach(w=>{const X=Number(w.amount)||0,D=String(w.method||"").toLowerCase();D==="efectivo"?C+=X:D==="transferencia"?Q+=X:D==="qr"?$+=X:(D==="expensas"||D==="expensa")&&(G+=X)}):s.filter(X=>X.type==="income"&&X.category==="venta"&&typeof X.description=="string"&&X.description.startsWith(`Venta ${z.sale_number}`)).forEach(X=>{const D=Number(X.amount)||0,Z=String(X.payment_method||"").toLowerCase();Z==="efectivo"?C+=D:Z==="transferencia"?Q+=D:Z==="qr"?$+=D:(Z==="expensas"||Z==="expensa")&&(G+=D)}),{efectivo:C,transferencia:Q,qr:$,expensa:G}},L=(z,C)=>{const Q=[];return z.efectivo>0&&Q.push("Efectivo"),z.transferencia>0&&Q.push("Transferencia"),z.qr>0&&Q.push("QR"),z.expensa>0&&Q.push("Expensa"),Q.length?Q.join(" + "):C||""},J=()=>{const z=D=>D.toFixed(2).replace(".",","),C=["Fecha","Hora","Tipo","Recibo","ID Retiro","Cliente","Lote","Origen","Item","Cantidad","Precio Unitario","Subtotal Item","Total Transaccin","Mtodo","Efectivo","Transferencia","QR","Expensa"],Q=[];l.forEach(D=>{const Z=Array.isArray(D.items)?D.items:[],W=D.customer_name||D.customer||"Cliente general",b=D.customer_lot||"",P=U(D),re=L(P,D.payment_method);Z.length===0?Q.push([E(D.created_at),H(D.created_at),"Kiosco",D.sale_number,"",W,b,"Kiosco","Venta",1,z(Number(D.total)),z(Number(D.total)),z(Number(D.total)),re,z(P.efectivo),z(P.transferencia),z(P.qr),z(P.expensa)]):Z.forEach((ce,we)=>{const ve=we===0;Q.push([E(D.created_at),H(D.created_at),"Kiosco",D.sale_number,"",W,b,"Kiosco",ce.product_name,ce.quantity,z(Number(ce.price)),z(Number(ce.subtotal)),ve?z(Number(D.total)):"",ve?re:"",ve?z(P.efectivo):"",ve?z(P.transferencia):"",ve?z(P.qr):"",ve?z(P.expensa):""])})}),s.filter(D=>D.type==="expense").forEach(D=>{const Z=Number(D.amount)||0,W=String(D.payment_method||""),b=D.description||D.category||"Gasto",P=W.toLowerCase();let re="",ce="",we="",ve="";const M=z(-Z);P==="efectivo"?re=M:P==="transferencia"?ce=M:P==="qr"?we=M:(P==="expensas"||P==="expensa")&&(ve=M),Q.push([E(D.created_at),H(D.created_at),"Gasto","","","","","Kiosco",`EGRESO - ${b}`,1,M,M,M,W,re,ce,we,ve])});const G=[C.join(","),...Q.map(D=>D.map(Z=>{const W=String(Z??"");return W.includes(",")||W.includes('"')||W.includes(`
`)?`"${W.replace(/"/g,'""')}"`:W}).join(","))].join(`
`),w=new Blob([G],{type:"text/csv;charset=utf-8;"}),X=document.createElement("a");X.href=URL.createObjectURL(w),X.download=`reporte_ventas_${h}_${new Date().toISOString().split("T")[0]}.csv`,X.click()},te=()=>{const z=window.open("","","height=600,width=800");if(!z)return;const C=l.reduce((Q,$)=>Q+Number($.total),0);z.document.write(`
      <html>
        <head>
          <title>Reporte de Ventas</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h1 { text-align: center; color: #333; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-left; }
            th { background-color: #f3f4f6; font-weight: bold; }
            .total { margin-top: 20px; text-align: right; font-size: 18px; font-weight: bold; }
          </style>
        </head>
        <body>
          <h1>${y?.business_name||"Kiosco"} - Reporte de Ventas</h1>
          <p><strong>Perodo:</strong> ${h==="today"?"Hoy":h==="week"?"ltima Semana":h==="month"?"ltimo Mes":"Todo"}</p>
          <p><strong>Fecha de emisin:</strong> ${new Date().toLocaleString("es-AR")}</p>
          <table>
            <thead>
              <tr>
                <th>Nmero</th>
                <th>Fecha</th>
                <th>Usuario</th>
                <th>Items</th>
                <th>Mtodo</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${l.map(Q=>{const G=(Array.isArray(Q.items)?Q.items:[]).reduce((w,X)=>w+X.quantity,0);return`
                  <tr>
                    <td>${Q.sale_number}</td>
                    <td>${new Date(Q.created_at).toLocaleString("es-AR")}</td>
                    <td>${Q.user_name}</td>
                    <td>${G}</td>
                    <td>${Q.payment_method}</td>
                    <td>$${Number(Q.total).toFixed(2)}</td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>
          <div class="total">
            Total de Ventas: ${l.length} | Monto Total: $${C.toFixed(2)}
          </div>
        </body>
      </html>
    `),z.document.close(),z.print()},oe=z=>{const C=window.open("","","height=600,width=400");if(!C)return;const Q=Array.isArray(z.items)?z.items:[];C.document.write(`
      <html>
        <head>
          <title>Ticket ${z.sale_number}</title>
          <style>
            body {
              font-family: 'Courier New', monospace;
              padding: 10px;
              max-width: 300px;
              margin: 0 auto;
            }
            .header { text-align: center; margin-bottom: 15px; border-bottom: 2px dashed #000; padding-bottom: 10px; }
            .header h2 { margin: 5px 0; font-size: 18px; }
            .header p { margin: 3px 0; font-size: 12px; }
            .info { margin: 10px 0; font-size: 12px; }
            .items { margin: 15px 0; }
            .item { display: flex; justify-content: space-between; margin: 5px 0; font-size: 12px; }
            .totals { border-top: 2px dashed #000; padding-top: 10px; margin-top: 10px; }
            .total-row { display: flex; justify-content: space-between; margin: 5px 0; }
            .total-row.final { font-weight: bold; font-size: 14px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 15px; border-top: 2px dashed #000; padding-top: 10px; font-size: 11px; }
          </style>
        </head>
        <body>
          <div class="header">
            <h2>${y?.business_name||"Kiosco"}</h2>
            ${y?.address?`<p>${y.address}</p>`:""}
            ${y?.phone?`<p>Tel: ${y.phone}</p>`:""}
            ${y?.tax_id?`<p>CUIT: ${y.tax_id}</p>`:""}
          </div>

          <div class="info">
            <p><strong>Ticket:</strong> ${z.sale_number}</p>
            <p><strong>Fecha:</strong> ${new Date(z.created_at).toLocaleString("es-AR")}</p>
            <p><strong>Vendedor:</strong> ${z.user_name}</p>
            <p><strong>Pago:</strong> ${z.payment_method}</p>
          </div>

          <div class="items">
            <div style="border-bottom: 1px solid #000; margin-bottom: 10px; padding-bottom: 5px;">
              <strong>PRODUCTOS</strong>
            </div>
            ${Q.map($=>`
              <div class="item">
                <div>
                  <div>${$.product_name}</div>
                  <div style="font-size: 10px;">${$.quantity} x $${Number($.price).toFixed(2)}</div>
                </div>
                <div>$${Number($.subtotal).toFixed(2)}</div>
              </div>
            `).join("")}
          </div>

          <div class="totals">
            <div class="total-row">
              <span>Subtotal:</span>
              <span>$${Number(z.subtotal).toFixed(2)}</span>
            </div>
            ${z.discount>0?`
              <div class="total-row">
                <span>Descuento:</span>
                <span>-$${Number(z.discount).toFixed(2)}</span>
              </div>
            `:""}
            <div class="total-row final">
              <span>TOTAL:</span>
              <span>$${Number(z.total).toFixed(2)}</span>
            </div>
          </div>

          <div class="footer">
            <p>${y?.receipt_message||"Gracias por su compra"}</p>
          </div>
        </body>
      </html>
    `),C.document.close(),C.print()},he=l.reduce((z,C)=>z+Number(C.total),0),F=l.reduce((z,C)=>{const Q=Array.isArray(C.items)?C.items:[];return z+Q.reduce(($,G)=>$+G.quantity,0)},0),fe=l.length>0?he/l.length:0,be=l.reduce((z,C)=>(z[C.payment_method]=(z[C.payment_method]||0)+Number(C.total),z),{});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[a.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Resumen de Ventas"}),a.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a.jsxs("select",{value:h,onChange:z=>p(z.target.value),className:"px-4 py-2 bg-white border-2 border-slate-200 rounded-xl font-medium focus:ring-2 focus:ring-orange-500",children:[a.jsx("option",{value:"today",children:"Hoy"}),a.jsx("option",{value:"week",children:"ltima Semana"}),a.jsx("option",{value:"month",children:"ltimo Mes"}),a.jsx("option",{value:"all",children:"Todo"})]}),a.jsxs("button",{onClick:J,className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white rounded-xl flex items-center gap-2 font-medium shadow-lg transition-all",children:[a.jsx(Bg,{size:18}),"Exportar CSV"]}),a.jsxs("button",{onClick:te,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white rounded-xl flex items-center gap-2 font-medium shadow-lg transition-all",children:[a.jsx(nh,{size:18}),"Imprimir"]})]})]}),u?a.jsx("div",{className:"text-center py-8",children:"Cargando..."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-blue-100 text-sm",children:"Total Ventas"}),a.jsxs("p",{className:"text-3xl font-bold mt-2",children:["$",he.toFixed(2)]})]}),a.jsx(jl,{className:"opacity-80",size:40})]})}),a.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl p-6 text-white shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-emerald-100 text-sm",children:"Cantidad"}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:l.length})]}),a.jsx(nf,{className:"opacity-80",size:40})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-purple-100 text-sm",children:"Ticket Promedio"}),a.jsxs("p",{className:"text-3xl font-bold mt-2",children:["$",fe.toFixed(2)]})]}),a.jsx(_n,{className:"opacity-80",size:40})]})}),a.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-orange-100 text-sm",children:"Items Vendidos"}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:F})]}),a.jsx(Xh,{className:"opacity-80",size:40})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-4",children:"Ventas por Mtodo de Pago"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(be).map(([z,C])=>a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-slate-600 capitalize",children:z}),a.jsxs("p",{className:"text-xl font-bold text-slate-800",children:["$",C.toFixed(2)]})]},z))})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Nmero"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Fecha"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Usuario"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Items"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Mtodo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Total"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:l.map(z=>{const Q=(Array.isArray(z.items)?z.items:[]).reduce(($,G)=>$+G.quantity,0);return a.jsxs("tr",{className:"hover:bg-slate-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:z.sale_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(z.created_at).toLocaleString("es-AR")}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:z.user_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:Q}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 capitalize",children:z.payment_method}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:["$",Number(z.total).toFixed(2)]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("button",{onClick:()=>v(z),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Ver"})})]},z.id)})})]}),l.length===0&&a.jsx("div",{className:"text-center py-8 text-slate-500",children:"No hay ventas para mostrar en este perodo"})]})})]}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xl font-bold text-slate-800",children:["Detalle de Venta - ",m.sale_number]}),a.jsx("button",{onClick:()=>v(null),className:"text-slate-400 hover:text-slate-600",children:a.jsx(hl,{size:24})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Fecha"}),a.jsx("p",{className:"font-medium",children:new Date(m.created_at).toLocaleString("es-AR")})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Usuario"}),a.jsx("p",{className:"font-medium",children:m.user_name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Mtodo de Pago"}),a.jsx("p",{className:"font-medium capitalize",children:m.payment_method})]}),m.customer_name&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Cliente"}),a.jsx("p",{className:"font-medium",children:m.customer_name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Lote"}),a.jsx("p",{className:"font-medium",children:m.customer_lot})]})]})]}),m.payments&&m.payments.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Desglose de Pagos"}),a.jsx("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:m.payments.map((z,C)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"capitalize",children:[z.method,":"]}),a.jsxs("span",{className:"font-medium",children:["$",z.amount.toFixed(2)]})]},C))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Items"}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-600",children:"Producto"}),a.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-slate-600",children:"Cant."}),a.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-600",children:"Precio"}),a.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-600",children:"Subtotal"})]})}),a.jsx("tbody",{children:Array.isArray(m.items)&&m.items.map((z,C)=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-4 py-2 text-sm",children:z.product_name}),a.jsx("td",{className:"px-4 py-2 text-sm text-center",children:z.quantity}),a.jsxs("td",{className:"px-4 py-2 text-sm text-right",children:["$",Number(z.price).toFixed(2)]}),a.jsxs("td",{className:"px-4 py-2 text-sm text-right font-medium",children:["$",Number(z.subtotal).toFixed(2)]})]},C))})]})})]}),a.jsx("div",{className:"border-t pt-4",children:a.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[a.jsx("span",{children:"Total:"}),a.jsxs("span",{children:["$",Number(m.total).toFixed(2)]})]})}),a.jsx("div",{className:"mt-6 flex gap-2",children:a.jsxs("button",{onClick:()=>oe(m),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center justify-center gap-2",children:[a.jsx(nh,{size:18}),"Imprimir Ticket"]})})]})]})})]})}const tv="842114";function rv(){const[l,r]=V.useState(!1),[s,o]=V.useState(""),[u,c]=V.useState(""),[h,p]=V.useState("general"),[m,v]=V.useState([]),[y,S]=V.useState(null),[N,j]=V.useState(!1),[T,O]=V.useState(null),[E,H]=V.useState(!1),[U,L]=V.useState({username:"",password:"",full_name:"",role:"vendedor"}),[J,te]=V.useState([]),[oe,he]=V.useState(!1);V.useEffect(()=>{l&&(F(),fe(),be())},[l]);const F=async()=>{const{data:w}=await xe.from("users").select("*").order("created_at",{ascending:!1});v(w||[])},fe=async()=>{const{data:w}=await xe.from("configuration").select("*").maybeSingle();w&&S(w)},be=async()=>{he(!0);const{data:w}=await xe.from("shifts").select("*").eq("active",!1).order("start_date",{ascending:!1}).limit(50),X=w||[];if(X.length===0){te([]),he(!1);return}const D=X.map(P=>P.id),{data:Z}=await xe.from("cash_transactions").select("*").in("shift_id",D),W=Z||[],b=X.map(P=>{const re=W.filter(_e=>_e.shift_id===P.id),ce=re.filter(_e=>_e.type==="income"&&_e.payment_method==="efectivo").reduce((_e,qe)=>_e+Number(qe.amount),0),we=re.filter(_e=>_e.type==="expense"&&_e.payment_method==="efectivo").reduce((_e,qe)=>_e+Number(qe.amount),0),ve=re.filter(_e=>_e.type==="income"&&_e.payment_method==="transferencia").reduce((_e,qe)=>_e+Number(qe.amount),0),M=re.filter(_e=>_e.type==="expense"&&_e.payment_method==="transferencia").reduce((_e,qe)=>_e+Number(qe.amount),0),se=re.filter(_e=>_e.type==="income"&&_e.payment_method==="qr").reduce((_e,qe)=>_e+Number(qe.amount),0),je=re.filter(_e=>_e.type==="expense"&&_e.payment_method==="qr").reduce((_e,qe)=>_e+Number(qe.amount),0),ze=re.filter(_e=>_e.type==="income"&&_e.payment_method==="expensas").reduce((_e,qe)=>_e+Number(qe.amount),0),$t=re.filter(_e=>_e.type==="expense"&&_e.payment_method==="expensas").reduce((_e,qe)=>_e+Number(qe.amount),0),Dt=Number(P.opening_cash||0)+ce-we,ws=Number(P.closing_cash||0)-Dt;return{shift:P,incomeCash:ce,incomeTransfer:ve,incomeQr:se,incomeExpensas:ze,expenseCash:we,expenseTransfer:M,expenseQr:je,expenseExpensas:$t,expectedCash:Dt,difference:ws}});te(b),he(!1)},z=async w=>{w.preventDefault(),T?await xe.from("users").update({username:U.username,password:U.password,full_name:U.full_name,role:U.role,updated_at:new Date().toISOString()}).eq("id",T.id):await xe.from("users").insert([U]),F(),j(!1),O(null),L({username:"",password:"",full_name:"",role:"vendedor"})},C=w=>{O(w),L({username:w.username,password:w.password,full_name:w.full_name,role:w.role}),j(!0)},Q=async w=>{confirm("Ests seguro de eliminar este usuario?")&&(await xe.from("users").delete().eq("id",w),F())},$=async w=>{w.preventDefault(),y&&(await xe.from("configuration").update({business_name:y.business_name,address:y.address,phone:y.phone,tax_id:y.tax_id,currency:y.currency,receipt_message:y.receipt_message,updated_at:new Date().toISOString()}).eq("id",y.id),alert("Configuracin guardada correctamente"),window.location.reload())},G=w=>{w.preventDefault(),s.trim()===tv?(r(!0),c(""),o("")):c("Clave incorrecta. No pods ingresar al mdulo.")};return l?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex gap-2 bg-white rounded-xl p-2 shadow-lg",children:[a.jsxs("button",{onClick:()=>p("general"),className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-all flex items-center justify-center gap-2 ${h==="general"?"bg-gradient-to-r from-blue-500 to-cyan-600 text-white shadow-lg":"text-slate-600 hover:bg-slate-100"}`,children:[a.jsx(rh,{size:20}),"Datos del Negocio"]}),a.jsxs("button",{onClick:()=>p("users"),className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-all flex items-center justify-center gap-2 ${h==="users"?"bg-gradient-to-r from-purple-500 to-pink-600 text-white shadow-lg":"text-slate-600 hover:bg-slate-100"}`,children:[a.jsx(Qg,{size:20}),"Usuarios"]}),a.jsxs("button",{onClick:()=>p("cierres"),className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-all flex items-center justify-center gap-2 ${h==="cierres"?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-lg":"text-slate-600 hover:bg-slate-100"}`,children:[a.jsx(Vi,{size:20}),"Cierres de Turno"]})]}),h==="general"&&y&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[a.jsx(rh,{className:"text-blue-600",size:24}),"Configuracin General"]}),a.jsxs("form",{onSubmit:$,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Nombre del Negocio *"}),a.jsx("input",{type:"text",required:!0,value:y.business_name,onChange:w=>S({...y,business_name:w.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Telfono"}),a.jsx("input",{type:"text",value:y.phone,onChange:w=>S({...y,phone:w.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Direccin"}),a.jsx("input",{type:"text",value:y.address,onChange:w=>S({...y,address:w.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"CUIT/RUT"}),a.jsx("input",{type:"text",value:y.tax_id,onChange:w=>S({...y,tax_id:w.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Smbolo de Moneda"}),a.jsx("input",{type:"text",value:y.currency,onChange:w=>S({...y,currency:w.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Mensaje en Ticket"}),a.jsx("textarea",{value:y.receipt_message,onChange:w=>S({...y,receipt_message:w.target.value}),rows:3,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500"})]}),a.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg transition-all",children:"Guardar Configuracin"})]})]}),h==="users"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Gestin de Usuarios"}),a.jsxs("button",{onClick:()=>{O(null),L({username:"",password:"",full_name:"",role:"vendedor"}),j(!0)},className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white px-6 py-2.5 rounded-xl flex items-center gap-2 shadow-lg transition-all",children:[a.jsx(kn,{size:20}),"Nuevo Usuario"]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Usuario"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Nombre Completo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Rol"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{children:m.map(w=>a.jsxs("tr",{className:"border-t border-slate-200 hover:bg-slate-50",children:[a.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-700",children:w.username}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-700",children:w.full_name}),a.jsx("td",{className:"px-6 py-4 text-sm",children:a.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${w.role==="admin"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:w.role==="admin"?"Administrador":"Vendedor"})}),a.jsx("td",{className:"px-6 py-4 text-sm",children:a.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${w.active?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:w.active?"Activo":"Inactivo"})}),a.jsx("td",{className:"px-6 py-4 text-sm",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>C(w),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all",children:a.jsx(Jg,{size:18})}),a.jsx("button",{onClick:()=>Q(w.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",children:a.jsx(El,{size:18})})]})})]},w.id))})]})})]}),h==="cierres"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[a.jsx(Vi,{className:"text-emerald-600",size:24}),"Cierres de Turno"]}),a.jsx("button",{onClick:be,className:"px-4 py-2 text-sm rounded-xl border border-slate-300 text-slate-700 hover:bg-slate-50",children:"Actualizar"})]}),oe?a.jsx("p",{className:"text-sm text-slate-500",children:"Cargando cierres de turno..."}):J.length===0?a.jsx("p",{className:"text-sm text-slate-500",children:"No hay cierres de turno registrados todava."}):a.jsx("div",{className:"bg-white rounded-xl shadow-inner overflow-x-auto border border-slate-200",children:a.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[a.jsx("thead",{className:"bg-slate-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-600 uppercase",children:"Fecha Inicio"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-600 uppercase",children:"Usuario"}),a.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-600 uppercase",children:"Efectivo Inicial"}),a.jsx("th",{className:"px-4 py-3 text-right font-semibold text-emerald-700 uppercase",children:"Ing. Efvo"}),a.jsx("th",{className:"px-4 py-3 text-right font-semibold text-emerald-700 uppercase",children:"Ing. Transf"}),a.jsx("th",{className:"px-4 py-3 text-right font-semibold text-emerald-700 uppercase",children:"Ing. QR"}),a.jsx("th",{className:"px-4 py-3 text-right font-semibold text-emerald-700 uppercase",children:"Ing. Expensas"}),a.jsx("th",{className:"px-4 py-3 text-right font-semibold text-red-700 uppercase",children:"Egr. Efvo"}),a.jsx("th",{className:"px-4 py-3 text-right font-semibold text-red-700 uppercase",children:"Egr. Transf"}),a.jsx("th",{className:"px-4 py-3 text-right font-semibold text-red-700 uppercase",children:"Egr. QR"}),a.jsx("th",{className:"px-4 py-3 text-right font-semibold text-red-700 uppercase",children:"Egr. Expensas"}),a.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-600 uppercase",children:"Efvo Final"}),a.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-600 uppercase",children:"Diferencia"}),a.jsx("th",{className:"px-4 py-3 text-center font-semibold text-slate-600 uppercase",children:"Estado"})]})}),a.jsx("tbody",{children:J.map(w=>{const X=new Date(w.shift.start_date),D=w.shift.end_date?new Date(w.shift.end_date):null,Z=Number(w.shift.closing_cash||0),W=w.difference,b=Math.abs(W)<.01;return a.jsxs("tr",{className:"border-t border-slate-200 hover:bg-slate-50",children:[a.jsxs("td",{className:"px-4 py-3 text-slate-700 whitespace-nowrap",children:[X.toLocaleString("es-AR"),D&&a.jsxs("div",{className:"text-[10px] text-slate-500",children:["Cierre: ",D.toLocaleString("es-AR")]})]}),a.jsx("td",{className:"px-4 py-3 text-slate-700 whitespace-nowrap",children:w.shift.user_name}),a.jsxs("td",{className:"px-4 py-3 text-right text-slate-800",children:["$",Number(w.shift.opening_cash||0).toFixed(2)]}),a.jsxs("td",{className:"px-4 py-3 text-right text-emerald-700",children:["$",w.incomeCash.toFixed(2)]}),a.jsxs("td",{className:"px-4 py-3 text-right text-emerald-700",children:["$",w.incomeTransfer.toFixed(2)]}),a.jsxs("td",{className:"px-4 py-3 text-right text-emerald-700",children:["$",w.incomeQr.toFixed(2)]}),a.jsxs("td",{className:"px-4 py-3 text-right text-emerald-700",children:["$",w.incomeExpensas.toFixed(2)]}),a.jsxs("td",{className:"px-4 py-3 text-right text-red-700",children:["$",w.expenseCash.toFixed(2)]}),a.jsxs("td",{className:"px-4 py-3 text-right text-red-700",children:["$",w.expenseTransfer.toFixed(2)]}),a.jsxs("td",{className:"px-4 py-3 text-right text-red-700",children:["$",w.expenseQr.toFixed(2)]}),a.jsxs("td",{className:"px-4 py-3 text-right text-red-700",children:["$",w.expenseExpensas.toFixed(2)]}),a.jsxs("td",{className:"px-4 py-3 text-right text-slate-800",children:["$",Z.toFixed(2)]}),a.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${b?"text-emerald-600":W>0?"text-blue-600":"text-amber-700"}`,children:["$",W.toFixed(2)]}),a.jsx("td",{className:"px-4 py-3 text-center",children:b?a.jsx("span",{className:"inline-flex px-3 py-1 rounded-full text-[11px] font-semibold bg-emerald-100 text-emerald-700",children:"Caja OK"}):a.jsx("span",{className:"inline-flex px-3 py-1 rounded-full text-[11px] font-semibold bg-amber-100 text-amber-700",children:"Diferencia"})})]},w.shift.id)})})]})})]}),N&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 p-6 rounded-t-2xl",children:a.jsx("h3",{className:"text-2xl font-bold text-white",children:T?"Editar Usuario":"Nuevo Usuario"})}),a.jsxs("form",{onSubmit:z,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Usuario *"}),a.jsx("input",{type:"text",required:!0,value:U.username,onChange:w=>L({...U,username:w.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Contrasea *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:E?"text":"password",required:!0,value:U.password,onChange:w=>L({...U,password:w.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl pr-12"}),a.jsx("button",{type:"button",onClick:()=>H(!E),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:E?a.jsx(Zh,{size:20}):a.jsx(ef,{size:20})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Nombre Completo *"}),a.jsx("input",{type:"text",required:!0,value:U.full_name,onChange:w=>L({...U,full_name:w.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Rol *"}),a.jsxs("select",{required:!0,value:U.role,onChange:w=>L({...U,role:w.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("option",{value:"vendedor",children:"Vendedor"}),a.jsx("option",{value:"admin",children:"Administrador"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{j(!1),O(null)},className:"flex-1 px-6 py-3 border-2 border-slate-300 text-slate-700 font-semibold rounded-xl hover:bg-slate-50",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-pink-700 shadow-lg",children:"Guardar"})]})]})]})})]}):a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-slate-700 to-slate-900 text-white",children:a.jsx(rf,{size:24})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Acceso Sper Administrador"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Ingres la clave para acceder a la configuracin del sistema."})]})]}),a.jsxs("form",{onSubmit:G,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Clave de Sper Administrador"}),a.jsx("input",{type:"password",value:s,onChange:w=>o(w.target.value),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-slate-700 focus:border-transparent",placeholder:"",autoFocus:!0}),u&&a.jsx("p",{className:"text-sm text-red-600 mt-2",children:u})]}),a.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-slate-700 to-slate-900 hover:from-slate-800 hover:to-black text-white px-6 py-3 rounded-xl font-semibold shadow-lg transition-all",children:"Ingresar"})]})]})})}function nv({shift:l}){const[r,s]=V.useState([]),[o,u]=V.useState([]),[c,h]=V.useState(!0),[p,m]=V.useState(!1),[v,y]=V.useState("all"),[S,N]=V.useState("today"),[j,T]=V.useState(""),[O,E]=V.useState(""),[H,U]=V.useState(""),[L,J]=V.useState({product_id:"",quantity:"",supplier:"",reference:"",notes:""});V.useEffect(()=>{te()},[S,v,j,O,H]);const te=async()=>{h(!0);let C=xe.from("inventory_movements").select("*").order("created_at",{ascending:!1});if(v!=="all"&&(C=C.eq("type",v)),S==="today"){const G=new Date;G.setHours(G.getHours()-24),C=C.gte("created_at",G.toISOString())}else if(S==="week"){const G=new Date;G.setDate(G.getDate()-7),C=C.gte("created_at",G.toISOString())}else if(S==="month"){const G=new Date;G.setDate(G.getDate()-30),C=C.gte("created_at",G.toISOString())}j&&(C=C.or(`product_name.ilike.%${j}%,product_code.ilike.%${j}%`)),O&&(C=C.ilike("supplier",`%${O}%`)),H&&(C=C.eq("category",H));const[{data:Q},{data:$}]=await Promise.all([C,xe.from("products").select("*").order("name")]);s(Q||[]),u($||[]),h(!1)},oe=async C=>{C.preventDefault();const Q=o.find(Z=>Z.id===L.product_id);if(!Q){alert("Selecciona un producto vlido");return}const $=parseInt(L.quantity)||0;if($<=0){alert("La cantidad debe ser mayor a 0");return}const G=Q.stock,w=G+$,{error:X}=await xe.from("products").update({stock:w,updated_at:new Date().toISOString()}).eq("id",Q.id);if(X){console.error("Error actualizando stock:",X),alert("Error actualizando el stock del producto");return}const{error:D}=await xe.from("inventory_movements").insert([{product_id:Q.id,product_code:Q.code,product_name:Q.name,category:Q.category||"",type:"purchase",quantity:$,previous_stock:G,new_stock:w,supplier:L.supplier||"",reference:L.reference||"",user_name:l.user_name,shift_id:l.id,notes:L.notes||""}]);if(D){console.error("Error registrando movimiento:",D),alert(`Error registrando el movimiento: ${D.message}

Por favor, ejecuta el script SQL create_inventory_movements.sql en Supabase.`);return}J({product_id:"",quantity:"",supplier:"",reference:"",notes:""}),m(!1),te()},he=C=>{const Q=new Date(C);return Q.setHours(Q.getHours()+-3),Q.toLocaleString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})},F=Array.from(new Set(r.map(C=>C.category).filter(Boolean))),fe=Array.from(new Set(r.filter(C=>C.type==="purchase").map(C=>C.supplier).filter(Boolean))),be=r.filter(C=>C.type==="purchase").reduce((C,Q)=>C+Q.quantity,0),z=r.filter(C=>C.type==="sale").reduce((C,Q)=>C+Math.abs(Q.quantity),0);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(kl,{className:"text-blue-600",size:32}),a.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Movimientos de Inventario"})]}),a.jsxs("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white px-6 py-2.5 rounded-xl flex items-center gap-2 shadow-lg transition-all duration-200 hover:scale-105",children:[a.jsx(kn,{size:20}),"Cargar Mercadera"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl p-6 text-white shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-emerald-100 text-sm",children:"Total Ingresos"}),a.jsxs("p",{className:"text-3xl font-bold mt-2",children:[be," unidades"]})]}),a.jsx(_n,{className:"opacity-80",size:40})]})}),a.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-orange-100 text-sm",children:"Total Ventas"}),a.jsxs("p",{className:"text-3xl font-bold mt-2",children:[z," unidades"]})]}),a.jsx(vs,{className:"opacity-80",size:40})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(tf,{size:20,className:"text-slate-600"}),a.jsx("h4",{className:"text-lg font-bold text-slate-800",children:"Filtros"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Perodo"}),a.jsxs("select",{value:S,onChange:C=>N(C.target.value),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"today",children:"Hoy"}),a.jsx("option",{value:"week",children:"ltima Semana"}),a.jsx("option",{value:"month",children:"ltimo Mes"}),a.jsx("option",{value:"all",children:"Todo"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo"}),a.jsxs("select",{value:v,onChange:C=>y(C.target.value),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Todos"}),a.jsx("option",{value:"purchase",children:"Ingresos"}),a.jsx("option",{value:"sale",children:"Ventas"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Producto"}),a.jsxs("div",{className:"relative",children:[a.jsx(Sl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),a.jsx("input",{type:"text",placeholder:"Buscar...",value:j,onChange:C=>T(C.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Rubro"}),a.jsxs("select",{value:H,onChange:C=>U(C.target.value),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Todos"}),F.map(C=>a.jsx("option",{value:C,children:C},C))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Proveedor"}),a.jsxs("select",{value:O,onChange:C=>E(C.target.value),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Todos"}),fe.map(C=>a.jsx("option",{value:C,children:C},C))]})]})]})]}),c?a.jsx("div",{className:"text-center py-8",children:"Cargando..."}):a.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha/Hora"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Producto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Cdigo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Rubro"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Cantidad"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Stock Ant."}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Stock Nuevo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Proveedor"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Referencia"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Usuario"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:r.map(C=>a.jsxs("tr",{className:"hover:bg-slate-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:he(C.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:C.type==="purchase"?a.jsxs("span",{className:"inline-flex items-center gap-1 bg-emerald-100 text-emerald-700 px-2 py-1 rounded-full text-xs font-medium",children:[a.jsx(_n,{size:14}),"Ingreso"]}):a.jsxs("span",{className:"inline-flex items-center gap-1 bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium",children:[a.jsx(vs,{size:14}),"Venta"]})}),a.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900",children:C.product_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 font-mono",children:C.product_code}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:C.category||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:a.jsxs("span",{className:C.type==="purchase"?"text-emerald-600":"text-orange-600",children:[C.type==="purchase"?"+":"",C.quantity]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-slate-500",children:C.previous_stock}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-slate-900",children:C.new_stock}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:C.supplier||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:C.reference||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:C.user_name})]},C.id))})]}),r.length===0&&a.jsx("div",{className:"text-center py-8 text-slate-500",children:"No hay movimientos para mostrar"})]})}),p&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full shadow-2xl",children:[a.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 p-6 rounded-t-2xl",children:[a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Cargar Mercadera"}),a.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:"Registra el ingreso de productos al inventario"})]}),a.jsxs("form",{onSubmit:oe,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Producto *"}),a.jsxs("select",{required:!0,value:L.product_id,onChange:C=>J({...L,product_id:C.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500",children:[a.jsx("option",{value:"",children:"Seleccionar producto..."}),o.map(C=>a.jsxs("option",{value:C.id,children:[C.code," - ",C.name," (Stock actual: ",C.stock,")"]},C.id))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Cantidad *"}),a.jsx("input",{type:"number",required:!0,min:"1",value:L.quantity,onChange:C=>J({...L,quantity:C.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500",placeholder:"Ej: 50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Proveedor"}),a.jsx("input",{type:"text",value:L.supplier,onChange:C=>J({...L,supplier:C.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500",placeholder:"Ej: Distribuidora XYZ"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Referencia"}),a.jsx("input",{type:"text",value:L.reference,onChange:C=>J({...L,reference:C.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500",placeholder:"Ej: Factura N 12345"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Notas"}),a.jsx("textarea",{value:L.notes,onChange:C=>J({...L,notes:C.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500",rows:3,placeholder:"Observaciones adicionales..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{m(!1),J({product_id:"",quantity:"",supplier:"",reference:"",notes:""})},className:"flex-1 px-6 py-3 border-2 border-slate-300 text-slate-700 font-semibold rounded-xl hover:bg-slate-50",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-semibold rounded-xl hover:from-emerald-600 hover:to-teal-700 shadow-lg",children:"Guardar"})]})]})]})})]})}function sv(){const[l,r]=V.useState([]),[s,o]=V.useState([]),[u,c]=V.useState(null),[h,p]=V.useState(!1),[m,v]=V.useState(""),[y,S]=V.useState("efectivo"),[N,j]=V.useState([]),[T,O]=V.useState({product_id:"",product_name:"",quantity:"",purchase_price:"",sale_price:""}),[E,H]=V.useState(""),[U,L]=V.useState(!1),[J,te]=V.useState("");V.useEffect(()=>{oe(),he()},[]);const oe=async()=>{const{data:w}=await xe.from("products").select("*").order("name");w&&r(w)},he=async()=>{const{data:w}=await xe.from("purchase_invoices").select("*").order("created_at",{ascending:!1});w&&o(w)},F=async w=>{const{data:X}=await xe.from("purchase_invoices").select(`
        *,
        items:purchase_invoice_items(
          id,
          product_id,
          quantity,
          purchase_price,
          sale_price,
          subtotal,
          products(name)
        )
      `).eq("id",w).single();X&&c(X)},fe=w=>{if(w==="new"){L(!0);return}const X=l.find(D=>D.id===w);X&&O({...T,product_id:X.id,product_name:X.name,sale_price:X.price.toString(),purchase_price:X.cost?.toString()||""})},be=async()=>{if(!J.trim())return;const{data:w,error:X}=await xe.from("products").insert({name:J,price:parseFloat(T.sale_price)||0,cost:parseFloat(T.purchase_price)||0,stock:0,supplier:E}).select().single();w&&!X&&(await oe(),O({...T,product_id:w.id,product_name:w.name}),L(!1),te(""))},z=()=>{if(!T.product_id||!T.quantity||!T.purchase_price||!T.sale_price){alert("Por favor complete todos los campos");return}const w=parseFloat(T.quantity),X=parseFloat(T.purchase_price),D=parseFloat(T.sale_price),Z=w*X,W={tempId:Date.now().toString(),product_id:T.product_id,product_name:T.product_name,quantity:w,purchase_price:X,sale_price:D,subtotal:Z};j([...N,W]),O({product_id:"",product_name:"",quantity:"",purchase_price:"",sale_price:""})},C=w=>{j(N.filter(X=>X.tempId!==w))},Q=()=>N.reduce((w,X)=>w+X.subtotal,0),$=async()=>{if(N.length===0){alert("Agregue al menos un producto a la compra");return}if(!E.trim()){alert("Ingrese el proveedor");return}const{data:w}=await xe.rpc("generate_purchase_invoice_number"),X=w||`FC-${Date.now()}`,{data:D,error:Z}=await xe.from("purchase_invoices").insert({invoice_number:X,supplier:E,total:Q(),paid_amount:0,status:"pending"}).select().single();if(Z||!D){alert("Error al crear la factura de compra");return}const W=N.map(P=>({invoice_id:D.id,product_id:P.product_id,quantity:P.quantity,purchase_price:P.purchase_price,sale_price:P.sale_price,subtotal:P.subtotal})),{error:b}=await xe.from("purchase_invoice_items").insert(W);if(b){alert("Error al guardar los items de la compra");return}for(const P of N){const re=l.find(ce=>ce.id===P.product_id);re&&(await xe.from("products").update({stock:re.stock+P.quantity,cost:P.purchase_price,price:P.sale_price,supplier:E}).eq("id",P.product_id),await xe.from("inventory_movements").insert({product_id:P.product_id,type:"entrada",quantity:P.quantity,reason:`Compra ${X}`}))}alert(`Factura ${X} creada exitosamente`),j([]),H(""),await oe(),await he()},G=async()=>{if(!u)return;const w=parseFloat(m);if(isNaN(w)||w<=0){alert("Ingrese un monto vlido");return}const X=u.total-u.paid_amount;if(w>X){alert(`El monto no puede ser mayor al saldo pendiente ($${X.toFixed(2)})`);return}const{error:D}=await xe.from("purchase_payments").insert({invoice_id:u.id,amount:w,payment_method:y});if(D){alert("Error al registrar el pago");return}await xe.from("cash_transactions").insert({type:"egreso",amount:w,payment_method:y,description:`Pago compra ${u.invoice_number}`}),alert("Pago registrado exitosamente"),p(!1),v(""),S("efectivo"),await he(),u&&await F(u.id)};return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-2 flex items-center gap-2",children:[a.jsx(Nl,{className:"w-7 h-7"}),"Compras"]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[a.jsx(kl,{className:"w-5 h-5"}),"Nueva Compra"]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Proveedor"}),a.jsx("input",{type:"text",value:E,onChange:w=>H(w.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nombre del proveedor"})]}),a.jsxs("div",{className:"space-y-3 mb-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Producto"}),a.jsxs("select",{value:T.product_id,onChange:w=>fe(w.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Seleccionar..."}),l.map(w=>a.jsx("option",{value:w.id,children:w.name},w.id)),a.jsx("option",{value:"new",children:"+ Agregar Nuevo Producto"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Cantidad"}),a.jsx("input",{type:"number",value:T.quantity,onChange:w=>O({...T,quantity:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0",step:"0.01"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Precio Compra"}),a.jsx("input",{type:"number",value:T.purchase_price,onChange:w=>O({...T,purchase_price:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Precio Venta"}),a.jsx("input",{type:"number",value:T.sale_price,onChange:w=>O({...T,sale_price:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00",step:"0.01"})]})]}),a.jsxs("button",{onClick:z,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg font-semibold flex items-center justify-center gap-2 transition-colors",children:[a.jsx(kn,{className:"w-5 h-5"}),"Agregar Item"]})]}),N.length>0&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"Items de la Compra"}),a.jsx("div",{className:"space-y-2 mb-4",children:N.map(w=>a.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-slate-800",children:w.product_name}),a.jsxs("p",{className:"text-sm text-slate-600",children:[w.quantity," x $",w.purchase_price.toFixed(2)," = $",w.subtotal.toFixed(2)]})]}),a.jsx("button",{onClick:()=>C(w.tempId),className:"text-red-500 hover:text-red-700",children:a.jsx(hl,{className:"w-5 h-5"})})]},w.tempId))}),a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-bold text-slate-800",children:"Total Compra:"}),a.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["$",Q().toFixed(2)]})]})}),a.jsxs("button",{onClick:$,className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white py-3 rounded-lg font-bold flex items-center justify-center gap-2 transition-colors",children:[a.jsx(Gg,{className:"w-5 h-5"}),"Guardar Factura de Compra"]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[a.jsx(qg,{className:"w-5 h-5"}),"Facturas de Compra"]}),a.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:s.map(w=>a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>F(w.id),children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-800",children:w.invoice_number}),a.jsx("p",{className:"text-sm text-slate-600",children:w.supplier})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${w.status==="paid"?"bg-emerald-100 text-emerald-700":w.status==="partial"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:w.status==="paid"?"Pagada":w.status==="partial"?"Parcial":"Pendiente"})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-slate-600",children:new Date(w.created_at).toLocaleDateString("es-AR")}),a.jsxs("span",{className:"font-bold text-slate-800",children:["$",w.total.toFixed(2)]})]}),w.paid_amount>0&&a.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Pagado: $",w.paid_amount.toFixed(2)," | Pendiente: $",(w.total-w.paid_amount).toFixed(2)]})]},w.id))})]})]}),U&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-96",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Agregar Nuevo Producto"}),a.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"El producto no existe en el sistema. Desea agregarlo?"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Nombre del Producto"}),a.jsx("input",{type:"text",value:J,onChange:w=>te(w.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nombre del producto",autoFocus:!0})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{L(!1),te("")},className:"flex-1 bg-slate-200 hover:bg-slate-300 text-slate-800 py-2 rounded-lg font-semibold",children:"Cancelar"}),a.jsx("button",{onClick:be,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg font-semibold",children:"Agregar"})]})]})}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-slate-800",children:u.invoice_number}),a.jsx("p",{className:"text-slate-600",children:u.supplier}),a.jsx("p",{className:"text-sm text-slate-500",children:new Date(u.created_at).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),a.jsx("button",{onClick:()=>c(null),className:"text-slate-400 hover:text-slate-600",children:a.jsx(hl,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"Items"}),a.jsx("div",{className:"space-y-2",children:u.items?.map(w=>a.jsx("div",{className:"bg-slate-50 p-3 rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-slate-800",children:w.products.name}),a.jsxs("p",{className:"text-sm text-slate-600",children:["Cantidad: ",w.quantity," | Precio Compra: $",w.purchase_price.toFixed(2)," | Precio Venta: $",w.sale_price.toFixed(2)]})]}),a.jsxs("p",{className:"font-bold text-slate-800",children:["$",w.subtotal.toFixed(2)]})]})},w.id))})]}),a.jsxs("div",{className:"border-t pt-4 mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"font-semibold text-slate-700",children:"Total:"}),a.jsxs("span",{className:"text-xl font-bold text-slate-800",children:["$",u.total.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"font-semibold text-slate-700",children:"Pagado:"}),a.jsxs("span",{className:"text-lg font-bold text-emerald-600",children:["$",u.paid_amount.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-semibold text-slate-700",children:"Pendiente:"}),a.jsxs("span",{className:"text-lg font-bold text-red-600",children:["$",(u.total-u.paid_amount).toFixed(2)]})]})]}),u.status!=="paid"&&a.jsxs("button",{onClick:()=>p(!0),className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white py-3 rounded-lg font-bold flex items-center justify-center gap-2",children:[a.jsx(jl,{className:"w-5 h-5"}),"Registrar Pago"]})]})}),h&&u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-96",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Registrar Pago"}),a.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Saldo pendiente: $",(u.total-u.paid_amount).toFixed(2)]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Monto a Pagar"}),a.jsx("input",{type:"number",value:m,onChange:w=>v(w.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00",step:"0.01",autoFocus:!0})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Mtodo de Pago"}),a.jsxs("select",{value:y,onChange:w=>S(w.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"transferencia",children:"Transferencia"}),a.jsx("option",{value:"qr",children:"QR"}),a.jsx("option",{value:"expensas",children:"Expensas"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{p(!1),v(""),S("efectivo")},className:"flex-1 bg-slate-200 hover:bg-slate-300 text-slate-800 py-2 rounded-lg font-semibold",children:"Cancelar"}),a.jsx("button",{onClick:G,className:"flex-1 bg-emerald-500 hover:bg-emerald-600 text-white py-2 rounded-lg font-semibold",children:"Confirmar Pago"})]})]})})]})}function iv({shift:l,onCloseShift:r}){const[s,o]=V.useState("ventas"),[u,c]=V.useState("Kiosco Damian"),[h,p]=V.useState(new Date),[m,v]=V.useState(0),[y,S]=V.useState(0),[N,j]=V.useState(0),[T,O]=V.useState(0),[E,H]=V.useState(0),[U,L]=V.useState(0),[J,te]=V.useState(0);V.useEffect(()=>{oe(),F();const C=setInterval(()=>{p(new Date)},1e3),Q=setInterval(()=>{F()},3e4);return()=>{clearInterval(C),clearInterval(Q)}},[]),V.useEffect(()=>{l?fe():(v(0),S(0),j(0),O(0))},[l]),V.useEffect(()=>{s==="ventas"&&(F(),l&&fe())},[s]);const oe=async()=>{const{data:C}=await xe.from("configuration").select("business_name").maybeSingle();C&&c(C.business_name)},he=()=>h.toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit",hour12:!1}),F=async()=>{const C=new Date,Q=new Date(C.getFullYear(),C.getMonth(),1),$=new Date(C.getFullYear(),C.getMonth()+1,0,23,59,59),{data:G}=await xe.from("sales").select("total, items").gte("created_at",Q.toISOString()).lte("created_at",$.toISOString()),w=G?.reduce((b,P)=>b+Number(P.total),0)||0,X=G?.length||0,{data:D}=await xe.from("products").select("cost"),Z=G?.reduce((b,P)=>{const re=P.items;return b+re.reduce((ce,we)=>{const M=D?.find(se=>se.id===we.product_id)?.cost||0;return ce+M*we.quantity},0)},0)||0,W=w-Z;H(w),L(X),te(W)},fe=async()=>{if(!l)return;const{data:C}=await xe.from("cash_transactions").select("type, payment_method, amount").eq("shift_id",l.id).order("created_at",{ascending:!1}),Q=C||[],$=Number(l.opening_cash||0),G=Q.reduce((W,b)=>{const P=b.payment_method,re=Number(b.amount);return W[P]||(W[P]={income:0,expense:0}),b.type==="income"?W[P].income+=re:W[P].expense+=re,W},{}),w=$+(G.efectivo?.income||0)-(G.efectivo?.expense||0),X=(G.transferencia?.income||0)-(G.transferencia?.expense||0),D=(G.qr?.income||0)-(G.qr?.expense||0),Z=(G.expensas?.income||0)-(G.expensas?.expense||0);v(w),S(X),j(D),O(Z)},be=[{id:"ventas",label:"Ventas",icon:Nl,color:"from-emerald-500 to-teal-600"},{id:"compras",label:"Compras",icon:nf,color:"from-rose-500 to-pink-600"},{id:"stock",label:"Inventario",icon:kl,color:"from-blue-500 to-cyan-600"},{id:"movimientos",label:"Movimientos",icon:_n,color:"from-amber-500 to-orange-600"},{id:"caja",label:"Caja",icon:Vi,color:"from-violet-500 to-purple-600"},{id:"reportes",label:"Reportes",icon:Xh,color:"from-cyan-500 to-blue-600"},{id:"configuracion",label:"Configuracin",icon:rf,color:"from-gray-500 to-slate-600"}],z=be.find(C=>C.id===s);return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[a.jsx("header",{className:"bg-white shadow-lg border-b border-slate-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 p-3 rounded-xl shadow-lg",children:a.jsx(sf,{className:"text-white",size:28})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent",children:u}),a.jsx("p",{className:"text-sm text-slate-600",children:"Sistema de Gestin POS"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-700",children:l?`Turno Activo - ${he()}`:"Sin turno activo"}),a.jsx("p",{className:"text-xs text-slate-500",children:l?`Usuario: ${l.user_name}`:"Usuario: -"})]}),a.jsx("div",{className:`w-3 h-3 rounded-full ${l?"bg-emerald-500 animate-pulse":"bg-slate-400"}`})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-3",children:"Resumen del Mes"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-5 shadow-lg text-white",children:[a.jsx("p",{className:"text-sm font-semibold opacity-90",children:"Ventas Totales"}),a.jsxs("p",{className:"text-3xl font-bold mt-2",children:["$",E.toFixed(2)]}),a.jsx("p",{className:"text-xs opacity-75 mt-2",children:"Facturacin total del mes"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl p-5 shadow-lg text-white",children:[a.jsx("p",{className:"text-sm font-semibold opacity-90",children:"Transacciones"}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:U}),a.jsx("p",{className:"text-xs opacity-75 mt-2",children:"Ventas realizadas este mes"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl p-5 shadow-lg text-white",children:[a.jsx("p",{className:"text-sm font-semibold opacity-90",children:"Ganancia Estimada"}),a.jsxs("p",{className:"text-3xl font-bold mt-2",children:["$",J.toFixed(2)]}),a.jsx("p",{className:"text-xs opacity-75 mt-2",children:"Ventas - costos del mes"})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-3",children:"Turno Actual - Caja por Mtodo de Pago"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow border border-slate-200",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-600",children:"Caja Efectivo"}),a.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:l?`$${m.toFixed(2)}`:"--"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Efectivo inicial + ingresos - egresos"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow border border-slate-200",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-600",children:"Transferencias"}),a.jsx("p",{className:"text-2xl font-bold text-slate-800",children:l?`$${y.toFixed(2)}`:"--"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Ingresos - egresos por transferencia"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow border border-slate-200",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-600",children:"QR"}),a.jsx("p",{className:"text-2xl font-bold text-slate-800",children:l?`$${N.toFixed(2)}`:"--"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Ingresos - egresos por QR"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow border border-slate-200",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-600",children:"Expensas"}),a.jsx("p",{className:"text-2xl font-bold text-slate-800",children:l?`$${T.toFixed(2)}`:"--"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Ingresos - egresos por expensas"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[a.jsx("aside",{className:"col-span-12 lg:col-span-2",children:a.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-4 space-y-2",children:be.map(C=>{const Q=C.icon,$=s===C.id;return a.jsxs("button",{onClick:()=>o(C.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${$?`bg-gradient-to-r ${C.color} text-white shadow-lg scale-105`:"text-slate-600 hover:bg-slate-50 hover:scale-102"}`,children:[a.jsx(Q,{size:20}),a.jsx("span",{className:"font-medium text-sm",children:C.label})]},C.id)})})}),a.jsx("main",{className:"col-span-12 lg:col-span-10",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[a.jsx("div",{className:`bg-gradient-to-r ${z?.color} p-6 text-white`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[z&&a.jsx(z.icon,{size:32}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:z?.label}),a.jsxs("p",{className:"text-white/80 text-sm",children:["Gestiona tus ",z?.label.toLowerCase()]})]})]})}),a.jsxs("div",{className:"p-6",children:[s==="ventas"&&a.jsx(Yg,{shift:l}),s==="compras"&&a.jsx(sv,{}),s==="stock"&&a.jsx(Xg,{}),s==="movimientos"&&l&&a.jsx(nv,{shift:l}),s==="caja"&&a.jsx(Zg,{shift:l,onCloseShift:r}),s==="reportes"&&a.jsx(ev,{}),s==="configuracion"&&a.jsx(rv,{})]})]})})]})]})]})}function ov(){const[l,r]=V.useState(null),[s,o]=V.useState(!0),[u,c]=V.useState(!1),[h,p]=V.useState({username:"",password:"",opening_cash:""}),[m,v]=V.useState(""),[y,S]=V.useState(!1);V.useEffect(()=>{N()},[]);const N=async()=>{try{const{data:O}=await xe.from("shifts").select("*").eq("active",!0).maybeSingle();O?r(O):c(!0)}catch(O){console.error("Error initializing shift:",O)}finally{o(!1)}},j=async O=>{O.preventDefault(),v("");const{data:E}=await xe.from("users").select("*").eq("username",h.username).eq("password",h.password).eq("active",!0).maybeSingle();if(!E){v("Usuario o contrasea incorrectos");return}const{data:H,error:U}=await xe.from("shifts").insert([{user_id:E.id,user_name:E.full_name,opening_cash:parseFloat(h.opening_cash),active:!0}]).select().single();if(U){v("Error al crear el turno"),console.error(U);return}r(H),c(!1),p({username:"",password:"",opening_cash:""})},T=async O=>{if(!l)return;const{data:E}=await xe.from("sales").select("total").eq("shift_id",l.id),H=E?.reduce((J,te)=>J+Number(te.total),0)||0,{data:U}=await xe.from("cash_transactions").select("amount").eq("shift_id",l.id).eq("type","expense"),L=U?.reduce((J,te)=>J+Number(te.amount),0)||0;await xe.from("shifts").update({end_date:new Date().toISOString(),closing_cash:O,total_sales:H,total_expenses:L,active:!1}).eq("id",l.id),r(null),c(!0)};return s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-xl font-semibold",children:"Cargando Sistema..."})]})}):u?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 p-8 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/20 backdrop-blur-sm rounded-2xl mb-4",children:a.jsx(sf,{className:"text-white",size:40})}),a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Iniciar Turno"}),a.jsx("p",{className:"text-purple-100",children:"Ingresa tus credenciales para comenzar"})]}),a.jsxs("form",{onSubmit:j,className:"p-8 space-y-5",children:[m&&a.jsx("div",{className:"bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm font-medium",children:m}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Usuario *"}),a.jsx("input",{type:"text",required:!0,value:h.username,onChange:O=>p({...h,username:O.target.value}),className:"w-full px-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"Ingresa tu usuario"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Contrasea *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:y?"text":"password",required:!0,value:h.password,onChange:O=>p({...h,password:O.target.value}),className:"w-full px-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all pr-12",placeholder:"Ingresa tu contrasea"}),a.jsx("button",{type:"button",onClick:()=>S(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:y?a.jsx(Zh,{size:20}):a.jsx(ef,{size:20})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Efectivo Inicial *"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 font-semibold",children:"$"}),a.jsx("input",{type:"number",required:!0,step:"0.01",min:"0",value:h.opening_cash,onChange:O=>p({...h,opening_cash:O.target.value}),className:"w-full pl-8 pr-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"0.00"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Monto en efectivo con el que inicias el turno"})]}),a.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white px-6 py-4 rounded-xl font-bold text-lg shadow-lg transition-all flex items-center justify-center gap-2",children:[a.jsx(Vg,{size:24}),"Iniciar Turno"]})]})]})}):a.jsx(iv,{shift:l,onCloseShift:T})}fm.createRoot(document.getElementById("root")).render(a.jsx(V.StrictMode,{children:a.jsx(ov,{})}));
